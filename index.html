
<!DOCTYPE html>
<html lang="pt-br">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://dasksz.github.io/DASHBOARD-PROMOTORES/">
    <meta property="og:title" content="Painel de Promotores - PRIME DISTRIBUIÇÃO">
    <meta property="og:description" content="Acesse o painel de Promotores e acompanhe os indicadores.">
    <meta property="og:image" content="https://dasksz.github.io/DASHBOARD-PROMOTORES/imagens/og-social-v2.png">
    <meta itemprop="image" content="https://dasksz.github.io/DASHBOARD-PROMOTORES/imagens/og-social-v2.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://dasksz.github.io/DASHBOARD-PROMOTORES/">
    <meta property="twitter:title" content="Painel de Promotores - PRIME DISTRIBUIÇÃO">
    <meta property="twitter:description" content="Acesse o painel de Prmotores e acompanhe os indicadores.">
    <meta property="twitter:image" content="https://dasksz.github.io/DASHBOARD-PROMOTORES/imagens/og-social-v2.png">

    <title>Painel de Promotores - PRIME DISTRIBUIÇÃO</title>
    <link rel="icon" type="image/svg+xml" href="imagens/logo.svg">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/mrdoob/three.js@r128/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Plus Jakarta Sans"', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            orange: '#FF5E00', // Laranja Prime
                            darkOrange: '#CC4A00',
                            bg: '#050505',
                        }
                    },
                    animation: {
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/xlsx-js-style@1.2.0/dist/xlsx.bundle.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/idb@7/build/umd.js" defer></script>
    <!-- amCharts 5 -->
    <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/xy.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/themes/Dark.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/radar.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/hierarchy.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .glass-card {
            background: rgba(20, 20, 20, 0.6);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 40px rgba(0,0,0,0.8);
        }

        .input-field {
            background: rgba(0, 0, 0, 0.4) !important;
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
            transition: all 0.3s ease;
        }
        
        .input-field:focus {
            border-color: #FF5E00 !important;
            box-shadow: 0 0 0 2px rgba(255, 94, 0, 0.2);
            background: rgba(0, 0, 0, 0.6) !important;
        }

        /* Autofill Fix */
        input:-webkit-autofill,
        input:-webkit-autofill:hover,
        input:-webkit-autofill:focus,
        input:-webkit-autofill:active {
            -webkit-text-fill-color: white !important;
            transition: background-color 9999s ease-in-out 0s;
        }

        .logo-glow {
            filter: drop-shadow(0 0 10px rgba(255, 94, 0, 0.6));
            transition: transform 0.3s ease;
        }

        .logo-glow:hover {
            transform: scale(1.05);
        }

        /* Esconder spinner por padrão */
        .loader { display: none; }
        .loading .loader { display: block; }
        .loading .btn-text { display: none; }

        /* Critical CSS to prevent FOUC */
        .hidden { display: none; }

        /* Background Animation from Design */
        body {
            background: transparent;
        }
    </style>
</head>
<body class="text-slate-300 antialiased overflow-x-hidden">

<!-- Fundo Estático (Unificado) -->
<div class="fixed inset-0 z-[-1] bg-[#050505]">
    <div class="absolute inset-0" style="background-image: radial-gradient(at 0% 0%, rgba(255, 94, 0, 0.15) 0px, transparent 50%), radial-gradient(at 100% 100%, rgba(255, 0, 0, 0.1) 0px, transparent 50%);"></div>
    <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-brand-orange/10 rounded-full blur-[100px] animate-pulse-slow"></div>
    <div class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-red-600/10 rounded-full blur-[100px] animate-pulse-slow" style="animation-delay: 2s"></div>
</div>

<!-- Tela de Login (New Design) -->
<div id="tela-login" class="fixed inset-0 z-[2000] hidden flex items-center justify-center p-4">

    <!-- LOGIN VIEW -->
    <div id="view-login" class="glass-card w-full max-w-md rounded-2xl p-6 relative z-10 transition-all duration-300">
        <!-- CABEÇALHO -->
        <div class="flex flex-col items-center mb-4">
            <div class="w-24 h-24 mb-4 relative">
                <div class="absolute inset-0 bg-brand-orange/20 rounded-full blur-xl"></div>
                <img src="imagens/logo.svg" alt="Prime Logo" class="w-full h-full object-contain logo-glow relative z-10">
            </div>
            <h1 class="text-2xl font-bold text-white tracking-tight text-center">Prime Distribuição</h1>
            <p class="text-sm text-gray-400 mt-1 text-center">Sistema Operacional</p>
        </div>

        <!-- FORMULÁRIO -->
        <form id="loginForm" class="space-y-4">
            <div class="space-y-1.5">
                <label for="email" class="text-xs font-semibold text-gray-400 uppercase tracking-wider ml-1">E-mail</label>
                <div class="relative">
                    <input type="email" id="email" name="email" autocomplete="username" required class="input-field w-full rounded-lg py-3 px-4 text-white placeholder-gray-600 outline-none" placeholder="seu@email.com">
                    <svg class="w-5 h-5 absolute right-3 top-3.5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207" /></svg>
                </div>
            </div>

            <div class="space-y-1.5">
                <label for="password" class="text-xs font-semibold text-gray-400 uppercase tracking-wider ml-1">Senha</label>
                <div class="relative">
                    <input type="password" id="password" name="password" autocomplete="current-password" required class="input-field w-full rounded-lg py-3 px-4 text-white placeholder-gray-600 outline-none" placeholder="••••••••">
                    <button type="button" id="togglePassword" class="absolute right-3 top-3.5 text-gray-600 cursor-pointer hover:text-white transition-colors">
                        <svg id="eyeIcon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                        </svg>
                    </button>
                </div>
            </div>

            <div class="flex items-center justify-between text-sm">
                <label class="flex items-center space-x-2 cursor-pointer group">
                    <input type="checkbox" id="remember-me" class="w-4 h-4 rounded border-gray-600 bg-transparent text-[#FF5E00] focus:ring-offset-0 focus:ring-[#FF5E00]">
                    <span class="text-gray-400 group-hover:text-gray-300 transition-colors">Lembrar-me</span>
                </label>
                <a href="#" id="link-forgot" class="text-gray-500 hover:text-[#FF5E00] transition-colors">Esqueceu a senha?</a>
            </div>

            <button type="submit" id="submitBtn" class="w-full bg-[#FF5E00] hover:bg-[#CC4A00] text-white font-bold py-3.5 rounded-lg shadow-lg shadow-orange-900/50 transform active:scale-[0.99] transition-all flex justify-center items-center">
                <span class="btn-text">ENTRAR</span>
                <svg class="loader animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
            </button>
        </form>

        <div class="flex items-center my-4">
            <div class="flex-grow border-t border-white/10"></div>
            <span class="mx-4 text-xs text-gray-500 uppercase tracking-wider whitespace-nowrap">Ou entre com</span>
            <div class="flex-grow border-t border-white/10"></div>
        </div>

        <!-- BOTÃO GOOGLE -->
        <div class="flex justify-center mb-6">
            <button type="button" id="login-google-btn" class="w-12 h-12 rounded-full border border-gray-700 flex items-center justify-center hover:bg-white/5 hover:border-gray-500 transition-all group active:scale-90 shadow-sm relative">
                <svg class="w-9 h-9 text-gray-500 group-hover:text-gray-300 transition-colors" fill="currentColor" viewBox="0 0 52 52">
                    <g transform="translate(10, 14)">
                        <path d="M24 12.23c0-1.18-.1-2.32-.3-3.43H12v6.51h6.75c-.29 1.57-1.17 2.9-2.5 3.79v4.23h4.05c2.37-2.18 3.7-5.39 3.7-9.1z"/>
                        <path d="M12 24.5c3.24 0 5.96-1.07 7.95-2.91l-4.05-4.23c-1.12.75-2.55 1.19-3.9 1.19-3 0-5.54-2.03-6.45-4.76H1.4v4.41c2 3.97 6.1 6.71 10.6 6.71z"/>
                        <path d="M5.55 13.79a7.19 7.19 0 0 1 0-4.58V4.8H1.4a11.98 11.98 0 0 0 0 14.4l4.15-4.41z"/>
                        <path d="M12 4.31c1.76 0 3.34.6 4.59 1.8l3.43-3.43A11.94 11.94 0 0 0 12 0C7.5 0 3.4 2.74 1.4 6.71l4.15 4.41c.91-2.73 3.45-4.81 6.45-4.81z"/>
                    </g>
                    <path d="M48 24.5h-4.5v-4.5h-3v4.5h-4.5v3h4.5v4.5h3v-4.5h4.5v-3z"/>
                </svg>
            </button>
        </div>

        <!-- RODAPÉ -->
        <div class="text-center">
            <p class="text-sm text-gray-400">
                Não tem conta? <a href="#" id="link-signup" class="font-semibold text-[#FF5E00] hover:text-[#CC4A00] transition-colors">Cadastre-se</a>
            </p>
            <p class="text-xs text-gray-600 mt-4">© 2026 Prime Distribuição</p>
        </div>
    </div>

    <!-- SIGNUP VIEW (Hidden, Styled) -->
    <div id="view-signup" class="glass-card w-full max-w-md rounded-2xl p-8 relative z-10 hidden transition-all duration-300">
            <div class="flex flex-col items-center mb-6">
            <h1 class="text-2xl font-bold text-white tracking-tight text-center">Criar Conta</h1>
            <p class="text-sm text-gray-400 mt-1 text-center">Solicite acesso ao painel</p>
        </div>
        <form id="signupForm" class="space-y-5">
                <div class="space-y-1.5">
                <div class="relative">
                    <input type="text" id="signup-name" name="name" autocomplete="name" required class="input-field w-full rounded-lg py-3 px-4 text-white placeholder-gray-600 outline-none" placeholder="Nome Completo">
                </div>
            </div>
            <div class="space-y-1.5">
                <div class="relative">
                    <input type="email" id="signup-email" name="email" autocomplete="username" required class="input-field w-full rounded-lg py-3 px-4 text-white placeholder-gray-600 outline-none" placeholder="E-mail">
                </div>
            </div>
            <div class="space-y-1.5">
                    <div class="relative">
                    <input type="password" id="signup-password" name="password" autocomplete="new-password" required class="input-field w-full rounded-lg py-3 px-4 text-white placeholder-gray-600 outline-none" placeholder="Senha">
                </div>
            </div>
                <button type="submit" class="w-full bg-gradient-to-r from-brand-orange to-red-600 hover:from-orange-500 hover:to-red-500 text-white font-bold py-3.5 rounded-lg shadow-lg transition-all">
                SOLICITAR ACESSO
            </button>
        </form>
            <div class="text-center mt-6">
            <p class="text-sm text-gray-400">
                Já tem conta? <a href="#" id="link-login-from-signup" class="font-semibold text-brand-orange hover:text-red-500 transition-colors">Entrar</a>
            </p>
        </div>
    </div>

    <!-- FORGOT VIEW (Hidden, Styled) -->
    <div id="view-forgot" class="glass-card w-full max-w-md rounded-2xl p-8 relative z-10 hidden transition-all duration-300">
            <div class="flex flex-col items-center mb-6">
            <h1 class="text-2xl font-bold text-white tracking-tight text-center">Recuperar Senha</h1>
            <p class="text-sm text-gray-400 mt-1 text-center">Digite seu e-mail</p>
        </div>
        <form id="forgotForm" class="space-y-5">
            <div class="space-y-1.5">
                <div class="relative">
                    <input type="email" id="forgot-email" name="email" autocomplete="email" required class="input-field w-full rounded-lg py-3 px-4 text-white placeholder-gray-600 outline-none" placeholder="E-mail cadastrado">
                </div>
            </div>
                <button type="submit" class="w-full bg-gradient-to-r from-brand-orange to-red-600 hover:from-orange-500 hover:to-red-500 text-white font-bold py-3.5 rounded-lg shadow-lg transition-all">
                ENVIAR INSTRUÇÕES
            </button>
        </form>
            <div class="text-center mt-6">
            <a href="#" id="link-login-from-forgot" class="text-sm font-semibold text-brand-orange hover:text-red-500 transition-colors">Voltar ao Login</a>
        </div>
    </div>

</div>

<!-- Tela de Loading -->
<div id="tela-loading" class="flex-center-overlay z-[2000] hidden">
   <div class="text-center">
        <div class="spinner-orange mb-6 mx-auto w-12 h-12 border-4 border-t-brand-red"></div>
        <h2 class="text-2xl font-bold text-white mb-2 animate-pulse">Carregando Prime...</h2>
        <p class="text-slate-400 text-sm">Sincronizando dados em tempo real.</p>
    </div>
</div>

<!-- Tela Pendente -->
<div id="tela-pendente" class="flex-center-overlay z-[2000] hidden">
    <div class="gatekeeper-card p-8 rounded-2xl shadow-xl max-w-sm w-full text-center glass-panel/90 backdrop-blur-md border border-white/10">
        <img src="imagens/logo.svg" alt="Logo" class="w-24 h-24 mx-auto mb-4 object-contain" style="width: 6rem; height: 6rem;">
        <h1 class="text-xl font-bold text-white">Acesso Restrito</h1>
        <div class="flex flex-col items-center justify-center my-6">
            <div class="spinner-orange mb-3 w-8 h-8"></div>
            <p id="pendente-status-msg" class="text-orange-400 font-semibold">Aguardando Liberação</p>
        </div>
        <button id="logout-button-pendente" class="text-slate-400 hover:text-white text-sm underline cursor-pointer bg-transparent border-none">Sair</button>
    </div>
</div>

<!-- Loader Geral (Overlay) -->
<div id="loader" class="hidden fixed inset-0 z-[3000] flex flex-col items-center justify-center glass-panel/10">
    <div id="loader-spinner" class="spinner-orange w-12 h-12 border-4 border-t-brand-red animate-spin"></div>
    <p id="loader-text" class="text-white mt-4 text-lg font-medium tracking-wide animate-pulse">Processando...</p>
</div>

<!-- Admin Uploader Modal -->
<div id="admin-uploader-modal" class="modal-overlay hidden">
        <div class="bg-modal-content rounded-2xl shadow-2xl max-w-lg w-full m-4 border border-slate-700 relative text-center p-8 backdrop-blur-md glass-panel/90">
            <button id="admin-modal-close-btn" class="absolute top-4 right-4 text-slate-400 hover:text-white transition-colors">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>

            <h1 class="text-2xl font-bold mb-2 text-white">Upload de Dados ☁️</h1>
            <p class="mb-8 text-slate-400 text-sm">Atualize a base de dados do sistema.</p>

            <div class="space-y-4 mb-6 text-left hidden"> <!-- Hidden Supabase URL -->
                <input type="text" id="supabase-url" class="hidden" value="https://dldsocponbjthqxhmttj.supabase.co">
            </div>

            <div class="space-y-3 mb-8 text-left">
                <!-- Inputs stylised -->
                <div class="group">
                    <label class="block text-xs font-bold text-slate-500 uppercase mb-1 ml-1">Vendas (Mês Atual)</label>
                    <input type="file" id="sales-file-input" class="block w-full text-sm text-slate-300 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-[#FF5E00] file:text-white hover:file:bg-[#CC4A00] transition-all cursor-pointer glass-input rounded-lg border border-slate-700" accept=".csv, .xls, .xlsx"/>
                </div>
                <div class="group">
                    <label class="block text-xs font-bold text-slate-500 uppercase mb-1 ml-1">Cadastro de Clientes</label>
                    <input type="file" id="clients-file-input" class="block w-full text-sm text-slate-300 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-[#FF5E00] file:text-white hover:file:bg-[#CC4A00] transition-all cursor-pointer glass-input rounded-lg border border-slate-700" accept=".csv, .xls, .xlsx"/>
                </div>
                <div class="group">
                    <label class="block text-xs font-bold text-slate-500 uppercase mb-1 ml-1">Cadastro de Produtos</label>
                    <input type="file" id="products-file-input" class="block w-full text-sm text-slate-300 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-[#FF5E00] file:text-white hover:file:bg-[#CC4A00] transition-all cursor-pointer glass-input rounded-lg border border-slate-700" accept=".csv, .xls, .xlsx"/>
                </div>
                <div class="group">
                    <label class="block text-xs font-bold text-slate-500 uppercase mb-1 ml-1">Histórico (Trimestre)</label>
                    <input type="file" id="history-file-input" class="block w-full text-sm text-slate-300 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-[#FF5E00] file:text-white hover:file:bg-[#CC4A00] transition-all cursor-pointer glass-input rounded-lg border border-slate-700" accept=".csv, .xls, .xlsx"/>
                </div>
                 <div class="group">
                    <label class="block text-xs font-bold text-slate-500 uppercase mb-1 ml-1">Inovações (Mês)</label>
                    <input type="file" id="innovations-file-input" class="block w-full text-sm text-slate-300 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-[#FF5E00] file:text-white hover:file:bg-[#CC4A00] transition-all cursor-pointer glass-input rounded-lg border border-slate-700" accept=".csv, .xls, .xlsx"/>
                </div>
                <div class="group">
                    <label class="block text-xs font-bold text-slate-500 uppercase mb-1 ml-1">Estrutura de Equipe</label>
                    <input type="file" id="hierarchy-file-input" class="block w-full text-sm text-slate-300 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-[#FF5E00] file:text-white hover:file:bg-[#CC4A00] transition-all cursor-pointer glass-input rounded-lg border border-slate-700" accept=".csv, .xls, .xlsx"/>
                </div>

                <!-- Optional Uploads Toggle -->
                <div class="col-span-1 md:col-span-2 mt-2">
                    <button id="toggle-optional-uploads-btn" class="text-[#FF5E00] hover:text-[#CC4A00] text-xs font-bold uppercase flex items-center transition-colors focus:outline-none">
                        <span id="optional-uploads-icon" class="mr-1 transform transition-transform duration-200">▶</span>
                        Planilhas Opcionais
                    </button>
                </div>

                <!-- Hidden Container for Optional Files -->
                <div id="optional-uploads-container" class="col-span-1 md:col-span-2 hidden pl-2 border-l-2 border-slate-700/50 mt-2 transition-all duration-300">
                    <div class="group mb-2">
                        <label class="block text-xs font-bold text-slate-500 uppercase mb-1 ml-1">Títulos</label>
                        <input type="file" id="titulos-file-input" class="block w-full text-sm text-slate-300 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-[#FF5E00] file:text-white hover:file:bg-[#CC4A00] transition-all cursor-pointer glass-input rounded-lg border border-slate-700" accept=".csv, .xls, .xlsx"/>
                    </div>
                    <div class="group mb-2">
                        <label class="block text-xs font-bold text-slate-500 uppercase mb-1 ml-1">Nota Involves - 1</label>
                        <input type="file" id="nota-involves-1-input" class="block w-full text-sm text-slate-300 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-[#FF5E00] file:text-white hover:file:bg-[#CC4A00] transition-all cursor-pointer glass-input rounded-lg border border-slate-700" accept=".csv, .xls, .xlsx"/>
                    </div>
                    <div class="group">
                        <label class="block text-xs font-bold text-slate-500 uppercase mb-1 ml-1">Nota Involves - 2</label>
                        <input type="file" id="nota-involves-2-input" class="block w-full text-sm text-slate-300 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-[#FF5E00] file:text-white hover:file:bg-[#CC4A00] transition-all cursor-pointer glass-input rounded-lg border border-slate-700" accept=".csv, .xls, .xlsx"/>
                    </div>
                </div>
            </div>

            <button id="generate-btn" class="bg-gradient-to-r from-[#FF5E00] to-[#CC4A00] hover:from-[#CC4A00] hover:to-[#993300] text-white font-bold py-3 px-6 rounded-xl w-full shadow-lg transform active:scale-95 transition-all disabled:opacity-50 disabled:cursor-not-allowed">
                Iniciar Upload
            </button>

            <div class="mt-4 border-t border-slate-700 pt-4">
                <button id="system-diagnosis-btn" class="text-xs text-slate-500 hover:text-slate-300 flex items-center justify-center gap-1 cursor-pointer w-full transition-colors">
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                    Diagnóstico do Sistema
                </button>
            </div>

            <div id="status-container" class="hidden mt-6">
                <p id="status-text" class="text-sm text-slate-300 mb-2 animate-pulse">Processando...</p>
                <div class="w-full h-1.5 rounded-full bg-slate-700 overflow-hidden">
                    <div id="progress-bar" class="bg-[#FF5E00] h-full w-0 transition-all duration-300"></div>
                </div>
            </div>
        </div>
</div>

<!-- TOP NAVBAR (Replaces Sidebar) -->
<nav id="top-navbar" class="glass-nav fixed top-0 w-full z-50 px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between hidden">
    <!-- Logo & Brand -->
    <div class="flex items-center gap-4">
        <img src="imagens/logo.svg" alt="Prime Logo" class="h-8 w-auto" style="height: 2rem; width: auto;">
        <span class="hidden md:block text-lg font-bold text-white tracking-tight">PRIME <span class="text-slate-400 font-normal text-sm">| Distribuição</span></span>
    </div>

    <!-- Desktop Navigation -->
    <div id="desktop-nav-container" class="hidden lg:flex items-center gap-1 overflow-x-auto overflow-y-hidden no-scrollbar h-full max-w-4xl px-2 cursor-grab active:cursor-grabbing">
        <button data-target="dashboard" class="nav-link active-nav px-3 py-2 text-sm font-medium text-slate-300 hover:text-white rounded-md transition-colors whitespace-nowrap">Visão Geral</button>
        <button data-target="comparativo" class="nav-link px-3 py-2 text-sm font-medium text-slate-300 hover:text-white rounded-md transition-colors whitespace-nowrap">Comparativo</button>
        <button data-target="cobertura" class="nav-link px-3 py-2 text-sm font-medium text-slate-300 hover:text-white rounded-md transition-colors whitespace-nowrap">Cobertura</button>
        <button data-target="cidades" class="nav-link px-3 py-2 text-sm font-medium text-slate-300 hover:text-white rounded-md transition-colors whitespace-nowrap">Geo</button>
        <button data-target="mix" class="nav-link px-3 py-2 text-sm font-medium text-slate-300 hover:text-white rounded-md transition-colors whitespace-nowrap">Mix</button>
        <button data-target="inovacoes-mes" class="nav-link px-3 py-2 text-sm font-medium text-slate-300 hover:text-white rounded-md transition-colors whitespace-nowrap">Inovações</button>
        <button data-target="goals" class="nav-link px-3 py-2 text-sm font-medium text-slate-300 hover:text-white rounded-md transition-colors whitespace-nowrap">Metas</button>
    </div>

    <!-- Right Controls -->
    <div class="flex items-center gap-3">
        <!-- User Profile Dropdown -->
        <div class="relative">
            <button id="user-menu-btn" class="flex items-center gap-2 p-1.5 rounded-full text-slate-400 hover:text-white hover:bg-white/5 transition-all outline-none">
                <div class="w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center border border-slate-600">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                </div>
            </button>
            <!-- Dropdown -->
            <div id="user-menu-dropdown" class="hidden absolute right-0 mt-2 w-56 glass-panel rounded-xl shadow-2xl py-1 z-50 animate-fade-in-down origin-top-right">
                 <div class="px-4 py-3 border-b border-slate-700 mb-1">
                    <p id="user-menu-name" class="text-sm font-bold text-white truncate">Usuário</p>
                    <p id="user-menu-role" class="text-xs text-slate-500 truncate uppercase mt-0.5">Função</p>
                </div>
                <button id="user-menu-wallet-btn" class="w-full text-left px-4 py-2.5 text-sm text-slate-300 hover:bg-white/5 hover:text-white transition-colors flex items-center gap-3">
                    <svg class="w-4 h-4 text-[#FF5E00]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>
                    Gestão de Carteira
                </button>
                <div class="border-t border-slate-700 my-1"></div>
                <button id="user-menu-logout-btn" class="w-full text-left px-4 py-2.5 text-sm text-red-400 hover:bg-white/5/50 hover:text-red-300 transition-colors flex items-center gap-3">
                     <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>
                    Sair
                </button>
            </div>
        </div>

        <!-- Admin Button -->
        <button id="open-admin-btn" class="p-2 text-slate-400 hover:text-white transition-colors rounded-full hover:bg-white/5" title="Admin Upload">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg>
        </button>
        
        <!-- Mobile Menu Toggle -->
        <button id="mobile-menu-toggle" class="lg:hidden p-2 text-slate-300 hover:text-white">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
        </button>
    </div>
</nav>

<!-- Mobile Menu Dropdown -->
<div id="mobile-menu" class="fixed top-16 left-0 w-full glass-panel border-b border-slate-700 z-40 hidden lg:hidden shadow-xl">
    <div class="grid grid-cols-2 gap-2 p-4">
        <button data-target="dashboard" class="mobile-nav-link p-3 rounded-lg glass-panel text-slate-300 text-sm font-medium text-center hover:bg-white/5">Visão Geral</button>
        <button data-target="comparativo" class="mobile-nav-link p-3 rounded-lg glass-panel text-slate-300 text-sm font-medium text-center hover:bg-white/5">Comparativo</button>
        <button data-target="cobertura" class="mobile-nav-link p-3 rounded-lg glass-panel text-slate-300 text-sm font-medium text-center hover:bg-white/5">Cobertura</button>
        <button data-target="cidades" class="mobile-nav-link p-3 rounded-lg glass-panel text-slate-300 text-sm font-medium text-center hover:bg-white/5">Geo Mapa</button>
        <button data-target="mix" class="mobile-nav-link p-3 rounded-lg glass-panel text-slate-300 text-sm font-medium text-center hover:bg-white/5">Mix</button>
        <button data-target="inovacoes-mes" class="mobile-nav-link p-3 rounded-lg glass-panel text-slate-300 text-sm font-medium text-center hover:bg-white/5">Inovações</button>
        <button data-target="goals" class="mobile-nav-link p-3 rounded-lg glass-panel text-slate-300 text-sm font-medium text-center hover:bg-white/5">Metas</button>
    </div>
</div>

<div id="content-wrapper" class="hidden min-h-screen pt-20 transition-all duration-300 flex flex-col">
    <div id="page-transition-loader" class="fixed inset-0 glass-panel/10 z-[9999] flex items-center justify-center hidden">
        <div class="flex flex-col items-center">
            <div class="spinner-orange w-12 h-12 border-4"></div>
            <span id="loader-text" class="text-white text-lg mt-4 font-medium">Carregando...</span>
        </div>
    </div>

    <!-- Floating Filters Button (Initially Hidden) -->
    <button id="floating-filters-toggle" class="hidden">
        <span class="text-lg leading-none mb-0.5">+</span>
        <span>Filtros</span>
    </button>

    <!-- MAIN DASHBOARD -->
    <div id="main-dashboard" class="animate-fade-in-up">
        <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-7xl">
            
            <!-- Hero Section (3D Banner) -->
            <div id="banner-container" class="mb-8">
                <div class="content-overlay">
                    <div class="brand-tag">PRIME DISTRIBUIÇÃO</div>
                    <h1 class="user-greeting" id="welcome-header">Olá!</h1>
                    <p class="sub-text">Perigosamente irresistível.</p>
                    <p class="meta-info">
                        <span class="dot"></span> <span id="last-update-text">Sistema Ativo • Sincronizando...</span>
                    </p>
                </div>
            </div>

            <!-- KPIs -->
            <div id="dashboard-kpi-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6 mb-8">
                <!-- 1. Faturamento -->
                <div class="kpi-card kpi-glow-green p-6 stagger-1">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">Faturamento</p>
                            <h3 id="total-vendas" class="text-3xl font-bold text-white">R$ 0,00</h3>
                            <p class="text-slate-500 text-xs mt-1">Valor Total</p>
                        </div>
                        <div class="p-2 bg-green-500/10 rounded-lg"><svg class="w-6 h-6 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div>
                    </div>
                </div>
                <!-- 2. Volume Total -->
                <div class="kpi-card kpi-glow-blue p-6 stagger-2">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">Volume Total</p>
                            <h3 id="total-peso" class="text-3xl font-bold text-white">0,0</h3>
                            <p class="text-slate-500 text-xs mt-1">Quilos (Kg)</p>
                        </div>
                        <div class="p-2 bg-blue-500/10 rounded-lg"><svg class="w-6 h-6 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div>
                    </div>
                </div>
                <!-- 3. Cobertura -->
                <div class="kpi-card kpi-glow-purple p-6 stagger-3">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">Cobertura</p>
                            <h3 id="kpi-positivacao" class="text-3xl font-bold text-white">0,0%</h3>
                            <p id="kpi-positivacao-percent" class="text-slate-500 text-xs mt-1">0 PDVs</p>
                        </div>
                        <div class="p-2 bg-purple-500/10 rounded-lg"><svg class="w-6 h-6 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div>
                    </div>
                </div>
                <!-- 4. SKU por PDV -->
                <div class="kpi-card kpi-glow-yellow p-6 stagger-4">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">SKU por PDV</p>
                            <h3 id="kpi-sku-pdv" class="text-3xl font-bold text-white">0,0</h3>
                            <p class="text-slate-500 text-xs mt-1">Média</p>
                        </div>
                        <div class="p-2 bg-yellow-500/10 rounded-lg"><svg class="w-6 h-6 text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg></div>
                    </div>
                </div>
            </div>

            <div class="mb-6 flex flex-col sm:flex-row justify-between items-center gap-4">
                <div id="fornecedor-toggle-container" class="w-full sm:w-auto bg-glass p-1 rounded-lg flex justify-center sm:justify-start gap-1 border border-slate-700/50">
                    <button data-fornecedor="PEPSICO" class="fornecedor-btn py-2 px-6 rounded-md transition-all text-sm">PEPSICO</button>
                    <button data-fornecedor="MULTIMARCAS" class="fornecedor-btn py-2 px-6 rounded-md transition-all text-sm">MULTIMARCAS</button>
                </div>
            </div>

            <!-- Filters -->
            <div class="filter-wrapper-sentinel">
            <div id="main-filters" class="sticky-filters mb-8 p-6 glass-filter-box rounded-2xl shadow-lg border border-slate-800/50">
                <div class="flex flex-wrap gap-4 items-end">
                    <!-- Rede Filter -->
                    <div id="main-rede-filter-wrapper" class="relative flex-1 min-w-[260px] z-20">
                        <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Rede</label>
                        <div id="main-rede-group-container" class="inline-flex rounded-lg shadow-sm w-full glass-panel p-1" role="group">
                            <button type="button" data-group="" class="group-btn active flex-1 py-2 px-3 text-xs font-bold rounded-md transition-all">Todos</button>
                            <button type="button" data-group="com_rede" id="main-com-rede-btn" class="group-btn flex-1 py-2 px-3 text-xs font-medium text-slate-400 hover:text-white rounded-md transition-all flex items-center justify-center gap-1">
                                <span id="main-com-rede-btn-text">C/Rede</span>
                                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                            </button>
                            <button type="button" data-group="sem_rede" class="group-btn flex-1 py-2 px-3 text-xs font-medium text-slate-400 hover:text-white rounded-md transition-all">S/Rede</button>
                        </div>
                        <div id="main-rede-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-2"></div>
                    </div>

                    <div id="main-coord-filter-wrapper" class="relative flex-1 min-w-[200px]">
                        <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Coordenador</label>
                        <button id="main-coord-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:ring-2 focus:ring-[#FF5E00] hover:bg-slate-750 transition-colors">
                            <span id="main-coord-filter-text">Todos</span>
                            <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div id="main-coord-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-2"></div>
                    </div>

                    <div id="main-cocoord-filter-wrapper" class="relative flex-1 min-w-[200px]">
                        <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Co-Coordenador</label>
                        <button id="main-cocoord-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:ring-2 focus:ring-[#FF5E00] hover:bg-slate-750 transition-colors">
                            <span id="main-cocoord-filter-text">Todos</span>
                            <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div id="main-cocoord-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-2"></div>
                    </div>

                    <div id="main-promotor-filter-wrapper" class="relative flex-1 min-w-[200px]">
                        <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Promotor</label>
                        <button id="main-promotor-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:ring-2 focus:ring-[#FF5E00] hover:bg-slate-750 transition-colors">
                            <span id="main-promotor-filter-text">Todos</span>
                            <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div id="main-promotor-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-2"></div>
                    </div>

                    <div class="flex-1 min-w-[200px]">
                        <button id="clear-filters-btn" class="w-full bg-slate-700 hover:bg-slate-600 text-white font-bold py-2.5 px-4 rounded-lg transition-colors border border-slate-600">Limpar Filtros</button>
                    </div>
                </div>
                
                <!-- Secondary Filters Row -->
                <div class="flex flex-wrap gap-4 items-end mt-4 pt-4 border-t border-slate-800/50">
                     <div class="relative flex-1 min-w-[200px]">
                        <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Tipo Venda</label>
                        <button id="tipo-venda-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:ring-2 focus:ring-[#FF5E00]">
                            <span id="tipo-venda-filter-text">Todos</span>
                            <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div id="tipo-venda-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-2"></div>
                    </div>
                    <div class="relative flex-1 min-w-[200px]">
                        <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Fornecedor</label>
                        <button id="fornecedor-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:ring-2 focus:ring-[#FF5E00]">
                            <span id="fornecedor-filter-text">Todos</span>
                            <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div id="fornecedor-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-2"></div>
                    </div>
                    <div class="flex-1 min-w-[200px] relative">
                        <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Cliente</label>
                        <div class="relative">
                            <div id="codcli-search-icon" class="absolute inset-y-0 left-0 pl-3 flex items-center cursor-pointer hover:text-white transition-colors group">
                                <svg class="w-4 h-4 text-slate-500 group-hover:text-white transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                            </div>
                            <input type="text" id="codcli-filter" placeholder="Código, Nome, CNPJ..." class="glass-input border border-slate-700 text-white text-sm rounded-lg focus:ring-2 focus:ring-[#FF5E00] block w-full pl-10 p-2.5 transition-all" autocomplete="off">
                            <div id="codcli-filter-suggestions" class="hidden absolute z-30 w-full mt-1 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-0 overflow-hidden"></div>
                        </div>
                    </div>
                    <div class="flex-1 min-w-[200px]">
                        <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Posição</label>
                        <select id="posicao-filter" class="glass-input border border-slate-700 text-white text-sm rounded-lg focus:ring-2 focus:ring-[#FF5E00] block w-full p-2.5">
                            <option value="">Todas</option>
                            <option value="L">Liberado</option>
                            <option value="M">Montado</option>
                            <option value="F">Faturado</option>
                        </select>
                    </div>
                </div>
            </div>
            </div>

            <main id="app-container">
                <div id="chartView">
                    <!-- Main Menu Buttons -->
                    <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
                        <button onclick="renderView('clientes')" class="glass-panel hover:bg-white/5 text-white font-bold py-6 px-6 rounded-xl transition-all flex flex-col items-center gap-3 group">
                            <div class="p-4 rounded-full bg-[#FF5E00]/10 group-hover:bg-[#CC4A00]/20 transition-colors">
                                <svg class="w-8 h-8 text-[#FF5E00]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                            </div>
                            <span class="text-sm uppercase tracking-wider font-semibold">Clientes</span>
                        </button>
                        <button onclick="renderView('produtos')" class="glass-panel hover:bg-white/5 text-white font-bold py-6 px-6 rounded-xl transition-all flex flex-col items-center gap-3 group">
                            <div class="p-4 rounded-full bg-green-500/10 group-hover:bg-green-500/20 transition-colors">
                                <svg class="w-8 h-8 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg>
                            </div>
                            <span class="text-sm uppercase tracking-wider font-semibold">Produtos</span>
                        </button>
                        <button onclick="renderView('meta-realizado')" class="glass-panel hover:bg-white/5 text-white font-bold py-6 px-6 rounded-xl transition-all flex flex-col items-center gap-3 group">
                            <div class="p-4 rounded-full bg-purple-500/10 group-hover:bg-purple-500/20 transition-colors">
                                <svg class="w-8 h-8 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
                            </div>
                            <span class="text-sm uppercase tracking-wider font-semibold">Objetivos</span>
                        </button>
                        <button onclick="renderView('consultas')" class="glass-panel hover:bg-white/5 text-white font-bold py-6 px-6 rounded-xl transition-all flex flex-col items-center gap-3 group">
                            <div class="p-4 rounded-full bg-yellow-500/10 group-hover:bg-yellow-500/20 transition-colors">
                                <svg class="w-8 h-8 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                            </div>
                            <span class="text-sm uppercase tracking-wider font-semibold">Consultas</span>
                        </button>
                    </div>


                    <!-- Secondary Charts -->
                    <div class="flex flex-col gap-8">
                        <div class="w-full glass-panel p-2 rounded-2xl border border-slate-800/50 shadow-lg">
                            <h2 id="sales-by-person-title" class="text-lg font-bold text-white mb-2 text-center">Performance por Supervisor</h2>
                            <div id="salesByPersonChartContainer" class="relative h-40"></div>
                        </div>
                        <div class="w-full glass-panel p-2 rounded-2xl border border-slate-800/50 shadow-lg">
                            <h2 id="faturamentoPorFornecedorTitle" class="text-lg font-bold text-white mb-6 text-center">Share por Categoria</h2>
                            <div id="faturamentoPorFornecedorChartContainer" class="relative h-80"></div>
                        </div>
                    </div>

                    <!-- Products Table (Variation) -->
                    <div class="mt-8 glass-panel p-6 rounded-2xl border border-slate-800/50 shadow-lg">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-xl font-bold text-white">Top Produtos</h2>
                            <div class="glass-panel p-1 rounded-lg flex border border-slate-700">
                                <button id="faturamentoBtn" class="metric-btn active px-4 py-1.5 text-xs font-bold rounded-md text-white transition-all">Valor</button>
                                <button id="pesoBtn" class="metric-btn px-4 py-1.5 text-xs font-bold rounded-md text-slate-400 hover:text-white transition-all">Peso</button>
                            </div>
                        </div>
                        <div id="top-products-variation-table" class="relative overflow-hidden rounded-xl border border-slate-800/50 glass-panel">
                            <div class="overflow-x-auto custom-scrollbar max-h-[500px]">
                                <table class="w-full text-left text-slate-300">
                                    <thead class="glass-panel/50 text-[10px] md:text-xs font-bold uppercase text-slate-500 sticky top-0 z-10 backdrop-blur-md hidden md:table-header-group">
                                        <tr>
                                            <th class="py-1 px-1 md:py-3 md:px-4 text-center w-8 md:w-12">#</th>
                                            <th class="py-1 px-1 md:py-3 md:px-4">Produto</th>
                                            <th class="py-1 px-1 md:py-3 md:px-4 w-1/4 md:w-1/3 text-center hidden md:table-cell">Performance</th>
                                            <th class="py-1 px-1 md:py-3 md:px-4 text-right">Var.</th>
                                        </tr>
                                    </thead>
                                    <tbody id="top-products-variation-table-body" class="divide-y divide-slate-800/50">
                                        <!-- Rows injected by JS -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

            </main>
        </div>
    </div>

    <!-- OTHER VIEWS (Initially Hidden) -->
    <!-- Note: Keeping structures similar but updating headers/classes -->
    
    <!-- POSITIVACAO VIEW -->
    <div id="positivacao-view" class="hidden animate-fade-in-up">
        <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-7xl">
            <header class="mb-8 border-b border-slate-800 pb-4">
                <h1 class="text-3xl font-bold text-white mb-1">Positivação de Clientes</h1>
                <p class="text-slate-400">Clientes com e sem venda no período</p>
            </header>

            <div id="positivacao-view-content">
                <div class="filter-wrapper-sentinel">
                <div class="sticky-filters mb-6 p-6 glass-filter-box rounded-2xl border border-slate-800/50 shadow-lg">
                     <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4 items-end">
                        <!-- Rede -->
                        <div id="positivacao-rede-filter-wrapper" class="relative lg:col-span-2 z-20">
                            <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Rede</label>
                            <div id="positivacao-rede-group-container" class="inline-flex rounded-lg glass-panel p-1 w-full">
                                <button type="button" data-group="" class="group-btn active flex-1 py-2 text-xs font-bold rounded-md">Todos</button>
                                <button type="button" data-group="com_rede" id="positivacao-com-rede-btn" class="group-btn flex-1 py-2 text-xs font-medium text-slate-400 hover:text-white rounded-md flex justify-center gap-1">
                                    <span id="positivacao-com-rede-btn-text">C/Rede</span>
                                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg>
                                </button>
                                <button type="button" data-group="sem_rede" class="group-btn flex-1 py-2 text-xs font-medium text-slate-400 hover:text-white rounded-md">S/Rede</button>
                            </div>
                            <div id="positivacao-rede-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-2"></div>
                        </div>

                        <!-- Coordenador -->
                        <div id="positivacao-coord-filter-wrapper" class="relative">
                            <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Coordenador</label>
                            <button id="positivacao-coord-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between">
                                <span id="positivacao-coord-filter-text">Todos</span>
                                <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg>
                            </button>
                            <div id="positivacao-coord-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-2"></div>
                        </div>

                        <!-- Co-Coordenador -->
                        <div id="positivacao-cocoord-filter-wrapper" class="relative">
                            <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Co-Coordenador</label>
                            <button id="positivacao-cocoord-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between">
                                <span id="positivacao-cocoord-filter-text">Todos</span>
                                <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg>
                            </button>
                            <div id="positivacao-cocoord-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-2"></div>
                        </div>

                        <!-- Promotor -->
                        <div id="positivacao-promotor-filter-wrapper" class="relative">
                            <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Promotor</label>
                            <button id="positivacao-promotor-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between">
                                <span id="positivacao-promotor-filter-text">Todos</span>
                                <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg>
                            </button>
                            <div id="positivacao-promotor-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-2"></div>
                        </div>

                        <!-- Cliente Input -->
                        <div id="positivacao-codcli-filter-wrapper" class="relative">
                            <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Cliente</label>
                            <div class="relative">
                                <div id="positivacao-codcli-search-icon" class="absolute inset-y-0 left-0 pl-3 flex items-center cursor-pointer hover:text-white transition-colors group">
                                    <svg class="w-4 h-4 text-slate-500 group-hover:text-white transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                                </div>
                                <input type="text" id="positivacao-codcli-filter" placeholder="Código, Nome, CNPJ..." class="glass-input border border-slate-700 text-white text-sm rounded-lg focus:ring-2 focus:ring-[#FF5E00] block w-full pl-10 p-2.5 transition-all" autocomplete="off">
                                <div id="positivacao-codcli-filter-suggestions" class="hidden absolute z-30 w-full mt-1 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-0 overflow-hidden"></div>
                            </div>
                        </div>

                        <!-- Clear -->
                        <div>
                            <button id="clear-positivacao-filters-btn" class="w-full bg-slate-700 hover:bg-slate-600 text-white font-bold py-2.5 px-4 rounded-lg transition-colors border border-slate-600">Limpar</button>
                        </div>
                     </div>
                     <!-- Hidden/Extra filters for logic preservation -->
                     <div class="hidden">
                        <button id="positivacao-supplier-filter-btn"></button><div id="positivacao-supplier-filter-dropdown"></div>
                        <button id="positivacao-tipo-venda-filter-btn"></button><div id="positivacao-tipo-venda-filter-dropdown"></div>
                     </div>
                </div>
                </div>

                <!-- Tables Container -->
                <div class="grid grid-cols-1 gap-8 mt-8">
                    <div class="glass-panel rounded-2xl border border-slate-800/50 shadow-lg overflow-hidden">
                        <div class="p-4 glass-panel border-b border-slate-800 flex justify-between items-center">
                            <h3 class="font-bold text-white">POSITIVADOS</h3>
                        </div>
                        <div class="overflow-x-auto custom-scrollbar max-h-96">
                            <table class="min-w-full text-sm text-left text-slate-300"><tbody id="positivacao-active-detail-table-body" class="divide-y divide-slate-800"></tbody></table>
                        </div>
                        <div id="positivacao-active-pagination" class="p-3 glass-panel border-t border-slate-800 flex justify-between items-center text-xs">
                            <button id="positivacao-active-prev-btn" class="glass-panel hover:bg-white/5 text-white font-bold py-1 px-3 rounded disabled:opacity-50 transition-colors">Ant</button>
                            <span id="positivacao-active-page-info" class="text-slate-400 font-medium"></span>
                            <button id="positivacao-active-next-btn" class="glass-panel hover:bg-white/5 text-white font-bold py-1 px-3 rounded disabled:opacity-50 transition-colors">Prox</button>
                        </div>
                    </div>
                    <div class="glass-panel rounded-2xl border border-slate-800/50 shadow-lg overflow-hidden">
                        <div class="p-4 glass-panel border-b border-slate-800 flex justify-between items-center">
                            <h3 class="font-bold text-white">Ñ POSITIVADOS</h3>
                        </div>
                        <div class="overflow-x-auto custom-scrollbar max-h-96">
                            <table class="min-w-full text-sm text-left text-slate-300"><tbody id="positivacao-inactive-detail-table-body" class="divide-y divide-slate-800"></tbody></table>
                        </div>
                        <div id="positivacao-inactive-pagination" class="p-3 glass-panel border-t border-slate-800 flex justify-between items-center text-xs">
                            <button id="positivacao-inactive-prev-btn" class="glass-panel hover:bg-white/5 text-white font-bold py-1 px-3 rounded disabled:opacity-50 transition-colors">Ant</button>
                            <span id="positivacao-inactive-page-info" class="text-slate-400 font-medium"></span>
                            <button id="positivacao-inactive-next-btn" class="glass-panel hover:bg-white/5 text-white font-bold py-1 px-3 rounded disabled:opacity-50 transition-colors">Prox</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- CITY VIEW -->
    <div id="city-view" class="hidden animate-fade-in-up">
        <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-7xl">
            <header class="mb-8 flex justify-between items-end border-b border-slate-800 pb-4">
                <div>
                    <h1 class="text-3xl font-bold text-white mb-1">Geolocalização</h1>
                    <p class="text-slate-400">Análise de vendas por território</p>
                </div>
                <button id="toggle-city-map-btn" class="bg-[#FF5E00] hover:bg-[#CC4A00] text-white font-bold py-2 px-6 rounded-full shadow-lg text-sm flex items-center gap-2 transition-transform hover:scale-105">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path></svg>
                    Alternar Mapa
                </button>
            </header>
            
            <div id="city-view-content">
                <!-- Filters (Restyling minimal needed as classes are utility based, but ensure containers match) -->
                <!-- Simplified filters block for brevity, ensuring ID matches -->
                <div class="filter-wrapper-sentinel">
                <div class="sticky-filters mb-6 p-6 glass-filter-box rounded-2xl border border-slate-800/50 shadow-lg">
                     <!-- ... Filters Content (Copied from original but wrapper IDs preserved) ... -->
                     <!-- To save tokens, I will trust the JS to populate the dropdowns/inputs if IDs match.
                          I need to make sure the structure is there. -->
                     <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4 items-end">
                        <!-- Rede -->
                        <div id="city-rede-filter-wrapper" class="relative lg:col-span-2 z-20">
                            <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Rede</label>
                            <div id="city-rede-group-container" class="inline-flex rounded-lg glass-panel p-1 w-full">
                                <button type="button" data-group="" class="group-btn active flex-1 py-2 text-xs font-bold rounded-md">Todos</button>
                                <button type="button" data-group="com_rede" id="city-com-rede-btn" class="group-btn flex-1 py-2 text-xs font-medium text-slate-400 hover:text-white rounded-md flex justify-center gap-1">
                                    <span id="city-com-rede-btn-text">C/Rede</span>
                                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg>
                                </button>
                                <button type="button" data-group="sem_rede" class="group-btn flex-1 py-2 text-xs font-medium text-slate-400 hover:text-white rounded-md">S/Rede</button>
                            </div>
                            <div id="city-rede-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-2"></div>
                        </div>
                        
                        <!-- Coordenador -->
                        <div id="city-coord-filter-wrapper" class="relative">
                            <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Coordenador</label>
                            <button id="city-coord-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between">
                                <span id="city-coord-filter-text">Todos</span>
                                <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg>
                            </button>
                            <div id="city-coord-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-2"></div>
                        </div>

                        <!-- Co-Coordenador -->
                        <div id="city-cocoord-filter-wrapper" class="relative">
                            <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Co-Coordenador</label>
                            <button id="city-cocoord-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between">
                                <span id="city-cocoord-filter-text">Todos</span>
                                <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg>
                            </button>
                            <div id="city-cocoord-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-2"></div>
                        </div>

                        <!-- Promotor -->
                        <div id="city-promotor-filter-wrapper" class="relative">
                            <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Promotor</label>
                            <button id="city-promotor-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between">
                                <span id="city-promotor-filter-text">Todos</span>
                                <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg>
                            </button>
                            <div id="city-promotor-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-2"></div>
                        </div>

                        <!-- Cliente Input -->
                        <div id="city-codcli-filter-wrapper" class="relative">
                            <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Cliente</label>
                            <div class="relative">
                                <div id="city-codcli-search-icon" class="absolute inset-y-0 left-0 pl-3 flex items-center cursor-pointer hover:text-white transition-colors group">
                                    <svg class="w-4 h-4 text-slate-500 group-hover:text-white transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                                </div>
                                <input type="text" id="city-codcli-filter" placeholder="Código, Nome, CNPJ..." class="glass-input border border-slate-700 text-white text-sm rounded-lg focus:ring-2 focus:ring-[#FF5E00] block w-full pl-10 p-2.5 transition-all" autocomplete="off">
                                <div id="city-codcli-filter-suggestions" class="hidden absolute z-30 w-full mt-1 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-0 overflow-hidden"></div>
                            </div>
                        </div>

                        <!-- Clear -->
                        <div>
                            <button id="clear-city-filters-btn" class="w-full bg-slate-700 hover:bg-slate-600 text-white font-bold py-2.5 px-4 rounded-lg transition-colors border border-slate-600">Limpar</button>
                        </div>
                     </div>
                     <!-- Hidden/Extra filters for logic preservation -->
                     <div class="hidden">
                        <button id="city-supplier-filter-btn"></button><div id="city-supplier-filter-dropdown"></div>
                        <button id="city-tipo-venda-filter-btn"></button><div id="city-tipo-venda-filter-dropdown"></div>
                     </div>
                </div>
                </div>

                <div id="city-map-container" class="hidden glass-panel p-1 rounded-2xl shadow-lg border border-slate-800 h-[600px] relative z-0 mb-8">
                    <div id="leaflet-map" class="w-full h-full rounded-xl z-0"></div>
                    <div id="map-loading-overlay" class="absolute inset-0 bg-black/50 backdrop-blur-sm flex flex-col items-center justify-center rounded-xl hidden z-[1000]">
                        <div class="spinner-orange mb-4"></div>
                        <div class="text-white font-bold animate-pulse">Carregando mapa...</div>
                    </div>
                </div>

                <div class="grid grid-cols-1 xl:grid-cols-2 gap-8">
                    <div class="glass-panel p-2 rounded-2xl border border-slate-800/50 shadow-lg">
                        <div class="flex justify-between items-center mb-6">
                            <h2 id="city-chart-title" class="text-lg font-bold text-white">Top Cidades</h2>
                            <div class="text-right">
                                <p class="text-xs text-slate-500 uppercase font-bold">Total Vendido</p>
                                <p id="total-faturamento-cidade" class="text-2xl font-bold text-green-400">R$ 0,00</p>
                            </div>
                        </div>
                        <div id="salesByClientInCityChartContainer" class="relative h-96"></div>
                    </div>
                    <div class="glass-panel p-2 rounded-2xl border border-slate-800/50 shadow-lg">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-lg font-bold text-white">Status da Carteira</h2>
                            <div class="text-right">
                                <p class="text-xs text-slate-500 uppercase font-bold">Total Clientes</p>
                                <p id="total-clientes-cidade" class="text-2xl font-bold text-blue-400">0</p>
                            </div>
                        </div>
                        <div id="customerStatusChartContainer" class="relative h-96"></div>
                    </div>
                </div>

            </div>
        </div>
    </div>


    <!-- WEEKLY VIEW REMOVED -->
    <!-- COMPARISON VIEW -->

    <!-- COMPARISON VIEW -->
    <div id="comparison-view" class="hidden container mx-auto p-4 sm:p-6 lg:p-8 max-w-7xl animate-fade-in-up">
        <header class="mb-8 border-b border-slate-800 pb-4"><h1 class="text-3xl font-bold text-white">Comparativo Mensal</h1></header>
        <!-- Retaining IDs for JS logic: comparison-rede-group-container, comparison-com-rede-btn, etc. -->
        <!-- Simplified block for structure -->
        <div class="filter-wrapper-sentinel">
        <div class="sticky-filters mb-6 p-6 glass-filter-box rounded-2xl border border-slate-800/50 shadow-lg">
            <div id="comparison-fornecedor-toggle-container" class="flex justify-center gap-4 mb-6">
                <button data-fornecedor="PEPSICO" class="fornecedor-btn active px-6 py-2 rounded-lg transition-all">PEPSICO</button>
                <button data-fornecedor="MULTIMARCAS" class="fornecedor-btn px-6 py-2 rounded-lg transition-all">MULTIMARCAS</button>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 items-end">
                <!-- Rede Filter -->
                <div id="comparison-rede-filter-wrapper" class="relative z-20">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Rede</label>
                    <div id="comparison-rede-group-container" class="inline-flex rounded-lg shadow-sm w-full glass-panel p-1" role="group">
                        <button type="button" data-group="" class="group-btn active flex-1 py-2 px-3 text-xs font-bold rounded-md transition-all">Todos</button>
                        <button type="button" data-group="com_rede" id="comparison-com-rede-btn" class="group-btn flex-1 py-2 px-3 text-xs font-medium text-slate-400 hover:text-white rounded-md transition-all flex items-center justify-center gap-1">
                            <span id="comparison-com-rede-btn-text">C/Rede</span>
                            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <button type="button" data-group="sem_rede" class="group-btn flex-1 py-2 px-3 text-xs font-medium text-slate-400 hover:text-white rounded-md transition-all">S/Rede</button>
                    </div>
                    <div id="comparison-rede-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-2"></div>
                </div>

                <!-- Coordenador -->
                <div id="comparison-coord-filter-wrapper" class="relative">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Coordenador</label>
                    <button id="comparison-coord-filter-btn" class="w-full glass-panel p-2.5 rounded-lg text-slate-300 text-sm flex justify-between items-center focus:ring-2 focus:ring-[#FF5E00] hover:bg-slate-750 transition-colors"><span id="comparison-coord-filter-text">Todos</span><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>
                    <div id="comparison-coord-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                </div>
                <!-- Co-Coordenador -->
                <div id="comparison-cocoord-filter-wrapper" class="relative">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Co-Coordenador</label>
                    <button id="comparison-cocoord-filter-btn" class="w-full glass-panel p-2.5 rounded-lg text-slate-300 text-sm flex justify-between items-center focus:ring-2 focus:ring-[#FF5E00] hover:bg-slate-750 transition-colors"><span id="comparison-cocoord-filter-text">Todos</span><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>
                    <div id="comparison-cocoord-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                </div>
                <!-- Promotor -->
                <div id="comparison-promotor-filter-wrapper" class="relative">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Promotor</label>
                    <button id="comparison-promotor-filter-btn" class="w-full glass-panel p-2.5 rounded-lg text-slate-300 text-sm flex justify-between items-center focus:ring-2 focus:ring-[#FF5E00] hover:bg-slate-750 transition-colors"><span id="comparison-promotor-filter-text">Todos</span><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>
                    <div id="comparison-promotor-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                </div>

                <!-- City -->
                <div class="relative">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Cidade</label>
                    <input id="comparison-city-filter" class="w-full glass-input border border-slate-700 p-2.5 rounded-lg text-white text-sm focus:ring-2 focus:ring-[#FF5E00]" placeholder="Buscar...">
                    <div id="comparison-city-suggestions" class="hidden absolute z-30 w-full mt-1 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-2"></div>
                </div>
            </div>

            <!-- Second Row Filters -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mt-4 items-end">
                <!-- Fornecedor -->
                <div class="relative">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Fornecedor</label>
                    <button id="comparison-supplier-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:ring-2 focus:ring-[#FF5E00] hover:bg-slate-750 transition-colors">
                        <span id="comparison-supplier-filter-text">Todos</span>
                        <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div id="comparison-supplier-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-2"></div>
                </div>

                <!-- Tipo Venda -->
                <div class="relative">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Tipo Venda</label>
                    <button id="comparison-tipo-venda-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:ring-2 focus:ring-[#FF5E00] hover:bg-slate-750 transition-colors">
                        <span id="comparison-tipo-venda-filter-text">Todos</span>
                        <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div id="comparison-tipo-venda-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-2"></div>
                </div>

                <!-- Filial -->
                <div class="relative">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Filial</label>
                    <select id="comparison-filial-filter" class="glass-input border border-slate-700 text-white text-sm rounded-lg focus:ring-2 focus:ring-[#FF5E00] block w-full p-2.5">
                        <option value="ambas">Ambas</option>
                        <option value="05">05</option>
                        <option value="08">08</option>
                    </select>
                </div>

                <!-- Product -->
                <div class="relative lg:col-span-2">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Produto</label>
                    <button id="comparison-product-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:ring-2 focus:ring-[#FF5E00] hover:bg-slate-750 transition-colors">
                        <span id="comparison-product-filter-text">Todos</span>
                        <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div id="comparison-product-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2 max-h-60 overflow-y-auto custom-scrollbar">
                        <input type="text" id="comparison-product-search-input" class="w-full bg-slate-700 border border-slate-600 text-white text-sm rounded-lg p-2 mb-2" placeholder="Buscar produto...">
                        <div id="comparison-product-list" class="space-y-1"></div>
                    </div>
                </div>
            </div>
            
            <div class="flex justify-end gap-2 mt-6 border-t border-slate-700/50 pt-4">
                <button id="comparison-tendency-toggle" class="bg-purple-600 hover:bg-purple-500 text-white font-bold py-2.5 px-4 rounded-lg transition-colors">Calcular Tendência</button>
                <button id="comparison-holiday-picker-btn" class="bg-slate-700 hover:bg-slate-600 text-white font-medium py-2.5 px-4 rounded-lg transition-colors">Feriados</button>
                <button id="clear-comparison-filters-btn" class="bg-slate-700 hover:bg-slate-600 text-white font-medium py-2.5 px-4 rounded-lg transition-colors">Limpar</button>
            </div>
        </div>
        </div>

        <div id="comparison-kpi-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8"></div>

        <div class="glass-panel p-6 rounded-2xl border border-slate-800/50 shadow-lg mb-8">
            <div class="flex justify-between items-center mb-6">
                <h2 id="comparison-chart-title" class="text-xl font-bold text-white">Comparativo Semanal</h2>
                <div id="comparison-chart-toggle" class="glass-panel p-1 rounded-lg">
                    <button id="toggle-daily-btn" class="comparison-toggle-btn px-3 py-1 text-sm text-slate-400 rounded">Diário</button>
                    <button id="toggle-weekly-btn" class="comparison-toggle-btn active px-3 py-1 text-sm text-white bg-[#FF5E00] rounded">Semanal</button>
                    <button id="toggle-monthly-btn" class="comparison-toggle-btn px-3 py-1 text-sm text-slate-400 rounded">Mensal</button>
                </div>
            </div>
            <!-- Metrics toggles hidden in layout but needed for JS -->
            <div id="comparison-monthly-metric-container" class="hidden"><button id="toggle-monthly-fat-btn"></button><button id="toggle-monthly-clients-btn"></button></div>
            
            <div id="weeklyComparisonChartContainer" class="relative h-96"></div>
            <div id="monthlyComparisonChartContainer" class="relative h-96 hidden"></div>
        </div>
        
        <div class="glass-panel p-6 rounded-2xl border border-slate-800/50 shadow-lg mb-8">
            <h2 class="text-lg font-bold text-white mb-4 text-center">Resumo Semanal</h2>
            <div class="overflow-x-auto custom-scrollbar">
                <table class="min-w-full text-sm text-left text-slate-300">
                     <thead class="text-[10px] md:text-xs text-slate-400 uppercase glass-panel">
                        <tr>
                            <th class="px-2 py-2 md:px-4 md:py-3">Período</th>
                            <th class="px-2 py-2 md:px-4 md:py-3 text-right">Fat.</th>
                        </tr>
                    </thead>
                    <tbody id="weeklySummaryTableBody" class="divide-y divide-slate-800"></tbody>
                </table>
            </div>
        </div>

        <div class="glass-panel p-2 rounded-2xl border border-slate-800/50 shadow-lg">
            <h2 class="text-lg font-bold text-white mb-4">Variação por Supervisor</h2>
            <div class="overflow-x-auto custom-scrollbar">
                <table class="min-w-full text-sm text-left text-slate-300"><tbody id="supervisorComparisonTableBody" class="divide-y divide-slate-800"></tbody></table>
            </div>
        </div>
    </div>


                        <!-- Ecrã Metas (Goals) -->
                        <div id="goals-view" class="hidden container mx-auto p-4 sm:p-6 lg:p-8">
                            <!-- Header with Title and Tabs -->
                            <header class="mb-6 -mt-4 -mx-4 sm:-mt-6 sm:-mx-6 lg:-mt-8 lg:-mx-8 p-6 glass-panel-heavy rounded-b-lg shadow-lg">
                                <div class="flex flex-col xl:flex-row justify-between items-start xl:items-center gap-4">
                                    <div class="flex items-center gap-4">
                                        <button class="sidebar-toggle text-white focus:outline-none">
                                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                                        </button>
                                        <div>
                                            <h1 class="text-2xl font-bold text-white">PAINEL DE VENDAS - <span class="text-yellow-300">PRIME</span> DISTRIBUIÇÃO</h1>
                                            <p class="text-slate-300">Planejamento de Metas (GV & SV)</p>
                                        </div>
                                    </div>
                                    <!-- Top Right Tabs -->

    <button id="save-goals-btn" class="ml-4 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4" />
        </svg>
        Salvar Metas
    </button>
    <button id="clear-goals-btn" class="ml-4 bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
        </svg>
        Limpar Metas
    </button>
<div class="flex glass-panel p-1 rounded-lg border border-slate-700" id="goals-tabs">
                                        <button data-tab="gv" class="px-6 py-2 rounded-md text-sm font-bold transition-colors bg-slate-700 text-white shadow-sm border border-teal-500 text-teal-500 active" id="btn-tab-gv">Rateio Metas</button>
                                        <button data-tab="sv" class="px-6 py-2 rounded-md text-sm font-bold text-slate-400 hover:text-white transition-colors border border-transparent" id="btn-tab-sv">Relatório</button>
                                    </div>
                                </div>
                            </header>

                            <!-- Tab Content: Sugestão GV -->
                            <div id="goals-gv-content">
                                <!-- Category Selection Toggles -->
                                <div class="flex flex-col gap-4 mb-6">
                                    <div class="flex gap-4">
                                        <button id="goals-category-pepsico-btn" class="px-8 py-3 bg-[#0d9488] text-white font-bold rounded hover:bg-teal-700 transition-colors uppercase tracking-wider text-sm shadow-lg border border-teal-500/50">PEPSICO</button>
                                        <button id="goals-category-elmachips-btn" class="px-8 py-3 bg-[#334155] text-slate-400 font-bold rounded hover:bg-white/5 transition-colors uppercase tracking-wider text-sm border border-slate-700">ELMA CHIPS</button>
                                        <button id="goals-category-foods-btn" class="px-8 py-3 bg-[#334155] text-slate-400 font-bold rounded hover:bg-white/5 transition-colors uppercase tracking-wider text-sm border border-slate-700">FOODS</button>
                                         <button id="goals-category-summary-btn" class="px-8 py-3 bg-[#334155] text-slate-400 font-bold rounded hover:bg-white/5 transition-colors uppercase tracking-wider text-sm border border-slate-700">RESUMO</button>
                                    </div>

                                    <!-- Sub-tabs Container -->
                                    <div id="goals-sub-tabs-container">
                                        <!-- PEPSICO Sub-tabs -->
                                        <div class="flex border-b border-slate-700 overflow-x-auto" id="goals-sub-tabs-pepsico">
                                            <button data-supplier="PEPSICO_ALL" class="goals-sub-tab px-6 py-3 text-teal-400 font-bold text-sm border-b-2 border-teal-400 flex items-center gap-2 whitespace-nowrap active">
                                                <span class="w-2 h-2 rounded-full bg-teal-400 inline-block indicator"></span> PEPSICO
                                            </button>
                                        </div>

                                        <!-- Elma Chips Sub-tabs -->
                                        <div class="hidden flex border-b border-slate-700 overflow-x-auto" id="goals-sub-tabs-elmachips">
                                            <button data-supplier="ELMA_ALL" class="goals-sub-tab px-6 py-3 text-slate-400 font-medium text-sm hover:text-white transition-colors whitespace-nowrap">
                                                ELMA
                                            </button>
                                            <button data-supplier="707" class="goals-sub-tab px-6 py-3 text-slate-400 font-medium text-sm hover:text-white transition-colors whitespace-nowrap">EXTRUSADOS</button>
                                            <button data-supplier="708" class="goals-sub-tab px-6 py-3 text-slate-400 font-medium text-sm hover:text-white transition-colors whitespace-nowrap">NÃO EXTRUSADOS</button>
                                            <button data-supplier="752" class="goals-sub-tab px-6 py-3 text-slate-400 font-medium text-sm hover:text-white transition-colors whitespace-nowrap">TORCIDA</button>
                                        </div>

                                        <!-- Foods Sub-tabs -->
                                        <div class="hidden flex border-b border-slate-700 overflow-x-auto" id="goals-sub-tabs-foods">
                                            <button data-supplier="FOODS_ALL" class="goals-sub-tab px-6 py-3 text-slate-400 font-medium text-sm hover:text-white transition-colors whitespace-nowrap">FOODS</button>
                                            <button data-supplier="1119" data-brand="TODDYNHO" class="goals-sub-tab px-6 py-3 text-slate-400 font-medium text-sm hover:text-white transition-colors whitespace-nowrap">TODDYNHO</button>
                                            <button data-supplier="1119" data-brand="TODDY" class="goals-sub-tab px-6 py-3 text-slate-400 font-medium text-sm hover:text-white transition-colors whitespace-nowrap">TODDY</button>
                                            <button data-supplier="1119" data-brand="QUAKER_KEROCOCO" class="goals-sub-tab px-6 py-3 text-slate-400 font-medium text-sm hover:text-white transition-colors whitespace-nowrap">QUAKER / KEROCOCO</button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Summary Content -->
                                <div id="goals-summary-content" class="hidden mb-6">
                                    <!-- Independent Filters for Summary -->
                                    <div class="mb-4 p-4 glass-panel rounded-lg shadow-sm border border-slate-700 flex flex-col lg:flex-row justify-between items-center gap-4">
                                        <div class="flex flex-col sm:flex-row gap-4 w-full lg:w-auto items-end">
                                            <div id="goals-summary-supervisor-filter-wrapper" class="relative w-full sm:w-64">
                                                <label for="goals-summary-supervisor-filter-btn" class="block mb-2 text-sm font-medium text-slate-400">Supervisor</label>
                                                <button id="goals-summary-supervisor-filter-btn" class="w-full bg-slate-700 border border-slate-600 text-white text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-teal-500">
                                                    <span id="goals-summary-supervisor-filter-text">Todos</span>
                                                    <svg class="w-4 h-4 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg>
                                                </button>
                                                <div id="goals-summary-supervisor-filter-dropdown" class="hidden absolute z-50 w-full mt-1 glass-panel rounded-lg shadow-lg max-h-60 overflow-y-auto custom-scrollbar text-white"></div>
                                            </div>
                                            <div id="goals-summary-seller-filter-wrapper" class="relative w-full sm:w-64">
                                                <label for="goals-summary-seller-filter-btn" class="block mb-2 text-sm font-medium text-slate-400">Vendedor</label>
                                                <button id="goals-summary-seller-filter-btn" class="w-full bg-slate-700 border border-slate-600 text-white text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-teal-500">
                                                    <span id="goals-summary-seller-filter-text">Todos</span>
                                                    <svg class="w-4 h-4 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg>
                                                </button>
                                                <div id="goals-summary-seller-filter-dropdown" class="hidden absolute z-50 w-full mt-1 glass-panel rounded-lg shadow-lg max-h-60 overflow-y-auto custom-scrollbar text-white"></div>
                                            </div>
                                            <button id="clear-goals-summary-filters-btn" class="w-full sm:w-auto bg-slate-600 hover:bg-slate-500 text-white font-bold py-2.5 px-4 rounded-lg">Limpar Filtros</button>
                                        </div>

                                        <!-- Totals Summary -->
                                        <div class="flex flex-wrap lg:flex-nowrap gap-4 glass-panel p-3 rounded-lg border border-slate-700/50 w-full lg:w-auto justify-end">
                                            <div class="text-right px-2">
                                                <p class="text-[10px] uppercase text-slate-300 font-bold mb-1">Total Meta Fat.</p>
                                                <p class="text-xl font-bold text-teal-400" id="summary-total-fat">R$ 0,00</p>
                                            </div>
                                            <div class="text-right px-2 border-l border-slate-700">
                                                <p class="text-[10px] uppercase text-slate-300 font-bold mb-1">Total Meta Kg</p>
                                                <p class="text-xl font-bold text-orange-400" id="summary-total-vol">0,000</p>
                                            </div>
                                            <div class="text-right px-2 border-l border-slate-700">
                                                <p class="text-[10px] uppercase text-slate-300 font-bold mb-1">Total Meta Pos.</p>
                                                <p class="text-xl font-bold text-purple-400" id="summary-total-pos">0</p>
                                            </div>
                                            <div class="text-right px-2 border-l border-slate-700">
                                                <p class="text-[10px] uppercase text-slate-300 font-bold mb-1">Meta Mix Salty</p>
                                                <p class="text-xl font-bold text-teal-400" id="summary-mix-salty">0</p>
                                            </div>
                                            <div class="text-right px-2 border-l border-slate-700">
                                                <p class="text-[10px] uppercase text-slate-300 font-bold mb-1">Meta Mix Foods</p>
                                                <p class="text-xl font-bold text-yellow-400" id="summary-mix-foods">0</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="goals-summary-grid">
                                        <!-- Summary Cards will be injected here -->
                                    </div>
                                </div>

                                <!-- Meta Input Cards -->
                                <div id="goals-input-cards" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 glass-panel p-4 rounded-lg border border-slate-700/50">
                                    <!-- Faturamento Card -->
                                    <div class="bg-[#064e3b] kpi-glow-base kpi-glow-green rounded-lg p-3 relative overflow-hidden group shadow-md">
                                        <label class="text-[10px] font-bold text-green-300 uppercase tracking-wider mb-1 block">META FATURAMENTO (R$)</label>
                                        <div class="flex gap-2">
                                            <input type="text" id="goal-global-fat" class="w-full glass-panel border border-green-900/50 text-white font-bold text-lg p-2 rounded focus:outline-none focus:border-green-500" value="0,00">
                                            <button id="btn-distribute-fat" class="bg-green-600 hover:bg-green-500 text-white px-3 rounded flex items-center justify-center transition-colors">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
                                            </button>
                                        </div>
                                        <div class="flex justify-between text-[10px] text-slate-300 mt-1">
                                            <span>Média Trim: <span id="ref-avg-fat" class="text-white font-bold">R$ 0,00</span></span>
                                            <span>Mês Ant: <span id="ref-prev-fat" class="text-white font-bold">R$ 0,00</span></span>
                                        </div>
                                    </div>
                                    <!-- Volume Card -->
                                    <div class="bg-[#1e2a5a] kpi-glow-base kpi-glow-blue rounded-lg p-3 relative overflow-hidden group shadow-md">
                                        <label class="text-[10px] font-bold text-blue-300 uppercase tracking-wider mb-1 block">META VOLUME (KG)</label>
                                        <div class="flex gap-2">
                                            <input type="text" id="goal-global-vol" class="w-full glass-panel border border-blue-900/50 text-white font-bold text-lg p-2 rounded focus:outline-none focus:border-blue-500" value="0,000">
                                            <button id="btn-distribute-vol" class="bg-[#FF5E00] hover:bg-[#CC4A00] text-white px-3 rounded flex items-center justify-center transition-colors">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
                                            </button>
                                        </div>
                                        <div class="flex justify-between text-[10px] text-slate-300 mt-1">
                                            <span>Média Trim: <span id="ref-avg-vol" class="text-white font-bold">0,000</span></span>
                                            <span>Mês Ant: <span id="ref-prev-vol" class="text-white font-bold">0,000</span></span>
                                        </div>
                                    </div>
                                    <!-- Positivação Card -->
                                    <div class="bg-[#3b0764] kpi-glow-base kpi-glow-purple rounded-lg p-3 relative overflow-hidden group shadow-md">
                                        <label class="text-[10px] font-bold text-purple-300 uppercase tracking-wider mb-1 block">META POSITIVAÇÃO</label>
                                        <div class="flex gap-2">
                                            <input type="text" id="goal-global-mix" class="w-full glass-panel border border-purple-900/50 text-white font-bold text-lg p-2 rounded focus:outline-none focus:border-purple-500" value="0" readonly>
                                            <button id="btn-distribute-mix" class="bg-purple-600 hover:bg-purple-500 text-white px-3 rounded flex items-center justify-center transition-colors" style="display: none;">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
                                            </button>
                                        </div>
                                        <div class="flex justify-between text-[10px] text-slate-300 mt-1">
                                            <span>Média Trim: <span id="ref-avg-clients" class="text-white font-bold">0</span></span>
                                            <span>Mês Ant: <span id="ref-prev-clients" class="text-white font-bold">0</span></span>
                                        </div>
                                    </div>
                                    <!-- Mix Salty Card (Hidden by Default) -->
                                    <div id="card-mix-salty" class="hidden bg-[#064e3b] kpi-glow-base kpi-glow-green rounded-lg p-3 relative overflow-hidden group shadow-md">
                                        <label class="text-[10px] font-bold text-emerald-300 uppercase tracking-wider mb-1 block">META MIX SALTY</label>
                                        <div class="flex gap-2">
                                            <input type="text" id="goal-global-mix-salty" class="w-full glass-panel border border-emerald-900/50 text-white font-bold text-lg p-2 rounded focus:outline-none focus:border-emerald-500" value="0" readonly>
                                            <button id="btn-distribute-mix-salty" class="bg-emerald-600 hover:bg-emerald-500 text-white px-3 rounded flex items-center justify-center transition-colors" style="display: none;">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
                                            </button>
                                        </div>
                                        <div class="flex justify-between text-[10px] text-slate-300 mt-1">
                                            <span>50% Ativos</span>
                                        </div>
                                    </div>
                                    <!-- Mix Foods Card (Hidden by Default) -->
                                    <div id="card-mix-foods" class="hidden bg-[#713f12] kpi-glow-base kpi-glow-yellow rounded-lg p-3 relative overflow-hidden group shadow-md">
                                        <label class="text-[10px] font-bold text-yellow-300 uppercase tracking-wider mb-1 block">META MIX FOODS</label>
                                        <div class="flex gap-2">
                                            <input type="text" id="goal-global-mix-foods" class="w-full glass-panel border border-yellow-900/50 text-white font-bold text-lg p-2 rounded focus:outline-none focus:border-yellow-500" value="0" readonly>
                                            <button id="btn-distribute-mix-foods" class="bg-yellow-600 hover:bg-yellow-500 text-white px-3 rounded flex items-center justify-center transition-colors" style="display: none;">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
                                            </button>
                                        </div>
                                        <div class="flex justify-between text-[10px] text-slate-300 mt-1">
                                            <span>30% Ativos</span>
                                        </div>
                                    </div>

                                    <!-- Summary -->
                                    <div id="goals-dist-summary" class="flex flex-col justify-center items-end text-right pr-4">
                                        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">TOTAL RATEADO</p>
                                        <p class="text-2xl font-bold text-green-400">100% Distribuído</p>
                                    </div>
                                </div>

                                <!-- Filters -->
                                <div class="mb-4 p-4 glass-panel rounded-lg shadow-sm border border-slate-700">
                                    <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 items-end">
                                        <div id="goals-gv-supervisor-filter-wrapper" class="relative">
                                            <label for="goals-gv-supervisor-filter-btn" class="block mb-2 text-sm font-medium text-slate-400">Supervisor</label>
                                            <button id="goals-gv-supervisor-filter-btn" class="w-full bg-slate-700 border border-slate-600 text-white text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-teal-500">
                                                <span id="goals-gv-supervisor-filter-text">Todos</span>
                                                <svg class="w-4 h-4 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg>
                                            </button>
                                            <div id="goals-gv-supervisor-filter-dropdown" class="hidden absolute z-50 w-full mt-1 glass-panel rounded-lg shadow-lg max-h-60 overflow-y-auto custom-scrollbar text-white"></div>
                                        </div>
                                        <div id="goals-gv-seller-filter-wrapper" class="relative">
                                            <label for="goals-gv-seller-filter-btn" class="block mb-2 text-sm font-medium text-slate-400">Vendedor</label>
                                            <button id="goals-gv-seller-filter-btn" class="w-full bg-slate-700 border border-slate-600 text-white text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-teal-500">
                                                <span id="goals-gv-seller-filter-text">Todos</span>
                                                <svg class="w-4 h-4 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg>
                                            </button>
                                            <div id="goals-gv-seller-filter-dropdown" class="hidden absolute z-50 w-full mt-1 glass-panel rounded-lg shadow-lg max-h-60 overflow-y-auto custom-scrollbar text-white"></div>
                                        </div>
                                        <div id="goals-gv-codcli-filter-wrapper">
                                            <label for="goals-gv-codcli-filter" class="block mb-2 text-sm font-medium text-slate-400">Cód. Cliente</label>
                                            <input type="text" id="goals-gv-codcli-filter" name="goals_client_search_v2" placeholder="Digite o código..." class="bg-slate-700 border border-slate-600 text-white text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 block w-full p-2.5" autocomplete="off">
                                        </div>
                                        <button id="clear-goals-gv-filters-btn" class="w-full bg-slate-600 hover:bg-slate-500 text-white font-bold py-2.5 px-4 rounded-lg">Limpar Filtros</button>
                                    </div>
                                </div>

                                <!-- Main Table -->
                                <div id="goals-table-container" class="glass-panel border border-slate-700 shadow-sm rounded-lg overflow-hidden">
                                    <div class="overflow-auto custom-scrollbar" style="max-height: 60vh;">
                                        <table class="min-w-full text-sm text-left text-slate-300 border-collapse">
                                            <thead class="text-xs uppercase sticky top-0 z-20 glass-panel text-slate-400">
                                                <tr>
                                                    <th rowspan="2" class="px-2 py-2 text-center w-16 border-r border-b border-slate-700">CÓD</th>
                                                    <th rowspan="2" class="px-3 py-2 text-left w-48 border-r border-b border-slate-700">CLIENTE</th>
                                                    <th rowspan="2" class="px-3 py-2 text-left w-24 border-r border-b border-slate-700">VENDEDOR</th>
                                                    <th colspan="3" class="px-2 py-1 text-center bg-blue-900/30 text-blue-400 border-r border-slate-700 border-b-0">FATURAMENTO (R$)</th>
                                                    <th colspan="3" class="px-2 py-1 text-center bg-orange-900/30 text-orange-400 border-r border-slate-700 border-b-0">VOLUME (KG)</th>
                                                    <th rowspan="2" class="px-2 py-2 text-center w-16 bg-purple-900/20 text-purple-300 font-bold border-b border-slate-700">META POS.</th>
                                                </tr>
                                                <tr>
                                                    <!-- Fat Headers -->
                                                    <th class="px-2 py-2 text-right w-24 bg-blue-900/20 text-blue-300 border-r border-b border-slate-700/50 text-[10px]">MÉDIA</th>
                                                    <th class="px-2 py-2 text-center w-16 bg-blue-900/20 text-blue-300 border-r border-b border-slate-700/50 text-[10px]">% SHARE</th>
                                                    <th class="px-2 py-2 text-right w-24 bg-blue-900/20 text-blue-100 font-bold border-r border-b border-slate-700 text-[10px]">META AUTO</th>
                                                    <!-- Vol Headers -->
                                                    <th class="px-2 py-2 text-right w-24 bg-orange-900/20 text-orange-300 border-r border-b border-slate-700/50 text-[10px]">MÉDIA KG</th>
                                                    <th class="px-2 py-2 text-center w-16 bg-orange-900/20 text-orange-300 border-r border-b border-slate-700/50 text-[10px]">% SHARE</th>
                                                    <th class="px-2 py-2 text-right w-24 bg-orange-900/20 text-orange-100 font-bold border-r border-b border-slate-700 text-[10px]">META KG</th>
                                                </tr>
                                            </thead>
                                            <tbody id="goals-gv-table-body" class="divide-y divide-slate-800 bg-glass">
                                                <!-- Rows will be populated by JS -->
                                            </tbody>
                                        </table>
                                    </div>
                                    <!-- Pagination Controls -->
                                    <div id="goals-pagination-controls" class="hidden flex justify-between items-center p-4 glass-panel border-t border-slate-700">
                                        <div class="flex gap-2">
                                            <button id="goals-gv-export-pdf-btn" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg text-xs flex items-center gap-2">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                                                PDF
                                            </button>
                                            <button id="goals-gv-export-xlsx-btn" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg text-xs flex items-center gap-2">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                                                XLS
                                            </button>
                                        </div>
                                        <div class="flex items-center gap-4">
                                            <button id="goals-prev-page-btn" class="bg-slate-700 border border-slate-600 hover:bg-slate-600 text-slate-300 font-bold py-2 px-4 rounded-lg disabled:opacity-50 text-xs" disabled>Anterior</button>
                                            <span id="goals-page-info-text" class="text-slate-400 text-xs">Página 1 de 1</span>
                                            <button id="goals-next-page-btn" class="bg-slate-700 border border-slate-600 hover:bg-slate-600 text-slate-300 font-bold py-2 px-4 rounded-lg disabled:opacity-50 text-xs" disabled>Próxima</button>
                                        </div>
                                    </div>
                                </div>
                            </div> <!-- End goals-gv-content -->

                            <!-- Tab Content: Meta SV -->
                            <div id="goals-sv-content" class="hidden">
                                <div class="mb-6 p-4 glass-panel rounded-lg shadow-sm border border-slate-700">
                                    <div class="flex flex-col md:flex-row justify-between items-end gap-4">
                                        <div class="relative w-full md:w-64">
                                            <label for="goals-sv-supervisor-filter-btn" class="block mb-2 text-sm font-medium text-slate-400">Supervisor</label>
                                            <button id="goals-sv-supervisor-filter-btn" class="w-full bg-slate-700 border border-slate-600 text-white text-sm rounded-lg p-2.5 text-left flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-teal-500">
                                                <span id="goals-sv-supervisor-filter-text">Todos</span>
                                                <svg class="w-4 h-4 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg>
                                            </button>
                                            <div id="goals-sv-supervisor-filter-dropdown" class="hidden absolute z-50 w-full mt-1 glass-panel rounded-lg shadow-lg max-h-60 overflow-y-auto custom-scrollbar text-white"></div>
                                        </div>
                                        <button id="goals-sv-import-btn" class="w-full md:w-auto bg-[#FF5E00] hover:bg-[#CC4A00] text-white font-bold py-2.5 px-6 rounded-lg flex items-center justify-center gap-2 shadow-lg transition-colors">
                                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path></svg>
                                            Importar
                                        </button>
                                        <button id="goals-sv-export-xlsx-btn" class="w-full md:w-auto bg-green-600 hover:bg-green-700 text-white font-bold py-2.5 px-6 rounded-lg flex items-center justify-center gap-2 shadow-lg transition-colors">
                                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                                            Exportar Excel
                                        </button>
                                    </div>
                                </div>

                                <!-- Consolidated Table (SV) -->
                                <div id="goals-sv-table-container" class="glass-panel border border-slate-700 shadow-sm rounded-lg overflow-hidden">
                                    <div class="overflow-auto custom-scrollbar" style="max-height: 75vh;">
                                        <table class="min-w-full text-sm text-left text-slate-300 border-collapse" id="goals-sv-main-table">
                                            <!-- Headers populated by JS -->
                                            <tbody id="goals-sv-table-body" class="divide-y divide-slate-800 bg-glass"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

    <div id="innovations-month-view" class="hidden container mx-auto p-4 max-w-7xl animate-fade-in-up">
        <header class="mb-8 border-b border-slate-800 pb-4 flex justify-between items-end">
            <h1 class="text-3xl font-bold text-white">Inovações</h1>

        </header>

        <!-- Filters Block -->
        <div class="filter-wrapper-sentinel">
        <div class="sticky-filters mb-6 p-6 glass-filter-box rounded-2xl border border-slate-800/50 shadow-lg">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
                <!-- Coordenador -->
                <div id="innovations-month-coord-filter-wrapper" class="relative">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Coordenador</label>
                    <button id="innovations-month-coord-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between"><span id="innovations-month-coord-filter-text">Todos</span></button>
                    <div id="innovations-month-coord-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                </div>
                <!-- Co-Coordenador -->
                <div id="innovations-month-cocoord-filter-wrapper" class="relative">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Co-Coordenador</label>
                    <button id="innovations-month-cocoord-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between"><span id="innovations-month-cocoord-filter-text">Todos</span></button>
                    <div id="innovations-month-cocoord-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                </div>
                <!-- Promotor -->
                <div id="innovations-month-promotor-filter-wrapper" class="relative">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Promotor</label>
                    <button id="innovations-month-promotor-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between"><span id="innovations-month-promotor-filter-text">Todos</span></button>
                    <div id="innovations-month-promotor-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                </div>
                <!-- Cidade -->
                <div class="relative">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Cidade</label>
                    <input id="innovations-month-city-filter" class="w-full glass-input border border-slate-700 text-white text-sm rounded-lg p-2.5" placeholder="Buscar...">
                    <div id="innovations-month-city-suggestions" class="hidden absolute z-30 w-full mt-1 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-2"></div>
                </div>
                 <!-- Tipo Venda -->
                 <div class="relative">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Tipo Venda</label>
                    <button id="innovations-month-tipo-venda-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between"><span id="innovations-month-tipo-venda-filter-text">Todos</span></button>
                    <div id="innovations-month-tipo-venda-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                </div>
            </div>
            <div class="flex flex-wrap gap-4 items-end mt-4 justify-between">
                 <!-- Category Filter -->
                 <div class="relative flex-1 min-w-[200px]">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Categoria</label>
                    <select id="innovations-month-category-filter" class="w-full glass-input border border-slate-700 text-white text-sm rounded-lg p-2.5">
                        <option value="">Todas</option>
                    </select>
                </div>
                 <!-- Filial -->
                 <div class="flex-1 min-w-[150px]">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Filial</label>
                    <select id="innovations-month-filial-filter" class="w-full glass-input border border-slate-700 text-white text-sm rounded-lg p-2.5"><option value="ambas">Ambas</option><option value="05">05</option><option value="08">08</option></select>
                </div>
                <div class="flex gap-2 items-end">
                    <button id="clear-innovations-month-filters-btn" class="w-full bg-slate-700 hover:bg-slate-600 text-white font-bold py-2.5 px-4 rounded-lg">Limpar</button>
                </div>
            </div>
        </div>
        </div>

        <!-- KPIs Block -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <!-- 1. Clientes Ativos -->
            <div class="kpi-card kpi-glow-blue p-6">
                <div class="flex justify-between items-center">
                    <div>
                        <p class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">Clientes Ativos</p>
                        <h3 id="innovations-month-active-clients-kpi" class="text-3xl font-bold text-white">0</h3>
                        <p class="text-slate-500 text-xs mt-1">Base de Cálculo</p>
                    </div>
                    <div class="p-2 bg-blue-500/10 rounded-lg"><svg class="w-6 h-6 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div>
                </div>
            </div>
            <!-- 2. Top Cobertura -->
            <div class="kpi-card kpi-glow-yellow p-6">
                <div class="flex justify-between items-center">
                    <div class="overflow-hidden pr-2">
                        <p id="innovations-month-top-coverage-title" class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">Top Cobertura</p>
                        <h3 id="innovations-month-top-coverage-kpi" class="text-xl font-bold text-white truncate leading-tight mt-1 mb-1">--</h3>
                        <p class="text-slate-500 text-xs mt-1 flex gap-2">
                            <span id="innovations-month-top-coverage-count-kpi">0</span> | <span id="innovations-month-top-coverage-value-kpi">R$ 0</span>
                        </p>
                    </div>
                    <div class="p-2 bg-yellow-500/10 rounded-lg flex-shrink-0"><svg class="w-6 h-6 text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path></svg></div>
                </div>
            </div>
            <!-- 3. Seleção (Valor) -->
            <div class="kpi-card kpi-glow-green p-6">
                <div class="flex justify-between items-center">
                    <div>
                        <p class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">PERCENTUAL</p>
                        <h3 id="innovations-month-selection-coverage-value-kpi" class="text-3xl font-bold text-white">R$ 0,00</h3>
                        <p id="innovations-month-selection-coverage-value-kpi-previous" class="text-slate-500 text-xs mt-1">Anterior: R$ 0,00</p>
                    </div>
                    <div class="p-2 bg-green-500/10 rounded-lg"><svg class="w-6 h-6 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div>
                </div>
            </div>
            <!-- 4. Seleção (Qtde) -->
            <div class="kpi-card kpi-glow-purple p-6">
                <div class="flex justify-between items-center">
                    <div>
                        <p class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">BASE</p>
                        <h3 id="innovations-month-selection-coverage-count-kpi" class="text-3xl font-bold text-white">0</h3>
                        <p id="innovations-month-selection-coverage-count-kpi-previous" class="text-slate-500 text-xs mt-1">Anterior: 0</p>
                    </div>
                    <div class="p-2 bg-purple-500/10 rounded-lg"><svg class="w-6 h-6 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div>
                </div>
            </div>
        </div>
        <div class="hidden">
             <div id="innovations-month-bonus-coverage-value-kpi"></div>
             <div id="innovations-month-bonus-coverage-count-kpi"></div>
             <div id="innovations-month-bonus-coverage-value-kpi-previous"></div>
             <div id="innovations-month-bonus-coverage-count-kpi-previous"></div>
        </div>

        <div class="glass-panel p-6 rounded-2xl border border-slate-800/50 shadow-lg mb-8">
            <div id="innovations-month-chartContainer" class="relative h-96 w-full"></div>
        </div>
        <div class="glass-panel rounded-2xl border border-slate-800/50 shadow-lg overflow-hidden">
            <div class="overflow-x-auto custom-scrollbar">
                <table class="min-w-full text-sm text-left text-slate-300">
                    <thead class="text-[10px] md:text-xs text-slate-400 uppercase glass-panel">
                        <tr>
                            <th class="px-2 py-2 md:px-4 md:py-3 text-left hidden md:table-cell">Categoria</th>
                            <th class="px-2 py-2 md:px-4 md:py-3 text-left">Produto</th>
                            <th class="px-2 py-2 md:px-4 md:py-3 text-center hidden md:table-cell">Estoque</th>
                            <th class="px-2 py-2 md:px-4 md:py-3 text-center">Pos. Ant.</th>
                            <th class="px-2 py-2 md:px-4 md:py-3 text-center">Pos. Atual</th>
                            <th class="px-2 py-2 md:px-4 md:py-3 text-center">Var.</th>
                        </tr>
                    </thead>
                    <tbody id="innovations-month-table-body" class="divide-y divide-slate-800"></tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="mix-view" class="hidden container mx-auto p-4 max-w-7xl animate-fade-in-up">
        <header class="mb-8 border-b border-slate-800 pb-4 flex justify-between items-end">
            <h1 class="text-3xl font-bold text-white">Análise de Mix</h1>

        </header>

        <div class="filter-wrapper-sentinel">
        <div class="sticky-filters mb-6 p-6 glass-filter-box rounded-2xl border border-slate-800/50 shadow-lg">
            <div class="flex flex-wrap gap-4 items-end">
                <div id="mix-rede-filter-wrapper" class="relative flex-1 min-w-[260px] z-20">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Rede</label>
                    <div id="mix-rede-group-container" class="inline-flex rounded-lg glass-panel p-1 w-full">
                        <button type="button" data-group="" class="group-btn active flex-1 py-2 text-xs font-bold rounded-md">Todos</button>
                        <button type="button" id="mix-com-rede-btn" data-group="com_rede" class="group-btn flex-1 py-2 text-xs font-medium text-slate-400 rounded-md"><span id="mix-com-rede-btn-text">C/Rede</span></button>
                        <button type="button" data-group="sem_rede" class="group-btn flex-1 py-2 text-xs font-medium text-slate-400 rounded-md">S/Rede</button>
                    </div>
                    <div id="mix-rede-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                </div>
                <!-- Coordenador -->
                <div id="mix-coord-filter-wrapper" class="relative flex-1 min-w-[200px]">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Coordenador</label>
                    <button id="mix-coord-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between"><span id="mix-coord-filter-text">Todos</span></button>
                    <div id="mix-coord-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                </div>
                <!-- Co-Coordenador -->
                <div id="mix-cocoord-filter-wrapper" class="relative flex-1 min-w-[200px]">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Co-Coordenador</label>
                    <button id="mix-cocoord-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between"><span id="mix-cocoord-filter-text">Todos</span></button>
                    <div id="mix-cocoord-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                </div>
                <!-- Promotor -->
                <div id="mix-promotor-filter-wrapper" class="relative flex-1 min-w-[200px]">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Promotor</label>
                    <button id="mix-promotor-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between"><span id="mix-promotor-filter-text">Todos</span></button>
                    <div id="mix-promotor-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                </div>
            </div>
            <div class="flex flex-wrap gap-4 items-end mt-4">
                <div class="relative flex-1 min-w-[200px]">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Cidade</label>
                    <input id="mix-city-filter" class="w-full glass-input border border-slate-700 text-white text-sm rounded-lg p-2.5" placeholder="Buscar...">
                    <div id="mix-city-suggestions" class="hidden absolute z-30 w-full mt-1 glass-panel rounded-xl shadow-2xl p-2"></div>
                </div>
                <div class="flex-1 min-w-[150px]">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Filial</label>
                    <select id="mix-filial-filter" class="w-full glass-input border border-slate-700 text-white text-sm rounded-lg p-2.5"><option value="ambas">Ambas</option><option value="05">05</option><option value="08">08</option></select>
                </div>
                <div class="relative flex-1 min-w-[200px]">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Tipo Venda</label>
                    <button id="mix-tipo-venda-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between"><span id="mix-tipo-venda-filter-text">Todos</span></button>
                    <div id="mix-tipo-venda-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                </div>
                <div class="flex-1 min-w-[150px]">
                    <button id="clear-mix-filters-btn" class="w-full bg-slate-700 hover:bg-slate-600 text-white font-bold py-2.5 px-4 rounded-lg">Limpar</button>
                </div>
            </div>
        </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
            <!-- 1. Total Clientes -->
            <div class="kpi-card kpi-glow-blue p-6">
                <div class="flex justify-between items-start">
                    <div>
                        <div class="flex items-center gap-2 mb-1">
                             <p id="mix-kpi-title" class="text-slate-400 text-xs font-bold uppercase tracking-wider">Total Clientes (Filtro)</p>
                             <label for="mix-kpi-toggle" class="flex items-center cursor-pointer" title="Alternar base de cálculo">
                                <div class="relative">
                                    <input type="checkbox" id="mix-kpi-toggle" class="sr-only peer">
                                    <div class="w-8 h-4 bg-slate-600 rounded-full peer-checked:bg-[#FF5E00] transition-colors"></div>
                                    <div class="absolute left-0.5 top-0.5 bg-white w-3 h-3 rounded-full transition-transform peer-checked:translate-x-full"></div>
                                </div>
                            </label>
                        </div>
                        <h3 id="mix-total-clients-kpi" class="text-3xl font-bold text-white">0</h3>
                        <p class="text-slate-500 text-xs mt-1">Base para análise</p>
                    </div>
                    <div class="p-2 bg-blue-500/10 rounded-lg"><svg class="w-6 h-6 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div>
                </div>
            </div>
            <!-- 2. Positivados Salty -->
            <div class="kpi-card kpi-glow-orange p-6">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">Positivados Salty</p>
                        <h3 id="mix-salty-kpi" class="text-3xl font-bold text-white">0%</h3>
                        <p id="mix-salty-count-kpi" class="text-slate-500 text-xs mt-1">0 clientes</p>
                    </div>
                    <div class="p-2 bg-orange-500/10 rounded-lg"><svg class="w-6 h-6 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div>
                </div>
            </div>
            <!-- 3. Positivados Foods -->
            <div class="kpi-card kpi-glow-yellow p-6">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">Positivados Foods</p>
                        <h3 id="mix-foods-kpi" class="text-3xl font-bold text-white">0%</h3>
                        <p id="mix-foods-count-kpi" class="text-slate-500 text-xs mt-1">0 clientes</p>
                    </div>
                    <div class="p-2 bg-yellow-500/10 rounded-lg"><svg class="w-6 h-6 text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div>
                </div>
            </div>
            <!-- 4. Mix Ideal -->
            <div class="kpi-card kpi-glow-green p-6">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">Mix Ideal (Ambos)</p>
                        <h3 id="mix-both-kpi" class="text-3xl font-bold text-white">0%</h3>
                        <p id="mix-both-count-kpi" class="text-slate-500 text-xs mt-1">0 clientes</p>
                    </div>
                    <div class="p-2 bg-green-500/10 rounded-lg"><svg class="w-6 h-6 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path></svg></div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
            <div class="glass-panel p-2 rounded-2xl border border-slate-800/50 shadow-lg">
                <h2 class="text-xl font-bold text-white mb-6">Distribuição de Mix</h2>
                <div id="mixDistributionChartContainer" class="relative h-80 w-full"></div>
            </div>
            <div class="glass-panel p-2 rounded-2xl border border-slate-800/50 shadow-lg">
                <h2 id="mix-seller-chart-title" class="text-xl font-bold text-white mb-6">Performance por Vendedor</h2>
                <div id="mixSellerChartContainer" class="relative h-80 w-full"></div>
            </div>
        </div>

        <div id="mix-mobile-legend"></div>
        <div class="glass-panel rounded-2xl border border-slate-800/50 shadow-lg overflow-hidden">
            <div class="overflow-x-auto custom-scrollbar max-h-96">
                <table class="min-w-full text-sm text-left text-slate-300">
                    <thead class="text-[9px] uppercase text-slate-400 glass-panel sticky top-0 z-20">
                        <tr>
                            <th class="px-0.5 py-2 text-center border-r border-slate-800 min-w-[40px] hidden md:table-cell">Codcli</th>
                            <th class="px-2 py-2 text-left border-r border-slate-800 min-w-[120px]">Cliente</th>
                            <th class="px-2 py-2 text-left border-r border-slate-800 w-20 hidden md:table-cell">Cidade</th>
                            <th class="px-2 py-2 text-left border-r border-slate-800 w-20 hidden md:table-cell">Vendedor</th>
                            <th class="px-0.5 py-2 text-center border-r border-slate-800 w-10 hidden md:table-cell">CHEETOS</th>
                            <th class="px-0.5 py-2 text-center border-r border-slate-800 w-10 hidden md:table-cell">DORITOS</th>
                            <th class="px-0.5 py-2 text-center border-r border-slate-800 w-10 hidden md:table-cell">FANDAN</th>
                            <th class="px-0.5 py-2 text-center border-r border-slate-800 w-10 hidden md:table-cell">RUFFLES</th>
                            <th class="px-0.5 py-2 text-center border-r border-slate-800 w-10 hidden md:table-cell">TORCIDA</th>
                            <th class="px-0.5 py-2 text-center border-r border-slate-800 w-10 hidden md:table-cell">TODDYNHO</th>
                            <th class="px-0.5 py-2 text-center border-r border-slate-800 w-10 hidden md:table-cell">TODDY</th>
                            <th class="px-0.5 py-2 text-center border-r border-slate-800 w-10 hidden md:table-cell">QUAKER</th>
                            <th class="px-0.5 py-2 text-center w-10 hidden md:table-cell">KEROCOCO</th>
                            <th class="px-2 py-2 text-center md:hidden">Categorias</th>
                        </tr>
                    </thead>
                    <tbody id="mix-table-body" class="divide-y divide-slate-800"></tbody>
                </table>
            </div>
            <div id="mix-pagination-controls" class="p-4 glass-panel border-t border-slate-800 flex justify-between items-center">
                <button id="mix-prev-page-btn" class="glass-panel hover:bg-white/5 text-white font-bold py-2 px-4 rounded-lg disabled:opacity-50 text-xs transition-colors">Anterior</button>
                <span id="mix-page-info-text" class="text-slate-400 text-xs font-medium"></span>
                <button id="mix-next-page-btn" class="glass-panel hover:bg-white/5 text-white font-bold py-2 px-4 rounded-lg disabled:opacity-50 text-xs transition-colors">Próxima</button>
            </div>
        </div>
    </div>
    <div id="meta-realizado-view" class="hidden container mx-auto p-4 max-w-7xl animate-fade-in-up">
        <header class="mb-8 border-b border-slate-800 pb-4 flex justify-between items-end">
            <h1 class="text-3xl font-bold text-white">Meta vs Realizado</h1>

        </header>

        <div class="filter-wrapper-sentinel">
        <div class="sticky-filters mb-6 p-6 glass-filter-box rounded-2xl border border-slate-800/50 shadow-lg">
            <div class="flex flex-wrap gap-4 items-end">
                <!-- Coordenador -->
                <div id="meta-realizado-coord-filter-wrapper" class="relative flex-1 min-w-[200px]">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Coordenador</label>
                    <button id="meta-realizado-coord-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between"><span id="meta-realizado-coord-filter-text">Todos</span></button>
                    <div id="meta-realizado-coord-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                </div>
                <!-- Co-Coordenador -->
                <div id="meta-realizado-cocoord-filter-wrapper" class="relative flex-1 min-w-[200px]">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Co-Coordenador</label>
                    <button id="meta-realizado-cocoord-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between"><span id="meta-realizado-cocoord-filter-text">Todos</span></button>
                    <div id="meta-realizado-cocoord-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                </div>
                <!-- Promotor -->
                <div id="meta-realizado-promotor-filter-wrapper" class="relative flex-1 min-w-[200px]">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Promotor</label>
                    <button id="meta-realizado-promotor-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between"><span id="meta-realizado-promotor-filter-text">Todos</span></button>
                    <div id="meta-realizado-promotor-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                </div>
                <div class="relative flex-1 min-w-[200px]">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Fornecedor</label>
                    <button id="meta-realizado-supplier-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between"><span id="meta-realizado-supplier-filter-text">Todos</span></button>
                    <div id="meta-realizado-supplier-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                </div>
            </div>
            
            <div class="flex flex-wrap gap-4 items-center justify-between mt-6">
                <div id="meta-realizado-pasta-toggle-container" class="flex gap-2">
                    <!-- Buttons injected by JS (Pasta), ensure container is styled flex -->
                </div>
                <button id="clear-meta-realizado-filters-btn" class="bg-slate-700 hover:bg-slate-600 text-white font-bold py-2 px-4 rounded-lg">Limpar</button>
            </div>
        </div>
        </div>

        <div class="glass-panel p-6 rounded-2xl border border-slate-800/50 shadow-lg mb-8">
            <div class="flex justify-between items-center mb-6">
                <h2 id="metaRealizadoChartTitle" class="text-xl font-bold text-white">Progresso Geral</h2>
                <button id="metaRealizadoMetricToggleBtn" class="glass-panel text-slate-300 text-xs px-3 py-1 rounded border border-slate-700">Alternar Métrica</button>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="h-80 relative w-full">
                    <h3 class="text-center text-slate-400 text-sm mb-2">Volume / Valor</h3>
                    <div id="metaRealizadoChartContainer" class="relative h-full w-full"></div>
                </div>
                <div class="h-80 relative w-full">
                    <h3 class="text-center text-slate-400 text-sm mb-2">Positivação</h3>
                    <div id="metaRealizadoPosChartContainer" class="relative h-full w-full"></div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 gap-8">
            <!-- Summary Table -->
            <div class="glass-panel rounded-2xl border border-slate-800/50 shadow-lg overflow-hidden flex flex-col transition-all duration-300">
                <button onclick="toggleMetaSection('meta-resumo-vendedor-content', 'meta-resumo-vendedor-chevron')" class="w-full p-4 glass-panel border-b border-slate-800 flex justify-between items-center hover:bg-white/5 transition-colors group">
                    <h3 class="font-bold text-white">Resumo por Vendedor</h3>
                    <svg id="meta-resumo-vendedor-chevron" class="w-6 h-6 text-white transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div id="meta-resumo-vendedor-content" class="hidden flex flex-col h-[600px] transition-all duration-300">
                    <div class="overflow-auto custom-scrollbar flex-1">
                        <table id="metaRealizadoTableContainer" class="min-w-full text-sm text-left text-slate-300">
                            <thead id="meta-realizado-table-head" class="text-xs text-slate-400 uppercase glass-panel sticky top-0"></thead>
                            <tbody id="meta-realizado-table-body" class="divide-y divide-slate-800"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Detail Table -->
            <div class="glass-panel rounded-2xl border border-slate-800/50 shadow-lg overflow-hidden flex flex-col transition-all duration-300">
                <button onclick="toggleMetaSection('meta-detalhamento-cliente-content', 'meta-detalhamento-cliente-chevron')" class="w-full p-4 glass-panel border-b border-slate-800 flex justify-between items-center hover:bg-white/5 transition-colors group">
                    <h3 class="font-bold text-white">Detalhamento por Cliente</h3>
                    <svg id="meta-detalhamento-cliente-chevron" class="w-6 h-6 text-white transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div id="meta-detalhamento-cliente-content" class="hidden flex flex-col h-[600px] transition-all duration-300">
                    <div class="overflow-auto custom-scrollbar flex-1">
                        <table id="metaRealizadoClientsTableContainer" class="min-w-full text-sm text-left text-slate-300">
                            <thead id="meta-realizado-clients-table-head" class="text-xs text-slate-400 uppercase glass-panel sticky top-0"></thead>
                            <tbody id="meta-realizado-clients-table-body" class="divide-y divide-slate-800"></tbody>
                        </table>
                    </div>

                        <!-- Modal Detalhes Meta Realizado (Genérico) -->
                        <div id="meta-realizado-details-modal" class="modal-overlay hidden fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4">
                            <div class="bg-modal-content w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]">
                                <!-- Header -->
                                <div class="px-6 py-4 border-b border-slate-700/50 flex justify-between items-start bg-slate-900/50">
                                    <div class="flex-1 pr-4">
                                        <h3 id="meta-realizado-modal-title" class="text-xl font-bold text-white leading-tight">Nome do Cliente</h3>
                                        <p id="meta-realizado-modal-subtitle" class="text-sm text-slate-400 mt-1">Detalhes Adicionais</p>
                                    </div>
                                    <button id="meta-realizado-modal-close-btn" class="text-slate-400 hover:text-white transition-colors p-1 rounded-full hover:bg-slate-800">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                                        </svg>
                                    </button>
                                </div>

                                <!-- Body -->
                                <div class="p-6 overflow-y-auto custom-scrollbar">
                                    <!-- Big Numbers Summary -->
                                    <div class="grid grid-cols-2 gap-4 mb-6">
                                        <div class="glass-panel p-4 rounded-xl flex flex-col justify-center items-center text-center">
                                            <span class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-1">Meta Total</span>
                                            <span id="meta-realizado-modal-meta-val" class="text-lg sm:text-2xl font-bold text-blue-400 truncate w-full">R$ 0,00</span>
                                        </div>
                                        <div class="glass-panel p-4 rounded-xl flex flex-col justify-center items-center text-center relative overflow-hidden">
                                            <div id="meta-realizado-modal-status-bg" class="absolute inset-0 opacity-10 bg-slate-500"></div>
                                            <span class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-1">Realizado</span>
                                            <span id="meta-realizado-modal-real-val" class="text-lg sm:text-2xl font-bold text-white truncate w-full relative z-10">R$ 0,00</span>
                                            <span id="meta-realizado-modal-percent" class="text-[10px] font-bold px-2 py-0.5 rounded-full bg-slate-800 text-white mt-1 relative z-10">0%</span>
                                        </div>
                                    </div>

                                    <!-- Weekly Breakdown Table -->
                                    <div class="overflow-x-auto rounded-lg border border-slate-700/50">
                                        <table class="w-full text-sm text-left">
                                            <thead class="text-xs text-slate-400 uppercase bg-slate-800/50">
                                                <tr>
                                                    <th class="px-4 py-3 font-medium text-center">Semana</th>
                                                    <th class="px-4 py-3 font-medium text-right">Meta</th>
                                                    <th class="px-4 py-3 font-medium text-right">Realizado</th>
                                                    <th class="px-4 py-3 font-medium text-center">%</th>
                                                </tr>
                                            </thead>
                                            <tbody id="meta-realizado-modal-weeks-body" class="divide-y divide-slate-700/30">
                                                <!-- Rows injected via JS -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    <div id="meta-realizado-clients-pagination-controls" class="p-3 glass-panel border-t border-slate-800 flex justify-between items-center text-xs">
                        <button id="meta-realizado-clients-prev-page-btn" class="glass-panel text-white px-3 py-1 rounded disabled:opacity-50">Ant</button>
                        <span id="meta-realizado-clients-page-info-text" class="text-slate-400"></span>
                        <button id="meta-realizado-clients-next-page-btn" class="glass-panel text-white px-3 py-1 rounded disabled:opacity-50">Prox</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="coverage-view" class="hidden container mx-auto p-4 max-w-7xl animate-fade-in-up">
        <header class="mb-8 border-b border-slate-800 pb-4 flex justify-between items-end">
            <h1 class="text-3xl font-bold text-white">Análise de Cobertura</h1>

        </header>

        <div class="filter-wrapper-sentinel">
        <div class="sticky-filters mb-6 p-6 glass-filter-box rounded-2xl border border-slate-800/50 shadow-lg">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
                <div id="coverage-coord-filter-wrapper" class="relative">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Coordenador</label>
                    <button id="coverage-coord-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between"><span id="coverage-coord-filter-text">Todos</span></button>
                    <div id="coverage-coord-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                </div>
                <div id="coverage-cocoord-filter-wrapper" class="relative">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Co-Coordenador</label>
                    <button id="coverage-cocoord-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between"><span id="coverage-cocoord-filter-text">Todos</span></button>
                    <div id="coverage-cocoord-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                </div>
                <div id="coverage-promotor-filter-wrapper" class="relative">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Promotor</label>
                    <button id="coverage-promotor-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between"><span id="coverage-promotor-filter-text">Todos</span></button>
                    <div id="coverage-promotor-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                </div>
                <div class="relative">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Fornecedor</label>
                    <button id="coverage-supplier-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between"><span id="coverage-supplier-filter-text">Todos</span></button>
                    <div id="coverage-supplier-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                </div>
                <div class="relative">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Cidade</label>
                    <input id="coverage-city-filter" class="w-full glass-input border border-slate-700 text-white text-sm rounded-lg p-2.5" placeholder="Buscar...">
                    <div id="coverage-city-suggestions" class="hidden absolute z-30 w-full mt-1 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-2"></div>
                </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-4">
                <div class="relative lg:col-span-2">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Produto</label>
                    <button id="coverage-product-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between"><span id="coverage-product-filter-text">Todos</span></button>
                    <div id="coverage-product-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2 max-h-60 overflow-y-auto custom-scrollbar">
                        <input id="coverage-product-search-input" class="w-full bg-slate-700 border border-slate-600 text-white text-sm rounded-lg p-2 mb-2" placeholder="Buscar...">
                        <div id="coverage-product-list" class="space-y-1"></div>
                    </div>
                </div>
                <div>
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Filial</label>
                    <select id="coverage-filial-filter" class="w-full glass-input border border-slate-700 text-white text-sm rounded-lg p-2.5"><option value="ambas">Ambas</option></select>
                </div>
                <div class="flex gap-2 items-end">
                    <button id="clear-coverage-filters-btn" class="w-full bg-slate-700 hover:bg-slate-600 text-white font-bold py-2.5 px-4 rounded-lg">Limpar</button>
                </div>
            </div>
            <!-- Hidden inputs needed for logic -->
            <div class="hidden">
                <button id="coverage-tipo-venda-filter-btn"><span id="coverage-tipo-venda-filter-text"></span></button><div id="coverage-tipo-venda-filter-dropdown"></div>
                <input id="coverage-unit-price-filter">
            </div>
        </div>
        </div>

        <!-- KPIs -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
            <!-- 1. Clientes Ativos -->
            <div class="kpi-card kpi-glow-blue p-6">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">Clientes Ativos (Filtro)</p>
                        <h3 id="coverage-active-clients-kpi" class="text-3xl font-bold text-white">0</h3>
                        <p class="text-slate-500 text-xs mt-1">Base para os KPIs</p>
                    </div>
                    <div class="p-2 bg-blue-500/10 rounded-lg"><svg class="w-6 h-6 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div>
                </div>
            </div>
            <!-- 2. Mês Anterior -->
            <div class="kpi-card kpi-glow-purple p-6">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">Cobertura Mês Anterior</p>
                        <h3 id="coverage-selection-coverage-value-kpi-previous" class="text-3xl font-bold text-white">0%</h3>
                        <p id="coverage-selection-coverage-count-kpi-previous" class="text-slate-500 text-xs mt-1">0 de 0 clientes</p>
                    </div>
                    <div class="p-2 bg-purple-500/10 rounded-lg"><svg class="w-6 h-6 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div>
                </div>
            </div>
            <!-- 3. Mês Atual -->
            <div class="kpi-card kpi-glow-green p-6">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">Cobertura Mês Atual</p>
                        <h3 id="coverage-selection-coverage-value-kpi" class="text-3xl font-bold text-white">0%</h3>
                        <p id="coverage-selection-coverage-count-kpi" class="text-slate-500 text-xs mt-1">0 de 0 clientes</p>
                    </div>
                    <div class="p-2 bg-green-500/10 rounded-lg"><svg class="w-6 h-6 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div>
                </div>
            </div>
            <!-- 4. Top Item -->
            <div class="kpi-card kpi-glow-yellow p-6">
                <div class="flex justify-between items-start">
                    <div class="overflow-hidden pr-2">
                        <p class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">Item com Maior Cobertura</p>
                        <h3 id="coverage-top-coverage-value-kpi" class="text-3xl font-bold text-white">0%</h3>
                        <p id="coverage-top-coverage-product-kpi" class="text-slate-500 text-xs mt-1 truncate">-</p>
                        <p id="coverage-top-coverage-count-kpi" class="hidden">0</p>
                    </div>
                    <div class="p-2 bg-yellow-500/10 rounded-lg flex-shrink-0"><svg class="w-6 h-6 text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path></svg></div>
                </div>
            </div>
        </div>
        
        <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
             <div class="lg:col-span-2 glass-panel p-4 rounded-xl border border-slate-800/50 shadow-lg">
                <p class="text-xs text-slate-500 uppercase font-bold mb-2">Top Produto (Valor)</p>
                <div id="coverage-top-coverage-value-kpi" class="text-sm text-white truncate"></div>
             </div>
             <div class="lg:col-span-2 glass-panel p-4 rounded-xl border border-slate-800/50 shadow-lg">
                <p class="text-xs text-slate-500 uppercase font-bold mb-2">Top Produto (Positivação)</p>
                <div id="coverage-top-coverage-product-kpi" class="text-sm text-white truncate"></div>
             </div>
        </div>

        <div class="glass-panel p-6 rounded-2xl border border-slate-800/50 shadow-lg mb-8">
            <div class="flex justify-between items-center mb-6">
                <h2 id="coverage-chart-title" class="text-xl font-bold text-white">Cobertura por Cidade</h2>
                <button id="coverage-chart-toggle-btn" class="glass-panel text-slate-300 text-xs px-3 py-1 rounded">Alternar</button>
            </div>
            <div id="coverageCityChartContainer" class="relative h-96 w-full"></div>
            <div id="coverageSellerChartContainer" class="relative h-96 w-full hidden"></div>
        </div>

        <div class="glass-panel rounded-2xl border border-slate-800/50 shadow-lg overflow-hidden">
            <div class="overflow-x-auto custom-scrollbar max-h-96">
                <table class="min-w-full text-sm text-left text-slate-300">
                    <thead class="text-[10px] md:text-xs text-slate-400 uppercase glass-panel sticky top-0 hidden md:table-header-group">
                        <tr>
                            <th class="px-2 py-2 md:px-4 md:py-3 text-left">Produto</th>
                            <th class="px-2 py-2 md:px-4 md:py-3 text-right hidden md:table-cell">Estoque</th>
                            <th class="px-2 py-2 md:px-4 md:py-3 text-right hidden md:table-cell">Vol. Ant.</th>
                            <th class="px-2 py-2 md:px-4 md:py-3 text-right">Vol. Atual</th>
                            <th class="px-2 py-2 md:px-4 md:py-3 text-right">Var. Vol.</th>
                            <th class="px-2 py-2 md:px-4 md:py-3 text-right hidden md:table-cell">PDV Ant.</th>
                            <th class="px-2 py-2 md:px-4 md:py-3 text-right hidden md:table-cell">PDV Atual</th>
                            <th class="px-2 py-2 md:px-4 md:py-3 text-right">Var. PDV</th>
                        </tr>
                    </thead>
                    <tbody id="coverage-table-body" class="divide-y divide-slate-800"></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- WALLET MANAGEMENT VIEW -->
    <div id="wallet-view" class="hidden container mx-auto p-4 max-w-7xl animate-fade-in-up">
        <header class="mb-8 border-b border-slate-800 pb-4 flex justify-between items-end">
            <div>
                <h1 class="text-3xl font-bold text-white mb-1">Gestão de Carteira</h1>
                <p class="text-slate-400 text-sm">Gerencie os clientes da sua equipe.</p>
            </div>
        </header>

        <!-- Controls Section -->
        <div class="filter-wrapper-sentinel">
        <div class="sticky-filters mb-6 p-6 glass-filter-box rounded-2xl border border-slate-800/50 shadow-lg">
             <div class="flex flex-col md:flex-row gap-6">
                <!-- Promoter Selector (For Coords) -->
                <div id="wallet-promoter-select-container" class="flex-1 min-w-[250px]">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Promotor</label>
                    <div class="relative">
                        <button id="wallet-promoter-select-btn" class="w-full glass-panel text-white text-sm rounded-lg p-3 text-left flex justify-between items-center focus:ring-2 focus:ring-[#FF5E00] transition-all hover:bg-slate-750">
                            <span id="wallet-promoter-select-text" class="truncate">Selecione...</span>
                            <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div id="wallet-promoter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-2">
                            <!-- Options injected by JS -->
                        </div>
                    </div>
                </div>
                
                <!-- Search Box -->
                <div id="wallet-search-container" class="flex-[2] relative">
                    <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Adicionar Cliente (Busca Global)</label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <svg class="w-5 h-5 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                        </div>
                        <input type="text" id="wallet-client-search" class="glass-input border border-slate-700 text-white text-sm rounded-lg focus:ring-2 focus:ring-[#FF5E00] block w-full pl-10 p-3 placeholder-slate-500 transition-all" placeholder="Pesquise por Código, CNPJ, CPF ou Razão Social..." autocomplete="off">
                    </div>
                     <!-- Search Suggestions Dropdown -->
                    <div id="wallet-search-suggestions" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl max-h-80 overflow-y-auto custom-scrollbar p-0 overflow-hidden">
                        <!-- Suggestions injected by JS -->
                    </div>
                </div>
             </div>
        </div>
        </div>

        <!-- Portfolio Table -->
        <div class="glass-panel rounded-2xl border border-slate-800/50 shadow-lg overflow-hidden">
             <div class="p-4 glass-panel border-b border-slate-800 flex justify-between items-center">
                <h3 id="wallet-table-title" class="font-bold text-white flex items-center gap-2">
                    Carteira Atual
                    <span id="wallet-count-badge" class="bg-[#FF5E00] text-white text-xs px-2 py-0.5 rounded-full">0</span>
                </h3>
            </div>
            <div class="overflow-x-auto custom-scrollbar max-h-[600px]">
                <table class="min-w-full text-sm text-left text-slate-300">
                    <thead class="text-[10px] md:text-xs text-slate-400 uppercase glass-panel sticky top-0 z-10 shadow-md hidden md:table-header-group">
                        <tr>
                            <th class="px-2 py-2 md:px-6 md:py-4 font-bold tracking-wider w-16 md:w-32">Cód.</th>
                            <th class="px-2 py-2 md:px-6 md:py-4 font-bold tracking-wider">Cliente</th>
                            <th class="px-2 py-2 md:px-6 md:py-4 font-bold tracking-wider hidden md:table-cell">CNPJ / CPF</th>
                        </tr>
                    </thead>
                    <tbody id="wallet-table-body" class="divide-y divide-slate-800/50">
                        <!-- Rows injected by JS -->
                    </tbody>
                </table>
            </div>
            <div id="wallet-empty-state" class="hidden p-12 text-center">
                <div class="inline-flex items-center justify-center w-16 h-16 rounded-full glass-panel mb-4">
                    <svg class="w-8 h-8 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg>
                </div>
                <h3 class="text-lg font-medium text-white mb-1">Nenhum cliente encontrado</h3>
                <p class="text-slate-400 text-sm">Selecione um promotor ou adicione novos clientes.</p>
            </div>
        </div>
    </div>
    
    <!-- CONSULTAS VIEW -->
    <div id="consultas-view" class="hidden container mx-auto p-4 max-w-7xl animate-fade-in-up">
        <header class="mb-8 border-b border-slate-800 pb-4">
            <h1 class="text-3xl font-bold text-white">Consultas</h1>
        </header>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <button onclick="renderView('positivacao')" class="glass-panel hover:bg-white/5 p-6 rounded-xl border border-slate-700 shadow-md text-left group transition-all flex items-start gap-4">
                <div class="p-3 bg-green-500/20 rounded-full text-green-400 group-hover:bg-green-500/30 transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                </div>
                <div>
                    <h3 class="text-lg font-bold text-white group-hover:text-blue-300 transition-colors">Positivação de Clientes</h3>
                    <p class="text-sm text-slate-400 mt-1">Clientes com e sem venda</p>
                </div>
            </button>
            <button onclick="renderView('titulos')" class="glass-panel hover:bg-white/5 p-6 rounded-xl border border-slate-700 shadow-md text-left group transition-all flex items-start gap-4 cursor-pointer">
                <div class="p-3 bg-green-500/20 rounded-full text-green-400 group-hover:bg-green-500/30 transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                </div>
                <div>
                    <h3 class="text-lg font-bold text-white">Títulos</h3>
                    <p class="text-sm text-slate-400 mt-1">Consulta inadimplência dos clientes</p>
                </div>
            </button>
            <button onclick="renderView('lojaPerfeita')" class="glass-panel hover:bg-white/5 p-6 rounded-xl border border-slate-700 shadow-md text-left group transition-all flex items-start gap-4 cursor-pointer">
                <div class="p-3 bg-yellow-500/20 rounded-full text-yellow-400 group-hover:bg-yellow-500/30 transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path></svg>
                </div>
                <div>
                    <h3 class="text-lg font-bold text-white group-hover:text-yellow-300 transition-colors">Loja Perfeita</h3>
                    <p class="text-sm text-slate-400 mt-1">Possibilita visualizar as notas mais altas das pesquisas feitas no mês.</p>
                </div>
            </button>
            <button class="glass-panel hover:bg-white/5 p-6 rounded-xl border border-slate-700 shadow-md text-left group transition-all flex items-start gap-4 cursor-pointer" title="Em breve">
                <div class="p-3 bg-green-500/20 rounded-full text-green-400">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg>
                </div>
                <div>
                    <h3 class="text-lg font-bold text-white">Extrato Conta Corrente</h3>
                    <p class="text-sm text-slate-400 mt-1">Consulta movimentação de conta corrente do RCA</p>
                </div>
            </button>
            <button class="glass-panel hover:bg-white/5 p-6 rounded-xl border border-slate-700 shadow-md text-left group transition-all flex items-start gap-4 cursor-pointer" title="Em breve">
                <div class="p-3 bg-green-500/20 rounded-full text-green-400">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg>
                </div>
                <div>
                    <h3 class="text-lg font-bold text-white">Notificações de Estoque</h3>
                    <p class="text-sm text-slate-400 mt-1">Consulta notificações de estoque de produtos</p>
                </div>
            </button>
            <button onclick="renderView('history')" class="glass-panel hover:bg-white/5 p-6 rounded-xl border border-slate-700 shadow-md text-left group transition-all flex items-start gap-4">
                <div class="p-3 bg-green-500/20 rounded-full text-green-400 group-hover:bg-green-500/30 transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                </div>
                <div>
                    <h3 class="text-lg font-bold text-white group-hover:text-blue-300 transition-colors">Histórico de Pedidos</h3>
                    <p class="text-sm text-slate-400 mt-1">Possibilita visualizar pedidos mais antigos no sistema</p>
                </div>
            </button>
        </div>
    </div>

    <!-- TITULOS VIEW -->
    <div id="titulos-view" class="hidden container mx-auto p-4 max-w-7xl animate-fade-in-up">
        <header class="mb-8 border-b border-slate-800 pb-4 flex justify-between items-end">
            <div>
                <h1 class="text-3xl font-bold text-white mb-1">Títulos - Inadimplência</h1>
                <p class="text-slate-400">Monitoramento de pagamentos pendentes</p>
            </div>
        </header>

        <div class="filter-wrapper-sentinel">
            <div class="sticky-filters mb-6 p-6 glass-filter-box rounded-2xl border border-slate-800/50 shadow-lg">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
                    <!-- Hierarchy Filters -->
                    <div id="titulos-coord-filter-wrapper" class="relative">
                        <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Coordenador</label>
                        <button id="titulos-coord-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between"><span id="titulos-coord-filter-text">Todos</span></button>
                        <div id="titulos-coord-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                    </div>
                    <div id="titulos-cocoord-filter-wrapper" class="relative">
                        <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Co-Coordenador</label>
                        <button id="titulos-cocoord-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between"><span id="titulos-cocoord-filter-text">Todos</span></button>
                        <div id="titulos-cocoord-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                    </div>
                    <div id="titulos-promotor-filter-wrapper" class="relative">
                        <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Promotor</label>
                        <button id="titulos-promotor-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between"><span id="titulos-promotor-filter-text">Todos</span></button>
                        <div id="titulos-promotor-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                    </div>
                    <!-- Rede Filter -->
                    <div id="titulos-rede-filter-wrapper" class="relative z-20">
                        <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Rede</label>
                        <div id="titulos-rede-group-container" class="inline-flex rounded-lg glass-panel p-1 w-full">
                            <button type="button" data-group="" class="group-btn active flex-1 py-2 text-xs font-bold rounded-md">Todos</button>
                            <button type="button" data-group="com_rede" id="titulos-com-rede-btn" class="group-btn flex-1 py-2 text-xs font-medium text-slate-400 hover:text-white rounded-md flex justify-center gap-1">
                                <span id="titulos-com-rede-btn-text">C/Rede</span>
                                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg>
                            </button>
                            <button type="button" data-group="sem_rede" class="group-btn flex-1 py-2 text-xs font-medium text-slate-400 hover:text-white rounded-md">S/Rede</button>
                        </div>
                        <div id="titulos-rede-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-2"></div>
                    </div>
                    <!-- Client Search -->
                    <div class="relative">
                        <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Cliente</label>
                        <input id="titulos-codcli-filter" class="w-full glass-input border border-slate-700 text-white text-sm rounded-lg p-2.5" placeholder="Código, Nome...">
                        <div id="titulos-codcli-filter-suggestions" class="hidden absolute z-30 w-full mt-1 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-2"></div>
                    </div>
                </div>
                <div class="flex justify-end mt-4">
                    <button id="clear-titulos-filters-btn" class="bg-slate-700 hover:bg-slate-600 text-white font-bold py-2.5 px-4 rounded-lg">Limpar</button>
                </div>
            </div>
        </div>

        <!-- KPIs -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div class="kpi-card kpi-glow-red p-6">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">Total a Receber</p>
                        <h3 id="titulos-kpi-total-debt" class="text-3xl font-bold text-white">R$ 0,00</h3>
                        <p class="text-slate-500 text-xs mt-1">Valor em aberto</p>
                    </div>
                    <div class="p-2 bg-red-500/10 rounded-lg"><svg class="w-6 h-6 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div>
                </div>
            </div>
            <div class="kpi-card kpi-glow-orange p-6">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">Críticos (>60 Dias)</p>
                        <h3 id="titulos-kpi-critical-debt" class="text-3xl font-bold text-white">R$ 0,00</h3>
                        <p class="text-slate-500 text-xs mt-1" id="titulos-kpi-critical-count">0 Clientes</p>
                    </div>
                    <div class="p-2 bg-orange-500/10 rounded-lg"><svg class="w-6 h-6 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div>
                </div>
            </div>
            <div class="kpi-card kpi-glow-blue p-6">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">Qtd. Títulos</p>
                        <h3 id="titulos-kpi-count" class="text-3xl font-bold text-white">0</h3>
                        <p class="text-slate-500 text-xs mt-1">Total listado</p>
                    </div>
                    <div class="p-2 bg-blue-500/10 rounded-lg"><svg class="w-6 h-6 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg></div>
                </div>
            </div>
        </div>

        <!-- Table -->
        <div class="glass-panel rounded-2xl border border-slate-800/50 shadow-lg overflow-hidden">
            <div class="p-4 glass-panel border-b border-slate-800 flex justify-between items-center">
                <h3 class="font-bold text-white">Detalhamento</h3>
            </div>
            <div class="overflow-x-auto custom-scrollbar max-h-[600px]">
                <table class="min-w-full text-sm text-left text-slate-300">
                    <thead class="text-[10px] md:text-xs text-slate-400 uppercase glass-panel sticky top-0 z-10 hidden md:table-header-group">
                        <tr>
                            <th class="px-4 py-3 font-bold tracking-wider">Cód.</th>
                            <th class="px-4 py-3 font-bold tracking-wider">Cliente</th>
                            <th class="px-4 py-3 font-bold tracking-wider hidden md:table-cell">Vendedor</th>
                            <th class="px-4 py-3 font-bold tracking-wider hidden md:table-cell">Cidade</th>
                            <th class="px-4 py-3 font-bold tracking-wider text-center">Vencimento</th>
                            <th class="px-4 py-3 font-bold tracking-wider text-right hidden md:table-cell">Valor Orig.</th>
                            <th class="px-4 py-3 font-bold tracking-wider text-right">Valor Aberto</th>
                            <th class="px-4 py-3 font-bold tracking-wider text-center">Status</th>
                        </tr>
                    </thead>
                    <tbody id="titulos-table-body" class="divide-y divide-slate-800/50"></tbody>
                </table>
            </div>
            <div id="titulos-pagination-controls" class="p-4 glass-panel border-t border-slate-800 flex justify-between items-center">
                <button id="titulos-prev-page-btn" class="glass-panel hover:bg-white/5 text-white font-bold py-2 px-4 rounded-lg disabled:opacity-50 text-xs transition-colors">Anterior</button>
                <span id="titulos-page-info-text" class="text-slate-400 text-xs font-medium"></span>
                <button id="titulos-next-page-btn" class="glass-panel hover:bg-white/5 text-white font-bold py-2 px-4 rounded-lg disabled:opacity-50 text-xs transition-colors">Próxima</button>
            </div>
        </div>
    </div>

    <!-- LOJA PERFEITA VIEW -->
    <div id="loja-perfeita-view" class="hidden container mx-auto p-4 max-w-7xl animate-fade-in-up">
        <header class="mb-8 border-b border-slate-800 pb-4 flex justify-between items-end">
            <div>
                <h1 class="text-3xl font-bold text-white mb-1">Loja Perfeita</h1>
                <p class="text-slate-400">Auditoria e Notas de Execução</p>
            </div>
        </header>

        <div class="filter-wrapper-sentinel">
            <div class="sticky-filters mb-6 p-6 glass-filter-box rounded-2xl border border-slate-800/50 shadow-lg">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
                    <!-- Hierarchy Filters -->
                    <div id="lp-coord-filter-wrapper" class="relative">
                        <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Coordenador</label>
                        <button id="lp-coord-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between"><span id="lp-coord-filter-text">Todos</span></button>
                        <div id="lp-coord-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                    </div>
                    <div id="lp-cocoord-filter-wrapper" class="relative">
                        <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Co-Coordenador</label>
                        <button id="lp-cocoord-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between"><span id="lp-cocoord-filter-text">Todos</span></button>
                        <div id="lp-cocoord-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                    </div>
                    <div id="lp-promotor-filter-wrapper" class="relative">
                        <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Pesquisador (Promotor)</label>
                        <button id="lp-promotor-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between"><span id="lp-promotor-filter-text">Todos</span></button>
                        <div id="lp-promotor-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                    </div>

                    <!-- Rede Filter -->
                    <div id="lp-rede-filter-wrapper" class="relative z-20">
                        <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Rede</label>
                        <div id="lp-rede-group-container" class="inline-flex rounded-lg glass-panel p-1 w-full">
                            <button type="button" data-group="" class="group-btn active flex-1 py-2 text-xs font-bold rounded-md">Todos</button>
                            <button type="button" data-group="com_rede" id="lp-com-rede-btn" class="group-btn flex-1 py-2 text-xs font-medium text-slate-400 hover:text-white rounded-md flex justify-center gap-1">
                                <span id="lp-com-rede-btn-text">C/Rede</span>
                                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg>
                            </button>
                            <button type="button" data-group="sem_rede" class="group-btn flex-1 py-2 text-xs font-medium text-slate-400 hover:text-white rounded-md">S/Rede</button>
                        </div>
                        <div id="lp-rede-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-2"></div>
                    </div>

                    <!-- Client Search -->
                    <div class="relative">
                        <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Cliente</label>
                        <input id="lp-codcli-filter" class="w-full glass-input border border-slate-700 text-white text-sm rounded-lg p-2.5" placeholder="Código, Nome...">
                        <div id="lp-codcli-filter-suggestions" class="hidden absolute z-30 w-full mt-1 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-2"></div>
                    </div>
                </div>
                <div class="flex justify-end mt-4">
                    <button id="clear-lp-filters-btn" class="bg-slate-700 hover:bg-slate-600 text-white font-bold py-2.5 px-4 rounded-lg">Limpar</button>
                </div>
            </div>
        </div>

        <!-- KPIs -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div class="kpi-card kpi-glow-yellow p-6">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">Nota Média</p>
                        <h3 id="lp-kpi-avg-score" class="text-3xl font-bold text-white">0,0</h3>
                        <p class="text-slate-500 text-xs mt-1">Pontuação Geral</p>
                    </div>
                    <div class="p-2 bg-yellow-500/10 rounded-lg"><svg class="w-6 h-6 text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path></svg></div>
                </div>
            </div>
            <div class="kpi-card kpi-glow-blue p-6">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">Total Auditorias</p>
                        <h3 id="lp-kpi-total-audits" class="text-3xl font-bold text-white">0</h3>
                        <p class="text-slate-500 text-xs mt-1">Pesquisas Realizadas</p>
                    </div>
                    <div class="p-2 bg-blue-500/10 rounded-lg"><svg class="w-6 h-6 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg></div>
                </div>
            </div>
            <div class="kpi-card kpi-glow-green p-6">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">Lojas Perfeitas</p>
                        <h3 id="lp-kpi-perfect-stores" class="text-3xl font-bold text-white">0%</h3>
                        <p class="text-slate-500 text-xs mt-1" id="lp-kpi-perfect-count">0 Lojas</p>
                    </div>
                    <div class="p-2 bg-green-500/10 rounded-lg"><svg class="w-6 h-6 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div>
                </div>
            </div>
        </div>

        <!-- Table -->
        <div class="glass-panel rounded-2xl border border-slate-800/50 shadow-lg overflow-hidden">
            <div class="p-4 glass-panel border-b border-slate-800 flex justify-between items-center">
                <h3 class="font-bold text-white">Detalhamento por Cliente</h3>
            </div>
            <div class="overflow-x-auto custom-scrollbar max-h-[600px]">
                <table class="min-w-full text-sm text-left text-slate-300">
                    <thead class="text-[10px] md:text-xs text-slate-400 uppercase glass-panel sticky top-0 z-10">
                        <tr>
                            <th class="px-4 py-3 font-bold tracking-wider hidden md:table-cell">Cód.</th>
                            <th class="px-4 py-3 font-bold tracking-wider">Cliente</th>
                            <th class="px-4 py-3 font-bold tracking-wider hidden md:table-cell">Pesquisador</th>
                            <th class="px-4 py-3 font-bold tracking-wider hidden md:table-cell">Cidade</th>
                            <th class="px-4 py-3 font-bold tracking-wider text-center">Nota</th>
                        </tr>
                    </thead>
                    <tbody id="lp-table-body" class="divide-y divide-slate-800/50"></tbody>
                </table>
            </div>
            <div id="lp-pagination-controls" class="p-4 glass-panel border-t border-slate-800 flex justify-between items-center">
                <button id="lp-prev-page-btn" class="glass-panel hover:bg-white/5 text-white font-bold py-2 px-4 rounded-lg disabled:opacity-50 text-xs transition-colors">Anterior</button>
                <span id="lp-page-info-text" class="text-slate-400 text-xs font-medium"></span>
                <button id="lp-next-page-btn" class="glass-panel hover:bg-white/5 text-white font-bold py-2 px-4 rounded-lg disabled:opacity-50 text-xs transition-colors">Próxima</button>
            </div>
        </div>
    </div>

    <!-- HISTORY VIEW -->
    <div id="history-view" class="hidden container mx-auto p-4 max-w-7xl animate-fade-in-up">
        <header class="mb-8 border-b border-slate-800 pb-4">
            <h1 class="text-3xl font-bold text-white">Histórico de Pedidos</h1>
            <p class="text-slate-400 text-sm mt-1">Selecione um período para visualizar os pedidos.</p>
        </header>

        <div class="filter-wrapper-sentinel">
            <div class="sticky-filters mb-6 p-6 glass-filter-box rounded-2xl border border-slate-800/50 shadow-lg">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4">
                    <!-- Date Range -->
                    <div>
                        <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Data Inicial</label>
                        <input type="date" id="history-date-start" class="w-full glass-input border border-slate-700 text-white text-sm rounded-lg p-2.5 focus:ring-2 focus:ring-[#FF5E00]">
                    </div>
                    <div>
                        <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Data Final</label>
                        <input type="date" id="history-date-end" class="w-full glass-input border border-slate-700 text-white text-sm rounded-lg p-2.5 focus:ring-2 focus:ring-[#FF5E00]">
                    </div>
                    <!-- Status Filter -->
                    <div>
                        <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Posição</label>
                        <select id="history-posicao-filter" class="glass-input border border-slate-700 text-white text-sm rounded-lg focus:ring-2 focus:ring-[#FF5E00] block w-full p-2.5">
                            <option value="">Todas</option>
                            <option value="L">Liberado</option>
                            <option value="M">Montado</option>
                            <option value="F">Faturado</option>
                        </select>
                    </div>
                    <div class="flex items-end">
                        <button id="history-filter-btn" class="w-full bg-[#FF5E00] hover:bg-[#CC4A00] text-white font-bold py-2.5 px-4 rounded-lg transition-colors shadow-lg flex items-center justify-center gap-2">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                            Filtrar
                        </button>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 items-end border-t border-slate-800/50 pt-4">
                    <!-- Hierarchy Filters -->
                    <div id="history-coord-filter-wrapper" class="relative">
                        <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Coordenador</label>
                        <button id="history-coord-filter-btn" class="w-full glass-panel p-2.5 rounded-lg text-left text-sm text-slate-300 flex justify-between"><span id="history-coord-filter-text">Todos</span></button>
                        <div id="history-coord-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                    </div>
                    <div id="history-cocoord-filter-wrapper" class="relative">
                        <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Co-Coordenador</label>
                        <button id="history-cocoord-filter-btn" class="w-full glass-panel p-2.5 rounded-lg text-left text-sm text-slate-300 flex justify-between"><span id="history-cocoord-filter-text">Todos</span></button>
                        <div id="history-cocoord-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                    </div>
                    <div id="history-promotor-filter-wrapper" class="relative">
                        <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Promotor</label>
                        <button id="history-promotor-filter-btn" class="w-full glass-panel p-2.5 rounded-lg text-left text-sm text-slate-300 flex justify-between"><span id="history-promotor-filter-text">Todos</span></button>
                        <div id="history-promotor-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                    </div>
                    <!-- Other Filters -->
                    <div class="relative">
                        <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Fornecedor</label>
                        <button id="history-supplier-filter-btn" class="w-full glass-panel text-slate-300 text-sm rounded-lg p-2.5 text-left flex justify-between"><span id="history-supplier-filter-text">Todos</span></button>
                        <div id="history-supplier-filter-dropdown" class="hidden absolute z-30 w-full mt-2 glass-panel rounded-xl shadow-2xl p-2"></div>
                    </div>
                    <div class="relative">
                        <label class="block mb-2 text-xs font-bold text-slate-500 uppercase">Cliente</label>
                        <input id="history-codcli-filter" placeholder="Buscar..." class="glass-input border border-slate-700 text-white text-sm rounded-lg block w-full p-2.5">
                    </div>
                </div>
            </div>
        </div>

        <!-- Results Table -->
        <div class="glass-panel rounded-2xl border border-slate-800/50 shadow-lg overflow-hidden">
            <div class="p-4 glass-panel border-b border-slate-800 flex justify-between items-center">
                <h3 class="font-bold text-white flex items-center gap-2">
                    Resultados
                    <span id="history-count-badge" class="bg-slate-700 text-slate-300 text-xs px-2 py-0.5 rounded-full">0</span>
                </h3>
            </div>
            <div class="overflow-x-auto custom-scrollbar" style="max-height: 70vh;">
                <table class="min-w-full text-sm text-left text-slate-300">
                    <thead class="text-xs text-slate-400 uppercase glass-panel sticky top-0 z-10">
                        <tr>
                            <th class="px-2 py-2 md:px-2 md:py-3 font-bold tracking-wider text-[10px] md:text-xs">Data</th>
                            <th class="px-2 py-2 md:px-2 md:py-3 font-bold tracking-wider text-[10px] md:text-xs">Nº Pedido</th>
                            <th class="px-2 py-2 md:px-2 md:py-3 font-bold tracking-wider text-[10px] md:text-xs">Cliente</th>
                            <th class="px-2 py-2 md:px-2 md:py-3 font-bold tracking-wider text-[10px] md:text-xs hidden md:table-cell">Vendedor</th>
                            <th class="px-2 py-2 md:px-2 md:py-3 font-bold tracking-wider text-[10px] md:text-xs hidden md:table-cell">Fornecedor</th>
                            <th class="px-2 py-2 md:px-2 md:py-3 font-bold tracking-wider text-right text-[10px] md:text-xs">Valor</th>
                            <th class="px-2 py-2 md:px-2 md:py-3 font-bold tracking-wider text-center text-[10px] md:text-xs">Status</th>
                        </tr>
                    </thead>
                    <tbody id="history-table-body" class="divide-y divide-slate-800/50">
                        <!-- Empty State initially -->
                        <tr id="history-empty-state">
                            <td colspan="7" class="px-6 py-12 text-center text-slate-500">
                                <div class="flex flex-col items-center justify-center">
                                    <svg class="w-12 h-12 mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                                    <p class="text-lg font-medium">Nenhum período selecionado</p>
                                    <p class="text-sm">Utilize os filtros acima para buscar o histórico.</p>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- Pagination -->
            <div id="history-pagination-controls" class="hidden p-4 glass-panel border-t border-slate-800 flex justify-between items-center">
                <button id="history-prev-page-btn" class="glass-panel hover:bg-white/5 text-white font-bold py-2 px-4 rounded-lg disabled:opacity-50 text-xs transition-colors">Anterior</button>
                <span id="history-page-info-text" class="text-slate-400 text-xs font-medium"></span>
                <button id="history-next-page-btn" class="glass-panel hover:bg-white/5 text-white font-bold py-2 px-4 rounded-lg disabled:opacity-50 text-xs transition-colors">Próxima</button>
            </div>
        </div>
    </div>

    <!-- CLIENTES VIEW -->
    <div id="clientes-view" class="hidden container mx-auto p-4 max-w-7xl animate-fade-in-up">
        <header class="mb-4 border-b border-slate-800 pb-4 flex flex-col sm:flex-row justify-between items-start sm:items-center sticky top-16 bg-[#020617] z-10 pt-4 gap-4 sm:gap-0">
            <div class="flex items-center justify-between sm:justify-start gap-4 w-full sm:w-auto">
                <h1 class="text-2xl sm:text-3xl font-bold text-white">Clientes</h1>
                <button id="toggle-roteiro-btn" class="glass-panel hover:bg-white/5 text-white text-sm font-bold py-2 px-3 sm:px-4 rounded-lg border border-slate-700 transition-colors flex items-center gap-2">
                    <svg class="w-4 h-4 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                    Roteiro
                </button>
            </div>
            <div class="relative w-full sm:w-auto">
                <input type="text" id="clientes-search" placeholder="Pesquisar..." class="glass-input border border-slate-700 text-white text-sm rounded-lg focus:ring-2 focus:ring-[#FF5E00] block w-full sm:w-64 pl-3 p-2.5">
                <div id="clientes-search-suggestions" class="hidden absolute z-30 w-full mt-1 glass-panel rounded-xl shadow-2xl max-h-60 overflow-y-auto custom-scrollbar p-0 overflow-hidden"></div>
            </div>
        </header>

        <!-- Roteiro View Container (Hidden by default) -->
        <div id="roteiro-container" class="hidden mb-6 animate-fade-in-up">
            <div id="roteiro-main-card" class="glass-panel text-slate-300 rounded-xl shadow-lg overflow-hidden mb-6 border border-slate-800">
                <!-- Calendar Header -->
                <div class="p-4 border-b border-slate-800 flex justify-between items-center">
                    <div class="flex items-center gap-2">
                        <button id="roteiro-prev-day" class="p-2 hover:glass-panel rounded-full"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button>
                        <h2 id="roteiro-current-month" class="text-xl font-bold capitalize">Fevereiro</h2>
                        <button id="roteiro-next-day" class="p-2 hover:glass-panel rounded-full"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button>
                    </div>
                    <div class="text-2xl font-bold text-slate-500" id="roteiro-day-number">--</div>
                </div>

                <!-- Calendar Strip -->
                <div id="roteiro-calendar-strip" class="flex justify-between p-2 overflow-x-auto no-scrollbar">
                    <!-- Days injected by JS -->
                </div>

                <!-- Daily Stats -->
                <div id="roteiro-stats-panel" class="p-4 glass-panel border-t border-slate-800">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-sm font-bold text-white" id="roteiro-date-display">-- de --</span>
                        <span class="text-sm text-slate-400" id="roteiro-client-count">0 clientes</span>
                    </div>

                    <div class="space-y-3">
                        <div>
                            <div class="flex justify-between text-xs font-bold uppercase text-slate-400 mb-1">
                                <span>Atendimento</span>
                                <span id="roteiro-progress-visit-text">0,00%</span>
                            </div>
                            <div class="w-full bg-slate-700 rounded-full h-2">
                                <div id="roteiro-progress-visit-bar" class="bg-[#FF5E00] h-2 rounded-full" style="width: 0%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-xs font-bold uppercase text-slate-400 mb-1">
                                <span>Pesquisas</span>
                                <span id="roteiro-progress-pos-text">0,00%</span>
                            </div>
                            <div class="w-full bg-slate-700 rounded-full h-2">
                                <div id="roteiro-progress-pos-bar" class="bg-green-500 h-2 rounded-full" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Empty State Illustration -->
            <div id="roteiro-empty-state" class="hidden flex flex-col items-center justify-center p-12 text-center">
                <div class="w-48 h-48 bg-glass rounded-full flex items-center justify-center mb-6">
                    <svg class="w-24 h-24 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                </div>
                <h3 class="text-xl font-bold text-white mb-2">Dia Livre</h3>
                <p class="text-slate-400">Nenhum cliente agendado para esta data.</p>
            </div>
        </div>

        <div id="clientes-list-view-wrapper">
            <div class="glass-panel rounded-xl shadow-lg overflow-hidden border border-slate-800">
                <div id="clientes-list-container" class="divide-y divide-slate-800">
                    <!-- List Items injected by JS -->
                </div>
            </div>
            <div class="mt-4 text-center text-slate-500 text-sm" id="clientes-count"></div>
        </div>
    </div>

    <!-- PRODUTOS VIEW -->
    <div id="produtos-view" class="hidden container mx-auto p-4 max-w-7xl animate-fade-in-up">
        <header class="mb-4 border-b border-slate-800 pb-4 flex justify-between items-center sticky top-16 bg-[#020617] z-10 pt-4">
            <div class="flex items-center gap-4">
                <h1 class="text-3xl font-bold text-white">Produtos</h1>
            </div>
            <div class="flex items-center gap-2">
                <div class="relative">
                    <input type="text" id="produtos-search" placeholder="Pesquisar..." class="glass-input border border-slate-700 text-white text-sm rounded-lg focus:ring-2 focus:ring-[#FF5E00] block w-40 sm:w-64 pl-3 p-2.5">
                </div>
                <div class="relative">
                    <button id="produtos-options-btn" class="p-2 text-slate-400 hover:text-white rounded-full hover:bg-slate-700 transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"></path></svg>
                    </button>
                    <div id="produtos-options-dropdown" class="hidden absolute right-0 mt-2 w-48 glass-panel rounded-xl shadow-2xl py-1 z-50 animate-fade-in-down origin-top-right border border-slate-700">
                        <button id="produtos-legends-btn" class="w-full text-left px-4 py-3 text-sm text-slate-300 hover:bg-white/5 hover:text-white transition-colors flex items-center gap-2">
                            <svg class="w-4 h-4 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                            Legendas
                        </button>
                    </div>
                </div>
            </div>
        </header>
        <div class="glass-panel rounded-xl shadow-lg overflow-hidden border border-slate-800">
            <div id="produtos-list-container" class="divide-y divide-slate-800">
                <!-- List Items injected by JS -->
            </div>
        </div>
        <div class="mt-4 text-center text-slate-500 text-sm" id="produtos-count"></div>
    </div>

                        <!-- Ecrã AI Insights Full Page -->
                        <div id="ai-insights-full-page" class="hidden container mx-auto p-4 sm:p-6 lg:p-8">
                            <header class="mb-6 -mt-4 -mx-4 sm:-mt-6 sm:-mx-6 lg:-mt-8 lg:-mx-8 p-6 bg-gradient-to-r from-indigo-900 to-slate-900 rounded-b-lg shadow-lg">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center gap-4">
                                        <button id="ai-insights-back-btn" class="text-white hover:text-indigo-300 transition-colors flex items-center gap-2 font-bold">
                                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                                            Voltar
                                        </button>
                                        <div>
                                            <h1 class="text-2xl font-bold text-white">Análise de Inteligência Artificial</h1>
                                            <p class="text-slate-300">Insights Detalhados de Metas</p>
                                        </div>
                                    </div>
                                    <button id="ai-insights-export-btn" class="bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-6 rounded-lg shadow-lg flex items-center gap-2">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                                        Exportar HTML
                                    </button>
                                </div>
                            </header>
                            <div id="ai-insights-full-content" class="space-y-8">
                                <!-- AI Content will be injected here -->
                            </div>
                        </div>

</div>

<!-- MODAL DE RELATORIO / PESQUISA -->
<div id="modal-relatorio" class="modal-overlay hidden z-[3000]">
    <div class="bg-modal-content max-w-lg w-full m-4 p-6 rounded-2xl shadow-2xl border border-slate-700 glass-panel max-h-[90vh] overflow-y-auto custom-scrollbar">
        <div class="flex justify-between items-start mb-6 border-b border-slate-800 pb-4">
            <h3 class="text-xl font-bold text-white">Relatório de Visita</h3>
            <span class="text-slate-400 hover:text-white cursor-pointer text-2xl leading-none" onclick="closeResearchModal()">&times;</span>
        </div>
        <form id="form-visita" class="space-y-6">
            <input type="hidden" id="visita-atual-id" name="visita_id">
            <p class="text-xs text-blue-400 bg-blue-900/20 p-3 rounded-lg flex items-center gap-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                Carregamos os dados da última visita.
            </p>

            <div class="space-y-2">
                <label class="block text-sm font-bold text-slate-300">Estado da Gôndola:</label>
                <select name="estado_gondola" required class="w-full glass-input border border-slate-600 rounded-lg p-3 text-white focus:ring-2 focus:ring-[#FF5E00]">
                    <option value="Excelente">Excelente</option>
                    <option value="Boa">Boa</option>
                    <option value="Bagunçada">Bagunçada</option>
                    <option value="Critica">Crítica</option>
                </select>
            </div>

            <div class="pt-4 border-t border-slate-800">
                <h4 class="text-sm font-bold text-slate-400 uppercase mb-3">Check-in Elma Chips</h4>
                <div class="space-y-4">
                    <!-- 1. Tipo de Rack -->
                    <div>
                        <label class="block text-sm font-medium text-slate-300 mb-1">Qual tipo de Rack da Elma Chips?</label>
                        <div class="relative" id="rack-multiselect-container">
                            <input type="hidden" name="tipo_rack" id="tipo_rack_hidden">
                            <button type="button" id="rack-multiselect-btn" class="w-full glass-panel rounded-lg p-3 text-white text-left flex justify-between items-center focus:ring-2 focus:ring-[#FF5E00] hover:bg-white/5 transition-colors">
                                <span id="rack-multiselect-text" class="truncate text-slate-400">Selecione...</span>
                                <svg class="w-4 h-4 text-slate-500 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                            </button>
                            <div id="rack-multiselect-dropdown" class="hidden absolute z-50 w-full mt-1 glass-panel rounded-lg shadow-xl max-h-60 overflow-y-auto custom-scrollbar">
                                <!-- Options injected by JS -->
                            </div>
                        </div>
                    </div>

                    <!-- Helper to create Yes/No structure -->
                    <div class="grid grid-cols-1 gap-4">
                        <!-- 2. Seção -->
                        <div class="flex flex-col gap-2 bg-glass p-3 rounded-lg border border-slate-700/50">
                            <label class="text-sm font-medium text-slate-300">Tem seção de Elma Chips?</label>
                            <div class="flex gap-4">
                                <label class="flex items-center gap-2 cursor-pointer">
                                    <input type="radio" name="tem_secao" value="Sim" class="w-4 h-4 text-[#FF5E00] bg-slate-700 border-slate-600 focus:ring-[#FF5E00]">
                                    <span class="text-slate-300 text-sm">Sim</span>
                                </label>
                                <label class="flex items-center gap-2 cursor-pointer">
                                    <input type="radio" name="tem_secao" value="Nao" checked class="w-4 h-4 text-[#FF5E00] bg-slate-700 border-slate-600 focus:ring-[#FF5E00]">
                                    <span class="text-slate-300 text-sm">Não</span>
                                </label>
                            </div>
                        </div>

                        <!-- 3. Checkout 50% -->
                        <div class="flex flex-col gap-2 bg-glass p-3 rounded-lg border border-slate-700/50">
                            <label class="text-sm font-medium text-slate-300">Tem 50% do Checkout?</label>
                            <div class="flex gap-4">
                                <label class="flex items-center gap-2 cursor-pointer">
                                    <input type="radio" name="tem_checkout" value="Sim" class="w-4 h-4 text-[#FF5E00] bg-slate-700 border-slate-600 focus:ring-[#FF5E00]">
                                    <span class="text-slate-300 text-sm">Sim</span>
                                </label>
                                <label class="flex items-center gap-2 cursor-pointer">
                                    <input type="radio" name="tem_checkout" value="Nao" checked class="w-4 h-4 text-[#FF5E00] bg-slate-700 border-slate-600 focus:ring-[#FF5E00]">
                                    <span class="text-slate-300 text-sm">Não</span>
                                </label>
                            </div>
                        </div>

                        <!-- 4. Correlatos Bebidas -->
                        <div class="flex flex-col gap-2 bg-glass p-3 rounded-lg border border-slate-700/50">
                            <label class="text-sm font-medium text-slate-300">Tem Correlatos Seção de Bebidas?</label>
                            <div class="flex gap-4">
                                <label class="flex items-center gap-2 cursor-pointer">
                                    <input type="radio" name="tem_correlatos_bebidas" value="Sim" class="w-4 h-4 text-[#FF5E00] bg-slate-700 border-slate-600 focus:ring-[#FF5E00]">
                                    <span class="text-slate-300 text-sm">Sim</span>
                                </label>
                                <label class="flex items-center gap-2 cursor-pointer">
                                    <input type="radio" name="tem_correlatos_bebidas" value="Nao" checked class="w-4 h-4 text-[#FF5E00] bg-slate-700 border-slate-600 focus:ring-[#FF5E00]">
                                    <span class="text-slate-300 text-sm">Não</span>
                                </label>
                            </div>
                        </div>

                        <!-- 5. Correlatos Molho -->
                        <div class="flex flex-col gap-2 bg-glass p-3 rounded-lg border border-slate-700/50">
                            <label class="text-sm font-medium text-slate-300">Tem Correlatos Seção de Molho?</label>
                            <div class="flex gap-4">
                                <label class="flex items-center gap-2 cursor-pointer">
                                    <input type="radio" name="tem_correlatos_molho" value="Sim" class="w-4 h-4 text-[#FF5E00] bg-slate-700 border-slate-600 focus:ring-[#FF5E00]">
                                    <span class="text-slate-300 text-sm">Sim</span>
                                </label>
                                <label class="flex items-center gap-2 cursor-pointer">
                                    <input type="radio" name="tem_correlatos_molho" value="Nao" checked class="w-4 h-4 text-[#FF5E00] bg-slate-700 border-slate-600 focus:ring-[#FF5E00]">
                                    <span class="text-slate-300 text-sm">Não</span>
                                </label>
                            </div>
                        </div>

                        <!-- 6. Correlatos Biscoito -->
                        <div class="flex flex-col gap-2 bg-glass p-3 rounded-lg border border-slate-700/50">
                            <label class="text-sm font-medium text-slate-300">Tem Correlatos Seção de Biscoito?</label>
                            <div class="flex gap-4">
                                <label class="flex items-center gap-2 cursor-pointer">
                                    <input type="radio" name="tem_correlatos_biscoito" value="Sim" class="w-4 h-4 text-[#FF5E00] bg-slate-700 border-slate-600 focus:ring-[#FF5E00]">
                                    <span class="text-slate-300 text-sm">Sim</span>
                                </label>
                                <label class="flex items-center gap-2 cursor-pointer">
                                    <input type="radio" name="tem_correlatos_biscoito" value="Nao" checked class="w-4 h-4 text-[#FF5E00] bg-slate-700 border-slate-600 focus:ring-[#FF5E00]">
                                    <span class="text-slate-300 text-sm">Não</span>
                                </label>
                            </div>
                        </div>

                        <!-- 7. Ilha Elma Chips -->
                        <div class="flex flex-col gap-2 bg-glass p-3 rounded-lg border border-slate-700/50">
                            <label class="text-sm font-medium text-slate-300">Ilha de Elma Chips na loja?</label>
                            <div class="flex gap-4">
                                <label class="flex items-center gap-2 cursor-pointer">
                                    <input type="radio" name="tem_ilha" value="Sim" class="w-4 h-4 text-[#FF5E00] bg-slate-700 border-slate-600 focus:ring-[#FF5E00]">
                                    <span class="text-slate-300 text-sm">Sim</span>
                                </label>
                                <label class="flex items-center gap-2 cursor-pointer">
                                    <input type="radio" name="tem_ilha" value="Nao" checked class="w-4 h-4 text-[#FF5E00] bg-slate-700 border-slate-600 focus:ring-[#FF5E00]">
                                    <span class="text-slate-300 text-sm">Não</span>
                                </label>
                            </div>
                        </div>

                        <!-- 8. Ponto Extra -->
                        <div class="flex flex-col gap-2 bg-glass p-3 rounded-lg border border-slate-700/50">
                            <label class="text-sm font-medium text-slate-300">Tem Ponto Extra na loja?</label>
                            <div class="flex gap-4">
                                <label class="flex items-center gap-2 cursor-pointer">
                                    <input type="radio" name="tem_ponto_extra" value="Sim" class="w-4 h-4 text-[#FF5E00] bg-slate-700 border-slate-600 focus:ring-[#FF5E00]">
                                    <span class="text-slate-300 text-sm">Sim</span>
                                </label>
                                <label class="flex items-center gap-2 cursor-pointer">
                                    <input type="radio" name="tem_ponto_extra" value="Nao" checked class="w-4 h-4 text-[#FF5E00] bg-slate-700 border-slate-600 focus:ring-[#FF5E00]">
                                    <span class="text-slate-300 text-sm">Não</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="space-y-2">
                <label class="block text-sm font-bold text-slate-300">Foto da Gôndola (Opcional):</label>
                <input type="file" name="foto_gondola" id="visita-foto-input" accept="image/*" class="hidden">
                <input type="file" id="visita-foto-input-camera" accept="image/*" capture="environment" class="hidden">

                <div id="visita-foto-trigger" class="w-full glass-panel border-2 border-dashed border-slate-600 rounded-lg p-4 text-center hover:border-slate-500 transition-all">
                    <p class="text-sm font-medium text-white mb-4">Selecione a origem:</p>
                    <div class="flex justify-center gap-4">
                        <div id="trigger-camera-btn" class="flex flex-col items-center justify-center gap-2 cursor-pointer group p-3 bg-slate-700/50 rounded-xl hover:bg-white/5 transition-colors w-24">
                            <div class="w-10 h-10 bg-[#FF5E00]/20 rounded-full flex items-center justify-center text-blue-400 group-hover:bg-[#FF5E00] group-hover:text-white transition-colors">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                            </div>
                            <span class="text-xs text-slate-300 font-bold">Câmera</span>
                        </div>
                        
                        <div id="trigger-gallery-btn" class="flex flex-col items-center justify-center gap-2 cursor-pointer group p-3 bg-slate-700/50 rounded-xl hover:bg-white/5 transition-colors w-24">
                            <div class="w-10 h-10 bg-purple-600/20 rounded-full flex items-center justify-center text-purple-400 group-hover:bg-purple-600 group-hover:text-white transition-colors">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                            </div>
                            <span class="text-xs text-slate-300 font-bold">Galeria</span>
                        </div>
                    </div>
                </div>

                <div id="visita-foto-preview" class="hidden w-full glass-panel rounded-lg p-3 flex items-center justify-between">
                    <div class="flex items-center gap-3 overflow-hidden">
                        <div class="w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center text-green-400">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        </div>
                        <div class="flex-1 min-w-0">
                            <p class="text-sm font-bold text-white truncate" id="visita-foto-filename">foto.jpg</p>
                            <p class="text-xs text-green-400">Pronto para envio</p>
                        </div>
                    </div>
                    <button type="button" id="visita-foto-remove" class="p-2 text-slate-400 hover:text-red-400 transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                    </button>
                </div>
            </div>

            <div class="space-y-2">
                <label class="block text-sm font-bold text-slate-300">Observações:</label>
                <textarea name="observacoes" rows="3" class="w-full glass-input border border-slate-600 rounded-lg p-3 text-white focus:ring-2 focus:ring-[#FF5E00]" placeholder="Alguma observação importante?"></textarea>
            </div>

            <button type="submit" class="w-full bg-[#FF5E00] hover:bg-[#CC4A00] text-white font-bold py-3 px-4 rounded-xl shadow-lg transition-transform active:scale-95 flex items-center justify-center gap-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                Salvar e Enviar
            </button>
        </form>
    </div>
</div>

<!-- MODAL DE ACOES DA VISITA (MINI MENU REFACTORED) -->
<div id="modal-acoes-visita" class="modal-overlay hidden z-[2900]">
    <div class="bg-modal-content max-w-sm w-full m-4 p-0 rounded-3xl shadow-2xl border border-slate-700 glass-panel overflow-hidden relative transform transition-all">
        <!-- Header with Client Info -->
        <div class="p-6 pb-4 bg-transparent border-b border-white/5">
            <div class="flex justify-between items-start mb-4">
                <div class="w-12 h-12 rounded-2xl bg-[#FF5E00]/20 flex items-center justify-center text-blue-400 shadow-inner ring-1 ring-white/5">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m8-2a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                </div>
                <button class="bg-glass p-2 rounded-full text-slate-400 hover:text-white transition-colors hover:bg-white/5" onclick="document.getElementById('modal-acoes-visita').classList.add('hidden')">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            <h3 id="acoes-visita-titulo" class="text-xl font-bold text-white leading-tight">Cliente</h3>
            <p id="acoes-visita-subtitulo" class="text-sm text-slate-400 mt-1 font-medium">Gestão de Visita</p>
        </div>

        <!-- Main Status / Action Card -->
        <div class="px-6 py-2">
            <div id="status-card-visita" class="bg-glass rounded-2xl p-4 border border-slate-700/50 flex items-center justify-between backdrop-blur-sm">
                <div>
                    <p class="text-[10px] text-slate-500 uppercase font-bold tracking-wider mb-1">Status da Visita</p>
                    <p id="status-text-visita" class="text-sm font-bold text-white">Não Iniciada</p>
                </div>
                <!-- Action Buttons (Toggled) -->
                <button id="btn-acao-checkin" class="bg-green-600 hover:bg-green-500 text-white font-bold py-2.5 px-5 rounded-xl shadow-lg shadow-green-900/20 transition-all text-sm flex items-center gap-2 transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                    Check-in
                </button>
                <button id="btn-acao-checkout" class="hidden bg-red-600 hover:bg-red-500 text-white font-bold py-2.5 px-5 rounded-xl shadow-lg shadow-red-900/20 transition-all text-sm flex items-center gap-2 transform active:scale-95">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>
                    Check-out
                </button>
            </div>
        </div>

        <!-- Action Menu List -->
        <div class="p-6 pt-2 space-y-2.5">
            <!-- Pesquisa -->
            <button id="btn-acao-pesquisa" class="hidden w-full group flex items-center justify-between p-3.5 rounded-2xl bg-glass hover:glass-panel border border-transparent hover:border-slate-700 transition-all text-left">
                <div class="flex items-center gap-3.5">
                    <div class="p-2.5 bg-orange-500/10 rounded-xl text-orange-400 group-hover:bg-orange-500 group-hover:text-white transition-colors shadow-sm">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg>
                    </div>
                    <div>
                        <span class="block text-sm font-bold text-slate-200 group-hover:text-white transition-colors">Pesquisa</span>
                        <span class="block text-[11px] text-slate-500 group-hover:text-slate-400 transition-colors">Preencher formulário</span>
                    </div>
                </div>
                <svg class="w-4 h-4 text-slate-600 group-hover:text-slate-400 transform group-hover:translate-x-1 transition-all" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
            </button>

            <!-- Detalhes -->
            <button id="btn-acao-detalhes" class="w-full group flex items-center justify-between p-3.5 rounded-2xl bg-glass hover:glass-panel border border-transparent hover:border-slate-700 transition-all text-left">
                <div class="flex items-center gap-3.5">
                    <div class="p-2.5 bg-purple-500/10 rounded-xl text-purple-400 group-hover:bg-purple-500 group-hover:text-white transition-colors shadow-sm">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    </div>
                    <div>
                        <span class="block text-sm font-bold text-slate-200 group-hover:text-white transition-colors">Detalhes</span>
                        <span class="block text-[11px] text-slate-500 group-hover:text-slate-400 transition-colors">Ver ficha do cliente</span>
                    </div>
                </div>
                <svg class="w-4 h-4 text-slate-600 group-hover:text-slate-400 transform group-hover:translate-x-1 transition-all" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
            </button>

            <!-- Geo -->
            <button id="btn-acao-geo" class="w-full group flex items-center justify-between p-3.5 rounded-2xl bg-glass hover:glass-panel border border-transparent hover:border-slate-700 transition-all text-left">
                <div class="flex items-center gap-3.5">
                    <div class="p-2.5 bg-orange-500/10 rounded-xl text-orange-400 group-hover:bg-orange-500 group-hover:text-white transition-colors shadow-sm">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                    </div>
                    <div>
                        <span class="block text-sm font-bold text-slate-200 group-hover:text-white transition-colors">Localização</span>
                        <span class="block text-[11px] text-slate-500 group-hover:text-slate-400 transition-colors">Atualizar coordenadas</span>
                    </div>
                </div>
                <svg class="w-4 h-4 text-slate-600 group-hover:text-slate-400 transform group-hover:translate-x-1 transition-all" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
            </button>
        </div>
    </div>
</div>

<!-- MODAL DE ATUALIZACAO DE GEO -->
<div id="modal-geo-update" class="modal-overlay hidden z-[3100]">
    <div class="bg-modal-content max-w-md w-full m-4 p-0 rounded-2xl shadow-2xl border border-slate-700 glass-panel overflow-hidden relative">
        <div class="p-4 border-b border-slate-800 bg-glass flex justify-between items-center">
            <h3 class="text-lg font-bold text-white">Atualizar Posição</h3>
            <button class="text-slate-400 hover:text-white" onclick="closeGeoModal()">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
        </div>
        <div class="relative h-64 glass-panel">
            <div id="geo-update-map" class="w-full h-full z-0"></div>
            <div id="geo-update-loading" class="absolute inset-0 glass-panel/80 flex flex-col items-center justify-center z-10">
                <div class="spinner-orange mb-2"></div>
                <span class="text-sm text-slate-300">Obtendo localização...</span>
            </div>
        </div>
        <div class="p-4 glass-panel border-t border-slate-800">
            <p class="text-xs text-slate-400 mb-4 text-center">Verifique se o pino está na posição correta do estabelecimento.</p>
            <button id="btn-confirm-geo-update" class="w-full py-3 px-4 bg-[#FF5E00] hover:bg-[#CC4A00] text-white rounded-xl font-bold shadow-lg transition-all flex items-center justify-center gap-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                Confirmar Atualização
            </button>
        </div>
    </div>
</div>

    <!-- Modals (Hidden) -->
    <!-- Order Details (Refactored for Valid HTML) -->
    <div id="order-details-modal" class="modal-overlay hidden z-[9999]">
        <div class="bg-modal-content w-full max-w-4xl m-4 p-6 relative rounded-2xl shadow-2xl border border-slate-700 glass-panel max-h-[90vh] overflow-y-auto custom-scrollbar">
            <button id="modal-close-btn" class="absolute top-4 right-4 text-slate-400 hover:text-white transition-colors">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <div class="mb-6">
                <h3 class="text-2xl font-bold text-white flex items-center gap-2">
                    Pedido <span id="modal-pedido-id" class="text-blue-400 font-mono"></span>
                </h3>
                <div id="modal-header-info" class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-slate-300 bg-glass p-4 rounded-xl border border-slate-700/50"></div>
            </div>
            <div class="overflow-y-auto custom-scrollbar rounded-xl border border-slate-700/50 bg-glass max-h-[400px]">
                <table class="w-full text-sm text-left text-slate-300">
                    <thead class="glass-panel text-xs uppercase font-bold text-slate-400 sticky top-0 z-10">
                        <tr>
                            <th class="px-4 py-3">Produto</th>
                            <th class="px-4 py-3 text-right hidden md:table-cell">Qtd. UN.</th>
                            <th class="px-4 py-3 text-right hidden md:table-cell">VL. UN</th>
                            <th class="px-4 py-3 text-right hidden md:table-cell">Kg</th>
                            <th class="px-4 py-3 text-right hidden md:table-cell">Total</th>
                        </tr>
                    </thead>
                    <tbody id="modal-table-body" class="divide-y divide-slate-700/50"></tbody>
                </table>
            </div>
            <div id="modal-footer-total" class="mt-6 text-right text-2xl font-bold text-green-400"></div>
        </div>
    </div>

    <!-- Client Details (Refactored for UI) -->
    <div id="client-details-modal" class="modal-overlay hidden">
        <div class="bg-modal-content w-full max-w-2xl m-4 p-6 relative rounded-2xl shadow-2xl border border-slate-700 glass-panel">
            <button id="client-modal-close-btn" class="absolute top-4 right-4 text-slate-400 hover:text-white transition-colors">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <div id="client-modal-content"></div>
        </div>
    </div>
    <!-- Holidays -->
    <div id="holiday-modal" class="modal-overlay hidden"><div class="bg-modal-content"><button id="holiday-modal-close-btn"></button><div id="calendar-container"></div><button id="holiday-modal-done-btn"></button></div></div>
    <!-- Confirmation -->
    <div id="confirmation-modal" class="modal-overlay hidden"><div class="bg-modal-content"><p id="confirmation-message"></p><button id="confirmation-cancel-btn"></button><button id="confirmation-confirm-btn"></button></div></div>
    <!-- Admin Password Modal -->
    <div id="admin-password-modal" class="modal-overlay hidden z-[2500]">
        <div class="bg-modal-content max-w-sm w-full m-4 p-6 rounded-2xl shadow-2xl border border-slate-700 glass-panel/95 backdrop-blur-md text-center">
            <h3 class="text-xl font-bold text-white mb-4">Acesso Restrito</h3>
            <p class="text-slate-400 text-sm mb-6">Insira a senha de administrador para continuar.</p>
            <input type="password" id="admin-password-input" class="w-full glass-input border border-slate-700 rounded-lg p-3 text-white text-center mb-6 focus:ring-2 focus:ring-[#FF5E00] focus:border-transparent outline-none transition-all" placeholder="Senha">
            <div class="flex gap-3">
                <button id="admin-password-cancel-btn" class="flex-1 py-2 px-4 glass-panel hover:bg-white/5 text-slate-300 rounded-lg font-medium transition-colors">Cancelar</button>
                <button id="admin-password-confirm-btn" class="flex-1 py-2 px-4 bg-[#FF5E00] hover:bg-[#CC4A00] text-white rounded-lg font-bold shadow-lg transition-colors">Acessar</button>
            </div>
        </div>
    </div>

                        <!-- Modal Importar Metas -->
                        <div id="import-goals-modal" class="modal-overlay hidden">
                            <div class="glass-panel rounded-lg shadow-2xl max-w-6xl w-full m-4 text-slate-300 border border-slate-700 flex flex-col max-h-[90vh]">
                                <div class="p-4 border-b border-slate-700 flex justify-between items-center">
                                    <h2 class="text-lg font-bold text-white">Importar / Analisar Planilha de Metas</h2>
                                    <button id="import-goals-close-btn" class="text-slate-400 hover:text-white text-3xl">&times;</button>
                                </div>
                                <div class="p-6 flex-1 overflow-y-auto custom-scrollbar">
                                    <div id="import-drop-zone" class="border-2 border-dashed border-slate-600 rounded-lg p-8 mb-6 flex flex-col items-center justify-center transition-colors hover:border-teal-500 hover:bg-white/5/30 cursor-pointer">
                                        <svg class="w-12 h-12 text-slate-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                                        </svg>
                                        <p class="text-slate-300 font-medium mb-2">Arraste e solte o arquivo Excel aqui</p>
                                        <p class="text-slate-500 text-sm mb-4">ou</p>
                                        <label for="import-goals-file" class="bg-[#FF5E00] hover:bg-[#CC4A00] text-white font-bold py-2 px-6 rounded-lg cursor-pointer transition-colors shadow-lg">
                                            Selecionar Arquivo
                                        </label>
                                        <p class="text-xs text-slate-500 mt-4">Formatos suportados: .xlsx, .xls, .csv</p>
                                    </div>
                                    <input type="file" id="import-goals-file" class="hidden" accept=".xlsx, .xls, .csv">

                                    <div class="relative flex py-2 items-center mb-4">
                                        <div class="flex-grow border-t border-slate-700"></div>
                                        <span class="flex-shrink-0 mx-4 text-slate-500 text-xs uppercase font-bold">Ou colar texto</span>
                                        <div class="flex-grow border-t border-slate-700"></div>
                                    </div>

                                    <p class="mb-2 text-sm text-slate-400">Cole abaixo os dados copiados da planilha (Excel/Sheets). Certifique-se de incluir os cabeçalhos das colunas.</p>
                                    <textarea id="import-goals-textarea" class="w-full h-32 glass-panel border border-slate-600 rounded-lg p-3 text-xs font-mono text-white focus:ring-2 focus:ring-teal-500 focus:border-transparent mb-4" placeholder="Cole os dados aqui..."></textarea>

                                    <div class="flex justify-end gap-4 mb-6">
                                        <button id="import-goals-analyze-btn" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-6 rounded-lg flex items-center gap-2 shadow-lg">
                                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg>
                                            Analisar
                                        </button>
                                    </div>

                                    <!-- Analysis Report Container -->
                                    <div id="import-analysis-container" class="hidden border-t border-slate-700 pt-6">
                                        <div class="flex justify-between items-center mb-4">
                                            <h3 class="text-white font-bold text-lg">Relatório de Análise</h3>
                                            <div class="flex gap-3 items-center">
                                                <div id="import-summary-badges" class="flex gap-2">
                                                    <!-- Badges will be injected here -->
                                                </div>
                                                <button id="btn-generate-ai" class="bg-gradient-to-r from-[#FF5E00] to-purple-600 hover:from-[#CC4A00] hover:to-purple-500 text-white font-bold py-1 px-4 rounded-full text-sm flex items-center shadow-lg transition-all transform hover:scale-105">
                                                    ✨ Gerar Insights
                                                </button>
                                            </div>
                                        </div>

                                        <!-- AI Result Container -->
                                        <div id="ai-insights-result" class="hidden mb-6 p-1 rounded-lg bg-gradient-to-r from-slate-700 to-slate-800 p-[1px]">
                                            <div class="glass-panel rounded-lg p-6 relative overflow-hidden">
                                                <div class="absolute top-0 right-0 p-4 opacity-10 pointer-events-none">
                                                    <svg class="w-32 h-32 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"/><path d="M12 6a1 1 0 0 0-1 1v4H8a1 1 0 0 0 0 2h3v3a1 1 0 0 0 2 0v-3h3a1 1 0 0 0 0-2h-3V7a1 1 0 0 0-1-1z"/></svg>
                                                </div>
                                                <div class="flex flex-col md:flex-row gap-6">
                                                    <div class="flex-1">
                                                        <h4 class="text-transparent bg-clip-text bg-gradient-to-r from-teal-400 to-blue-400 font-bold text-lg mb-4 flex items-center">
                                                            <svg class="w-5 h-5 mr-2 text-teal-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                                                            Análise Inteligente de Metas
                                                        </h4>
                                                        <div id="ai-insights-content" class="text-sm text-slate-300 leading-relaxed space-y-2">
                                                            <!-- AI Content Injected Here -->
                                                        </div>
                                                    </div>
                                                    <div class="w-full md:w-1/3 flex flex-col justify-center items-center border-l border-slate-800 pl-6">
                                                        <div id="ai-chart-container" class="w-full h-40 relative">
                                                            <!-- Mini Chart -->
                                                        </div>
                                                        <p class="text-xs text-slate-500 mt-2 text-center">Visualização Resumida</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="glass-panel rounded-lg border border-slate-700 overflow-hidden">
                                            <div class="overflow-x-auto">
                                                <table class="min-w-full text-xs text-left text-slate-300">
                                                    <thead class="glass-panel text-slate-400 uppercase font-bold">
                                                        <tr>
                                                            <th class="px-4 py-3">Cód</th>
                                                            <th class="px-4 py-3">Vendedor</th>
                                                            <th class="px-4 py-3">Categoria / Coluna</th>
                                                            <th class="px-4 py-3 text-right">Valor Atual</th>
                                                            <th class="px-4 py-3 text-right">Novo Valor</th>
                                                            <th class="px-4 py-3 text-right">Diferença</th>
                                                            <th class="px-4 py-3 text-center">Status</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="import-analysis-table-body" class="divide-y divide-slate-800">
                                                        <!-- Diff rows injected here -->
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="p-4 border-t border-slate-700 flex justify-end gap-3 glass-panel rounded-b-lg">
                                    <button id="import-goals-cancel-btn" class="px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors">Cancelar</button>
                                    <button id="import-goals-confirm-btn" class="px-6 py-2 bg-green-600 hover:bg-green-500 text-white font-bold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                        Carregar Metas
                                    </button>
                                </div>
                            </div>
                        </div>

    <!-- System Diagnosis Modal -->
    <div id="diagnosis-modal" class="modal-overlay hidden z-[9999]">
        <div class="bg-modal-content max-w-4xl w-full m-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-white flex items-center gap-2">
                    <svg class="w-6 h-6 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    Diagnóstico do Sistema
                </h3>
                <button id="diagnosis-close-btn" class="text-slate-400 hover:text-white transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            <div class="glass-panel rounded-lg p-4 border border-slate-700 max-h-[60vh] overflow-y-auto">
                <pre id="diagnosis-content" class="text-xs text-green-400 font-mono whitespace-pre-wrap break-all select-all"></pre>
            </div>
            <div class="mt-4 flex justify-end gap-2">
                <button id="diagnosis-copy-btn" class="bg-[#FF5E00] hover:bg-[#CC4A00] text-white font-bold py-2 px-4 rounded-lg text-sm flex items-center gap-2 transition-colors shadow-lg">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"></path></svg>
                    Copiar Relatório
                </button>
            </div>
        </div>
    </div>

    <!-- Wallet Client Action Modal -->
    <div id="wallet-client-modal" class="modal-overlay hidden z-[3000]">
        <div class="bg-modal-content max-w-2xl w-full m-4 p-0 rounded-2xl shadow-2xl border border-slate-700 glass-panel overflow-hidden relative flex flex-col h-[90vh]">
            <!-- Header -->
            <div class="p-6 border-b border-slate-800 flex justify-between items-start bg-glass">
                <div>
                    <h3 id="wallet-modal-title" class="text-xl font-bold text-white mb-1">Detalhes do Cliente</h3>
                    <p id="wallet-modal-subtitle" class="text-sm text-slate-400">Visão completa e gestão.</p>
                </div>
                <button id="wallet-modal-close-btn" class="text-slate-400 hover:text-white transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>

            <!-- Tabs Navigation -->
            <div class="flex border-b border-slate-800 glass-panel/50 px-6 overflow-x-auto no-scrollbar">
                <button data-tab="general" class="wallet-tab-btn active px-4 py-3 text-sm font-medium text-[#FF5E00] border-b-2 border-[#FF5E00] transition-colors whitespace-nowrap">Geral</button>
                <button data-tab="losses" class="wallet-tab-btn px-4 py-3 text-sm font-medium text-slate-400 hover:text-white border-b-2 border-transparent transition-colors whitespace-nowrap">Perdas</button>
                <button data-tab="bonus" class="wallet-tab-btn px-4 py-3 text-sm font-medium text-slate-400 hover:text-white border-b-2 border-transparent transition-colors whitespace-nowrap">Bonificações</button>
                <button data-tab="itinerary" class="wallet-tab-btn px-4 py-3 text-sm font-medium text-slate-400 hover:text-white border-b-2 border-transparent transition-colors whitespace-nowrap">Roteirização</button>
            </div>
            
            <!-- Content Area (Scrollable) -->
            <div class="p-6 overflow-y-auto custom-scrollbar flex-1">
                
                <!-- Tab: General -->
                <div id="wallet-tab-content-general" class="space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <div class="p-3 glass-panel rounded-lg">
                            <div class="flex flex-col gap-2">
                                <div>
                                    <p class="text-[10px] text-slate-500 uppercase font-bold mb-0.5">Código</p>
                                    <p class="text-white font-mono font-medium text-sm" id="wallet-modal-code">--</p>
                                </div>
                                <div class="pt-2 border-t border-slate-700/50">
                                    <p class="text-[10px] text-slate-500 uppercase font-bold mb-0.5">RCA</p>
                                    <p class="text-blue-300 font-medium text-xs leading-tight" id="wallet-modal-seller">--</p>
                                </div>
                            </div>
                        </div>
                        <div class="p-3 glass-panel rounded-lg">
                            <p class="text-[10px] text-slate-500 uppercase font-bold mb-1">CNPJ / CPF</p>
                            <p id="wallet-modal-cnpj" class="text-white font-medium text-sm">--</p>
                        </div>
                    </div>
                    
                    <div class="p-3 glass-panel rounded-lg">
                        <p class="text-[10px] text-slate-500 uppercase font-bold mb-1">Razão Social</p>
                        <p id="wallet-modal-razao" class="text-white font-medium text-sm break-words">--</p>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="p-3 glass-panel rounded-lg">
                            <p class="text-[10px] text-slate-500 uppercase font-bold mb-1">Fantasia</p>
                            <p id="wallet-modal-fantasia" class="text-white font-medium text-sm break-words">--</p>
                        </div>
                        <div class="p-3 glass-panel rounded-lg">
                            <p class="text-[10px] text-slate-500 uppercase font-bold mb-1">Cidade / UF</p>
                            <p id="wallet-modal-city" class="text-white font-medium text-sm break-words">--</p>
                        </div>
                    </div>

                    <div class="p-3 glass-panel rounded-lg">
                        <p class="text-[10px] text-slate-500 uppercase font-bold mb-1">Endereço Completo</p>
                        <p id="wallet-modal-address" class="text-slate-300 text-xs break-words">--</p>
                    </div>

                    <!-- Purchase Summary -->
                    <div class="mt-6">
                        <h4 class="text-sm font-bold text-white mb-3 flex items-center gap-2">
                            <span class="w-1.5 h-4 bg-green-500 rounded-full"></span>
                            Histórico de Compras
                        </h4>
                        <div class="overflow-hidden rounded-lg border border-slate-700">
                            <table class="min-w-full text-xs text-left text-slate-300">
                                <thead class="glass-panel uppercase text-slate-500 font-bold">
                                    <tr>
                                        <th class="px-4 py-2">Mês</th>
                                        <th class="px-4 py-2 text-right">Valor (R$)</th>
                                    </tr>
                                </thead>
                                <tbody id="wallet-purchase-history-body" class="divide-y divide-slate-800"></tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Status / Warning Area -->
                    <div id="wallet-modal-status-area" class="mt-4 p-4 rounded-lg glass-panel hidden">
                        <div class="flex items-start gap-3">
                            <div id="wallet-modal-status-icon"></div>
                            <div>
                                <h4 id="wallet-modal-status-title" class="text-sm font-bold text-white mb-1"></h4>
                                <p id="wallet-modal-status-msg" class="text-xs text-slate-300"></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab: Losses (Perdas - Type 5) -->
                <div id="wallet-tab-content-losses" class="hidden space-y-4">
                    <div class="p-4 bg-red-900/10 border border-red-900/30 rounded-lg">
                        <div class="flex justify-between items-center">
                            <h4 class="text-sm font-bold text-red-400">Total Perdas</h4>
                            <span id="wallet-total-losses" class="text-lg font-bold text-white">R$ 0,00</span>
                        </div>
                    </div>
                    <div class="space-y-2" id="wallet-losses-list"></div>
                </div>

                <!-- Tab: Bonus (Bonificação - Type 11) -->
                <div id="wallet-tab-content-bonus" class="hidden space-y-4">
                    <div class="p-4 bg-blue-900/10 border border-blue-900/30 rounded-lg">
                        <div class="flex justify-between items-center">
                            <h4 class="text-sm font-bold text-blue-400">Total Bonificações</h4>
                            <span id="wallet-total-bonus" class="text-lg font-bold text-white">R$ 0,00</span>
                        </div>
                    </div>
                    <div class="space-y-2" id="wallet-bonus-list"></div>
                </div>

                <!-- Tab: Roteirização -->
                <div id="wallet-tab-content-itinerary" class="hidden space-y-6">
                    <div class="p-4 glass-panel rounded-lg">
                        <h4 class="text-sm font-bold text-white mb-4 flex items-center gap-2">
                            <svg class="w-5 h-5 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                            Configuração de Visita
                        </h4>

                        <div class="space-y-4">
                            <div>
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-2">Frequência de Visita</label>
                                <div class="grid grid-cols-2 gap-3">
                                    <label class="cursor-pointer">
                                        <input type="radio" name="itinerary-frequency" value="weekly" class="peer sr-only">
                                        <div class="p-3 rounded-lg border border-slate-600 bg-slate-700/50 text-slate-400 text-center peer-checked:bg-purple-600 peer-checked:text-white peer-checked:border-purple-500 transition-all hover:bg-white/5">
                                            <div class="font-bold text-sm">Semanal</div>
                                            <div class="text-[10px] opacity-75">7 em 7 dias</div>
                                        </div>
                                    </label>
                                    <label class="cursor-pointer">
                                        <input type="radio" name="itinerary-frequency" value="biweekly" class="peer sr-only">
                                        <div class="p-3 rounded-lg border border-slate-600 bg-slate-700/50 text-slate-400 text-center peer-checked:bg-purple-600 peer-checked:text-white peer-checked:border-purple-500 transition-all hover:bg-white/5">
                                            <div class="font-bold text-sm">Quinzenal</div>
                                            <div class="text-[10px] opacity-75">14 em 14 dias</div>
                                        </div>
                                    </label>
                                </div>
                            </div>

                            <!-- Day Selection Container (Hidden by default, shown for Weekly) -->
                            <div id="itinerary-days-container" class="hidden">
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-2">Dias de Atendimento</label>
                                <div class="grid grid-cols-3 sm:grid-cols-6 gap-2">
                                    <label class="cursor-pointer select-none">
                                        <input type="checkbox" name="itinerary-day" value="1" class="peer sr-only">
                                        <div class="p-2 rounded-lg border border-slate-600 bg-slate-700/50 text-slate-400 text-center peer-checked:bg-[#FF5E00] peer-checked:text-white peer-checked:border-[#FF5E00] transition-all hover:bg-white/5 text-xs font-bold">SEG</div>
                                    </label>
                                    <label class="cursor-pointer select-none">
                                        <input type="checkbox" name="itinerary-day" value="2" class="peer sr-only">
                                        <div class="p-2 rounded-lg border border-slate-600 bg-slate-700/50 text-slate-400 text-center peer-checked:bg-[#FF5E00] peer-checked:text-white peer-checked:border-[#FF5E00] transition-all hover:bg-white/5 text-xs font-bold">TER</div>
                                    </label>
                                    <label class="cursor-pointer select-none">
                                        <input type="checkbox" name="itinerary-day" value="3" class="peer sr-only">
                                        <div class="p-2 rounded-lg border border-slate-600 bg-slate-700/50 text-slate-400 text-center peer-checked:bg-[#FF5E00] peer-checked:text-white peer-checked:border-[#FF5E00] transition-all hover:bg-white/5 text-xs font-bold">QUA</div>
                                    </label>
                                    <label class="cursor-pointer select-none">
                                        <input type="checkbox" name="itinerary-day" value="4" class="peer sr-only">
                                        <div class="p-2 rounded-lg border border-slate-600 bg-slate-700/50 text-slate-400 text-center peer-checked:bg-[#FF5E00] peer-checked:text-white peer-checked:border-[#FF5E00] transition-all hover:bg-white/5 text-xs font-bold">QUI</div>
                                    </label>
                                    <label class="cursor-pointer select-none">
                                        <input type="checkbox" name="itinerary-day" value="5" class="peer sr-only">
                                        <div class="p-2 rounded-lg border border-slate-600 bg-slate-700/50 text-slate-400 text-center peer-checked:bg-[#FF5E00] peer-checked:text-white peer-checked:border-[#FF5E00] transition-all hover:bg-white/5 text-xs font-bold">SEX</div>
                                    </label>
                                    <label class="cursor-pointer select-none">
                                        <input type="checkbox" name="itinerary-day" value="6" class="peer sr-only">
                                        <div class="p-2 rounded-lg border border-slate-600 bg-slate-700/50 text-slate-400 text-center peer-checked:bg-[#FF5E00] peer-checked:text-white peer-checked:border-[#FF5E00] transition-all hover:bg-white/5 text-xs font-bold">SÁB</div>
                                    </label>
                                </div>
                            </div>

                            <div>
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-2">Próxima Data de Atendimento</label>
                                <input type="date" id="itinerary-next-date" class="w-full glass-panel border border-slate-600 text-white text-sm rounded-lg p-3 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 block">
                                <p class="mt-2 text-xs text-slate-400" id="itinerary-calc-preview">
                                    Define o dia base para o cálculo das próximas visitas.
                                </p>
                            </div>
                        </div>

                        <div class="mt-6 pt-4 border-t border-slate-700 flex justify-end">
                            <button id="save-itinerary-btn" class="bg-purple-600 hover:bg-purple-500 text-white font-bold py-2 px-6 rounded-lg shadow-lg transition-colors flex items-center gap-2 text-sm">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                                Salvar Roteiro
                            </button>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Footer Action -->
            <div class="p-6 border-t border-slate-800 flex justify-end gap-3 bg-glass">
                <button id="wallet-modal-cancel-btn" class="px-4 py-2 glass-panel hover:bg-white/5 text-slate-300 rounded-lg font-medium transition-colors border border-slate-700 text-sm">Fechar</button>
                <button id="wallet-modal-action-btn" class="px-4 py-2 bg-[#FF5E00] hover:bg-[#CC4A00] text-white rounded-lg font-bold shadow-lg transition-colors flex items-center gap-2 text-sm">
                    <span id="wallet-modal-action-text">Confirmar</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Extra Views -->

    <!-- Product Performance Modal -->
    <div id="product-performance-modal" class="modal-overlay hidden z-[3200]">
        <div class="bg-modal-content w-full max-w-md m-4 p-6 relative rounded-2xl shadow-2xl border border-slate-700 glass-panel">
            <button id="product-performance-modal-close-btn" class="absolute top-4 right-4 text-slate-400 hover:text-white transition-colors">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <div class="mb-6">
                <h3 class="text-xl font-bold text-white leading-tight" id="product-performance-title">Nome do Produto</h3>
                <p class="text-sm text-slate-400 font-mono mt-1" id="product-performance-code">Cód: 0000</p>
            </div>
            
            <div class="space-y-4">
                <!-- Stock Info -->
                <div class="p-4 glass-panel rounded-xl border border-slate-700">
                    <div class="flex justify-between items-center">
                        <span class="text-xs font-bold text-slate-500 uppercase tracking-wider">Estoque Atual</span>
                        <div class="flex items-baseline gap-1">
                            <span id="product-performance-stock" class="text-2xl font-bold text-blue-400">0</span>
                            <span class="text-xs text-slate-400">cx</span>
                        </div>
                    </div>
                </div>

                <!-- Sales Comparison -->
                <div class="p-4 glass-panel rounded-xl border border-slate-700">
                    <p class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-3">Vendas (<span id="product-performance-metric-label">Valor</span>)</p>
                    
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-slate-300">Mês Anterior</span>
                            <span id="product-performance-prev" class="text-sm font-bold text-white">--</span>
                        </div>
                        <div class="w-full h-px bg-slate-700/50"></div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-slate-300">Mês Atual</span>
                            <span id="product-performance-curr" class="text-sm font-bold text-white">--</span>
                        </div>
                    </div>
                </div>

                <!-- Variation -->
                <div class="p-4 bg-glass rounded-xl border border-slate-700/50 flex justify-between items-center">
                    <span class="text-sm font-bold text-slate-400">Variação</span>
                    <span id="product-performance-var" class="px-3 py-1 rounded-lg text-sm font-bold bg-slate-700 text-slate-300">--</span>
                </div>

                <!-- PDV Comparison -->
                <div class="p-4 glass-panel rounded-xl border border-slate-700">
                    <p class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-3">Positivação (PDV)</p>

                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-slate-300">Mês Anterior</span>
                            <span id="product-performance-pdv-prev" class="text-sm font-bold text-white">--</span>
                        </div>
                        <div class="w-full h-px bg-slate-700/50"></div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-slate-300">Mês Atual</span>
                            <span id="product-performance-pdv-curr" class="text-sm font-bold text-white">--</span>
                        </div>
                    </div>
                </div>

                <!-- Variation PDV -->
                <div class="p-4 bg-glass rounded-xl border border-slate-700/50 flex justify-between items-center">
                    <span class="text-sm font-bold text-slate-400">Variação PDV</span>
                    <span id="product-performance-pdv-var" class="px-3 py-1 rounded-lg text-sm font-bold bg-slate-700 text-slate-300">--</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile Mix Details Modal -->
    <div id="mix-mobile-modal" class="modal-overlay hidden z-[3000]">
        <div class="bg-modal-content w-full max-w-sm m-4 p-6 relative rounded-2xl shadow-2xl border border-slate-700 glass-panel max-h-[90vh] overflow-y-auto custom-scrollbar">
            <button id="mix-mobile-modal-close-btn" class="absolute top-4 right-4 text-slate-400 hover:text-white transition-colors">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <div class="mb-6">
                <h3 class="text-lg font-bold text-white leading-tight" id="mix-mobile-modal-title">Cliente</h3>
                <p class="text-sm text-slate-400 font-mono mt-1" id="mix-mobile-modal-subtitle">Cód: 0000</p>
            </div>
            
            <div id="mix-mobile-modal-content" class="space-y-4">
                <!-- Content injected by JS -->
            </div>
        </div>
    </div>

    <!-- Mobile Titulos Details Modal -->
    <div id="titulos-mobile-modal" class="modal-overlay hidden z-[3000]">
        <div class="bg-modal-content w-full max-w-sm m-4 p-6 relative rounded-2xl shadow-2xl border border-slate-700 glass-panel max-h-[90vh] overflow-y-auto custom-scrollbar">
            <button id="titulos-mobile-modal-close-btn" class="absolute top-4 right-4 text-slate-400 hover:text-white transition-colors">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <div class="mb-6">
                <h3 class="text-lg font-bold text-white leading-tight" id="titulos-mobile-modal-title">Cliente</h3>
                <p class="text-sm text-slate-400 font-mono mt-1" id="titulos-mobile-modal-subtitle">Cód: 0000</p>
            </div>

            <div id="titulos-mobile-modal-content" class="space-y-4">
                <div class="p-3 glass-panel rounded-lg border border-slate-700/50">
                    <p class="text-xs text-slate-500 uppercase font-bold mb-1">Vendedor</p>
                    <p class="text-white text-sm" id="titulos-modal-seller">--</p>
                </div>
                <div class="p-3 glass-panel rounded-lg border border-slate-700/50">
                    <p class="text-xs text-slate-500 uppercase font-bold mb-1">Cidade</p>
                    <p class="text-white text-sm" id="titulos-modal-city">--</p>
                </div>
                <div class="grid grid-cols-2 gap-3">
                    <div class="p-3 glass-panel rounded-lg border border-slate-700/50">
                        <p class="text-xs text-slate-500 uppercase font-bold mb-1">Valor Original</p>
                        <p class="text-slate-300 text-sm" id="titulos-modal-val-orig">--</p>
                    </div>
                    <div class="p-3 glass-panel rounded-lg border border-slate-700/50">
                        <p class="text-xs text-slate-500 uppercase font-bold mb-1">Valor Aberto</p>
                        <p class="text-white font-bold text-sm" id="titulos-modal-val-open">--</p>
                    </div>
                </div>
                <div class="flex flex-col gap-3">
                    <div class="p-3 glass-panel rounded-lg border border-slate-700/50">
                        <p class="text-xs text-slate-500 uppercase font-bold mb-1">Vencimento</p>
                        <p class="text-white text-sm" id="titulos-modal-date">--</p>
                    </div>
                    <div class="p-3 glass-panel rounded-lg border border-slate-700/50 flex flex-col justify-center items-start">
                        <p class="text-xs text-slate-500 uppercase font-bold mb-1">Status</p>
                        <div id="titulos-modal-status"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

<!-- Toast Notification Container -->
    <!-- Legends Modal -->
    <div id="produtos-legends-modal" class="modal-overlay hidden z-[3000]">
        <div class="bg-modal-content max-w-sm w-full m-4 p-6 rounded-2xl shadow-2xl border border-slate-700 glass-panel relative">
            <button id="produtos-legends-close-btn" class="absolute top-4 right-4 text-slate-400 hover:text-white transition-colors">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <h3 class="text-xl font-bold text-white mb-6">Legendas</h3>
            <div class="space-y-4">
                <div class="flex items-center gap-4">
                    <div class="p-2 bg-slate-700 text-lime-400 rounded-lg border border-slate-600">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path></svg>
                    </div>
                    <div>
                        <p class="text-white font-bold text-sm">Detalhes Comerciais</p>
                        <p class="text-xs text-slate-400">Promoções e Campanhas</p>
                    </div>
                </div>
                <div class="flex items-center gap-4">
                    <div class="p-2 bg-slate-700 text-red-400 rounded-lg border border-slate-600">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>
                    </div>
                    <div>
                        <p class="text-white font-bold text-sm">Visualizar Produto</p>
                        <p class="text-xs text-slate-400">Ver no site/app</p>
                    </div>
                </div>
                <div class="flex items-center gap-4">
                    <div class="p-2 bg-slate-700 text-blue-400 rounded-lg border border-slate-600">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>
                    </div>
                    <div>
                        <p class="text-white font-bold text-sm">Estoque</p>
                        <p class="text-xs text-slate-400">Histórico de Movimentação</p>
                    </div>
                </div>
                <div class="flex items-center gap-4">
                    <div class="p-2 bg-slate-700 text-purple-400 rounded-lg border border-slate-600">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>
                    </div>
                    <div>
                        <p class="text-white font-bold text-sm">Expandir</p>
                        <p class="text-xs text-slate-400">Mais informações</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

<div id="toast-container" class="fixed top-4 right-4 z-[9999] flex flex-col gap-3 w-80 sm:w-96 pointer-events-none"></div>

<script src="js/banner3d.js" defer></script>
<script src="js/app/utils.js" defer></script>
<script src="js/init.js?v=6.0.0" defer></script>
<script>
    function toggleMetaSection(contentId, chevronId) {
        const content = document.getElementById(contentId);
        const chevron = document.getElementById(chevronId);

        if (content.classList.contains('hidden')) {
            content.classList.remove('hidden');
            // Allow reflow for transition
            setTimeout(() => {
                // Ensure opacity or height transition if needed, but 'hidden' toggle is abrupt unless we manage height
                // The class 'transition-all' needs property changes.
                // For simplicity with 'hidden', we just toggle.
                // To animate height, we'd need max-height logic, but user just asked for "pushing" content.
                // Standard toggle is fine.
                chevron.classList.add('rotate-180');
            }, 10);
        } else {
            content.classList.add('hidden');
            chevron.classList.remove('rotate-180');
        }
    }
</script>

<div class="fab-container hidden" id="positivacao-fab-container">
    <div class="fab-menu">
        <button class="fab-item" data-action="pdf-active">
            <svg class="w-4 h-4 fab-icon-pdf" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
            <span>PDF (Ativos)</span>
        </button>
        <button class="fab-item" data-action="pdf-inactive">
            <svg class="w-4 h-4 fab-icon-pdf" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
            <span>PDF (Inativos)</span>
        </button>
        <button class="fab-item" data-action="excel">
            <svg class="w-4 h-4 fab-icon-excel" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
            <span>EXCEL</span>
        </button>
    </div>
    <button class="fab-btn">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
    </button>
</div>
<div class="fab-container hidden" id="innovations-fab-container">
    <div class="fab-menu">
        <button class="fab-item" data-action="pdf">
            <svg class="w-4 h-4 fab-icon-pdf" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
            <span>PDF</span>
        </button>
        <button class="fab-item" data-action="excel">
            <svg class="w-4 h-4 fab-icon-excel" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
            <span>EXCEL</span>
        </button>
    </div>
    <button class="fab-btn">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
    </button>
</div>
<div class="fab-container hidden" id="mix-fab-container">
    <div class="fab-menu">
        <button class="fab-item" data-action="pdf">
            <svg class="w-4 h-4 fab-icon-pdf" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
            <span>PDF</span>
        </button>
        <button class="fab-item" data-action="excel">
            <svg class="w-4 h-4 fab-icon-excel" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
            <span>EXCEL</span>
        </button>
    </div>
    <button class="fab-btn">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
    </button>
</div>
<div class="fab-container hidden" id="meta-realizado-fab-container">
    <div class="fab-menu">
        <button class="fab-item" data-action="pdf">
            <svg class="w-4 h-4 fab-icon-pdf" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
            <span>PDF</span>
        </button>
        <button class="fab-item" data-action="excel">
            <svg class="w-4 h-4 fab-icon-excel" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
            <span>EXCEL</span>
        </button>
    </div>
    <button class="fab-btn">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
    </button>
</div>
<div class="fab-container hidden" id="coverage-fab-container">
    <div class="fab-menu">
        <button class="fab-item" data-action="pdf">
            <svg class="w-4 h-4 fab-icon-pdf" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
            <span>PDF</span>
        </button>
        <button class="fab-item" data-action="excel">
            <svg class="w-4 h-4 fab-icon-excel" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
            <span>EXCEL</span>
        </button>
    </div>
    <button class="fab-btn">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
    </button>
</div>
</body>
</html>
